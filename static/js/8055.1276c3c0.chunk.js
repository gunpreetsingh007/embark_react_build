(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[8055],{7068:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r,i,o,a,s,l,c,u,d,h=n(74165),p=n(15861),m=n(93433),f=n(29439),g=n(72791),v=n(51261),x=n(30168),b=n(17691),y=b.ZP.section(r||(r=(0,x.Z)(["\n  margin: 15px;\n  width: 165px;\n  height: 165px;\n  background-color: white;\n  border: 1px dashed #00000066;\n  opacity: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),j=b.ZP.div(i||(i=(0,x.Z)(['\n  font: normal normal normal 12px/13px "Proxima Nova Rg", sans-serif;\n  letter-spacing: 0px;\n  color: #00000099;\n  display: flex;\n  justify-content: space-between;\n']))),w=b.ZP.p(o||(o=(0,x.Z)(['\n  font: normal normal normal 12px/15px "Proxima Nova Rg", sans-serif;\n  letter-spacing: -0.29px;\n  color: #00000099;\n  opacity: 1;\n']))),Z=b.ZP.img(a||(a=(0,x.Z)(["\n  width: 28px;\n  height: 18px;\n  object-fit: contain;\n"]))),k=b.ZP.label(s||(s=(0,x.Z)(['\n  text-align: left;\n  font: normal normal normal 12px/24px "Proxima Nova Rg", sans-serif;\n  letter-spacing: 0px;\n  color: #00000099;\n  margin: 8px 0px;\n']))),I=b.ZP.div(l||(l=(0,x.Z)(["\n  display: flex;\n  align-items: center;\n"]))),S=b.ZP.div(c||(c=(0,x.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),C=b.ZP.img(u||(u=(0,x.Z)(["\n  // height: 300px;\n  width: 200px;\n  object-fit: contain;\n"]))),N=b.ZP.a(d||(d=(0,x.Z)(['\n  text-align: left;\n  text-decoration: underline;\n  font: normal normal normal 12px/24px "Proxima Nova Rg", sans-serif;\n  letter-spacing: 0px;\n  color: #3a7bd5;\n  cursor: pointer;\n  margin-left: 8px;\n']))),E=n(89938),P=n(80184),D=function(e){var t=e.bgcolor,n=e.progress,r=e.height,i=e.name,o=e.size,a={height:r,width:"100%",backgroundColor:"#00000040",borderRadius:40},s={height:"100%",width:"".concat(n,"%"),backgroundColor:t,borderRadius:40};return(0,P.jsx)(P.Fragment,{children:n?(0,P.jsxs)("div",{style:{margin:"15px 0 15px"},children:[(0,P.jsx)("p",{children:"uploading the file"}),(0,P.jsxs)(j,{children:[i&&(0,P.jsxs)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",paddingRight:"20px"},children:[i," "]}),o&&(0,P.jsxs)("span",{children:[.001*o," kb"]})]}),(0,P.jsx)("div",{style:a,children:(0,P.jsx)("div",{style:s,children:(0,P.jsx)(j,{})})}),(0,P.jsx)(j,{children:"".concat(n,"% done")})]}):null})},F=n(87315),A=function(e){var t=e.onChange,n=e.value,r=e.customRef,i=e.name,o=e.required,a=e.hint,s=e.imageSrc,l=e.label,c=e.acceptedFormat,u=e.deleteFile,d=e.progress,x=e.productVariantIndex,b=(0,g.useCallback)((function(){return n||[]}),[n]),j=(0,g.useState)(b()),A=(0,f.Z)(j,2),M=A[0],T=A[1],U=(0,g.useState)(b()),O=(0,f.Z)(U,2),R=O[0],B=O[1],q=(0,g.useRef)(),V=(0,g.useState)({error:!1,message:""}),H=(0,f.Z)(V,2),L=H[0],W=H[1],G=(0,g.useCallback)((function(e){var t={error:!1,message:""};return!e&&o&&(t={error:!0,message:l+" is missing"}),W(t),t}),[l,o]),z=function(){var e=(0,p.Z)((0,h.Z)().mark((function e(t){var n,r,i;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=11;break}if("undefined"==typeof x){e.next=7;break}return e.next=4,u(t,x);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,u(t);case 9:n=e.sent;case 10:"success"==n&&(r=(0,m.Z)(M),i=(0,m.Z)(R),r.splice(t,1),i.splice(t,1),T(r),B(i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.useEffect)((function(){r&&r({value:M,validate:G,name:i||""})}),[r,M,i,G]),(0,g.useEffect)((function(){T(n||[]),B(n||[])}),[n]),(0,P.jsxs)(P.Fragment,{children:[s?(0,P.jsx)(v.JO,{src:s,alt:""}):null,l?(0,P.jsxs)(v.__,{children:[o&&(0,P.jsx)("span",{className:"required",children:"* "})," ",l,":"," "]}):null,(0,P.jsx)(F.X2,{children:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(F.sg,{lg:4,children:[(0,P.jsxs)(y,{onClick:function(){var e;return null===(e=q.current)||void 0===e?void 0:e.click()},children:[(0,P.jsx)(Z,{src:E,alt:""}),(0,P.jsx)(w,{children:"Click here to upload"})]})," "]}),(0,P.jsx)("input",{type:"file",multiple:!0,accept:c,style:{display:"none"},ref:q,onChange:function(e){var n={error:!1,message:""},r=[],i=[];if(e.target.files&&e.target.files.length>0)for(var o=0;o<e.target.files.length;o++)r.push(URL.createObjectURL(e.target.files[o])),i.push(e.target.files[o].type);var a=!0;if(i.every((function(e){return!!c.includes(e)||(a=!1,!1)})),a){var s=[].concat((0,m.Z)(M),(0,m.Z)(e.target.files)),l=[].concat((0,m.Z)(R),r);T(s),B(l),"undefined"!=typeof x?t&&t(e.target.files,x):t&&t(e.target.files)}else n={error:!0,message:"File type should be ".concat(c," format only")};W(n)}})," "]})}),R.map((function(e,t){var n,r;return(0,P.jsxs)("div",{children:[(0,P.jsx)(k,{children:"Preview"}),(0,P.jsxs)(I,{children:[(0,P.jsx)(S,{children:(0,P.jsx)(C,{src:e,alt:""})}),(0,P.jsx)(N,{onClick:function(){return z(t)},children:"Delete"}),null!==d&&void 0!==d&&d[t]&&(null===d||void 0===d?void 0:d[t])>0&&(null===d||void 0===d?void 0:d[t])<100?(0,P.jsx)(D,{bgcolor:"#306297",progress:null===d||void 0===d?void 0:d[t],height:5,size:null===M||void 0===M||null===(n=M[t])||void 0===n?void 0:n.size,name:null===M||void 0===M||null===(r=M[t])||void 0===r?void 0:r.name}):null!==d&&void 0!==d&&d[t]&&-1==(null===d||void 0===d?void 0:d[t])?(0,P.jsx)("span",{style:{color:"red"},children:"Could not upload Image. Something went wrong."}):null]})]})})),(0,P.jsxs)(v.ZK,{children:[L.error?(0,P.jsx)(v.hW,{children:L.message}):(0,P.jsx)("div",{}),a?(0,P.jsx)(v.sG,{children:a}):(0,P.jsx)("div",{})]})]})}},98055:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r,i,o=n(74165),a=n(15861),s=n(93433),l=n(29439),c=n(65238),u=n(47701),d=n(24373),h=n(7273),p=n(72791),m=n(51261),f=n(30168),g=n(17691).ZP.label(r||(r=(0,f.Z)(['\n  text-align: left;\n  font: normal normal normal 18px/24px "Proxima Nova Rg", sans-serif;\n  letter-spacing: 0px;\n  color: #000000;\n  margin-left: 12px;\n']))),v=n(60862),x=n(80184),b=function(e){var t=e.value,n=e.customRef,r=e.name,i=e.required,o=e.hint,a=e.imageSrc,s=e.label,c=(0,p.useCallback)((function(){return t||!1}),[t]),u=(0,p.useState)(c()),d=(0,l.Z)(u,2),h=d[0],f=d[1],b=(0,p.useState)({error:!1,message:""}),y=(0,l.Z)(b,2),j=y[0],w=y[1],Z=(0,p.useCallback)((function(e){var t={error:!1,message:""};return"undefined"===typeof e&&i&&(t={error:!0,message:s+" is missing"}),w(t),t}),[s,i]);return p.useEffect((function(){n({value:h,validate:Z,name:r||""})}),[n,h,r,Z]),p.useEffect((function(){f(t||!1)}),[t]),p.useEffect((function(){null!==e&&void 0!==e&&e.conditionValue&&(null===e||void 0===e?void 0:e.conditionValue)==(null===e||void 0===e?void 0:e.conditionCriteria)&&f(!0)}),[null===e||void 0===e?void 0:e.conditionValue]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(m.fv,{children:[a?(0,x.jsx)(m.JO,{src:a,alt:"image"}):null,s?(0,x.jsxs)(m.__,{children:[i&&(0,x.jsx)("span",{className:"required",children:"* "})," ",s,":"," "]}):null,(0,x.jsx)(v.default,{handleDiameter:20,onColor:"#c7efda",offColor:"#FF767C",onHandleColor:"#6bd8a4",uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:14,width:28,onChange:function(t){null!==e&&void 0!==e&&e.conditionValue&&(null===e||void 0===e?void 0:e.conditionValue)==(null===e||void 0===e?void 0:e.conditionCriteria)||(Z(t),f(t))},checked:h}),h?(0,x.jsxs)(g,{children:["".concat(h&&"Active")," "]}):null]}),(0,x.jsxs)(m.ZK,{children:[j.error?(0,x.jsx)(m.hW,{children:j.message}):(0,x.jsx)("div",{}),o?(0,x.jsx)(m.sG,{children:o}):(0,x.jsx)("div",{})]})]})},y=n(48672),j=n(87315),w=n(72881),Z=n(84373),k=n(78820),I=n(7068),S=n(56960),C=n(57689),N=new Uint8Array(16);function E(){if(!i&&!(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(N)}var P=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var D=function(e){return"string"===typeof e&&P.test(e)},F=[],A=0;A<256;++A)F.push((A+256).toString(16).substr(1));var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(F[e[t+0]]+F[e[t+1]]+F[e[t+2]]+F[e[t+3]]+"-"+F[e[t+4]]+F[e[t+5]]+"-"+F[e[t+6]]+F[e[t+7]]+"-"+F[e[t+8]]+F[e[t+9]]+"-"+F[e[t+10]]+F[e[t+11]]+F[e[t+12]]+F[e[t+13]]+F[e[t+14]]+F[e[t+15]]).toLowerCase();if(!D(n))throw TypeError("Stringified UUID is invalid");return n};var T=function(e,t,n){var r=(e=e||{}).random||(e.rng||E)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return M(r)},U=n(67604),O=new c.Z,R=function(e){var t,n,r,i,c,m,f,g=(0,p.useState)(!1),v=(0,l.Z)(g,2),N=v[0],E=v[1],P=(0,C.s0)(),D=(0,p.useState)([]),F=(0,l.Z)(D,2),A=F[0],M=F[1],R=(0,p.useState)([]),B=(0,l.Z)(R,2),q=B[0],V=B[1],H=(0,p.useState)([]),L=(0,l.Z)(H,2),W=L[0],G=L[1],z=(0,p.useState)(!0),X=(0,l.Z)(z,2),_=X[0],J=X[1],$=(0,p.useState)({}),Y=(0,l.Z)($,2),K=Y[0],Q=Y[1],ee=(0,C.UO)().name;ee=null===(t=ee)||void 0===t?void 0:t.replaceAll("-"," ");var te=(0,p.useRef)(),ne=(0,p.useState)(""),re=(0,l.Z)(ne,2),ie=re[0],oe=re[1],ae=(0,p.useState)([]),se=(0,l.Z)(ae,2),le=se[0],ce=se[1],ue=(0,p.useState)([{id:T(),productPrice:"",productDiscountPrice:"",attributeValue:"",pictureUrl:"",productMainImageProgress:0,isGiftSetBox:!1,bestSellerStatus:!1,isNew:!1,isActive:!0,refNumber:"",otherImages:[],descriptionImage:[]}]),de=(0,l.Z)(ue,2),he=de[0],pe=de[1],me=(0,p.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),t={method:"GET"},e.next=4,O.callApi("/addProduct/chooseHierarchyInAddProduct",t);case 4:200==(null===(n=e.sent)||void 0===n?void 0:n.status)?(E(!1),M(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.data)):(E(!1),S.Am.error("Something went wrong while fetching categories"));case 6:case"end":return e.stop()}}),e)}))),[]),fe=(0,p.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET"},e.next=3,O.callApi("/hierarchy/getAllFragrances",t);case 3:200==(null===(n=e.sent)||void 0===n?void 0:n.status)?V(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.data.map((function(e){return{value:e.id,label:e.fragranceName}}))):S.Am.error("Something went wrong while fetching fragrances");case 5:case"end":return e.stop()}}),e)}))),[]),ge=(0,p.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a,s,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET"},e.next=3,O.callApi("/product/getProductDetails/".concat(ee||""),t);case 3:200==(null===(n=e.sent)||void 0===n?void 0:n.status)?(Q(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.data),c=null===n||void 0===n||null===(i=n.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.productDetails.map((function(e){return e.productMainImageProgress=100,e.attributeValue=Object.values(e.attributeCombination)[0],e.otherImages=e.otherImages.map((function(e){var t={};return t.image=e,t.progress=100,e=t})),e.descriptionImage=e.descriptionImage.map((function(e){var t={};return t.image=e,t.progress=100,e=t})),e})),pe(c),ce(null===n||void 0===n||null===(s=n.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.searchTags)):S.Am.error("Something went wrong while fetching product");case 5:case"end":return e.stop()}}),e)}))),[]),ve=(0,p.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET"},e.next=3,O.callApi("/addProduct/chooseProductAttributes",t);case 3:200==(null===(n=e.sent)||void 0===n?void 0:n.status)?G(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.data.map((function(e){return{value:e.id,label:e.attributeName}}))):S.Am.error("Something went wrong while fetching attributes");case 5:case"end":return e.stop()}}),e)}))),[]);(0,p.useEffect)((function(){"edit"==e.type?ge().then((function(e){ve(),fe(),me()})):(me(),ve(),fe())}),[]),(0,p.useEffect)((function(){var e,t=null===A||void 0===A?void 0:A.find((function(e){return e.value==(null===K||void 0===K?void 0:K["Hierarchy.id"])}));null!==t&&void 0!==t&&null!==(e=t.label)&&void 0!==e&&e.includes("BATH & BODY")?J(!1):J(!0)}),[K,A]);var xe=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=he[t],r=[],n.pictureUrl&&r.push(Ze(n.pictureUrl)),i=0;i<n.otherImages.length;i++)n.otherImages[i].image&&r.push(Ze(n.otherImages[i].image));return e.next=6,Promise.all(r);case 6:he.splice(t,1),pe((0,s.Z)(he));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("productImage",t),i={method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r,onUploadProgress:function(e){he[n].productMainImageProgress=Math.round(100*e.loaded/e.total),pe((0,s.Z)(he))}},e.next=5,O.callApi("/file/uploadFile",i);case 5:200==(a=e.sent).status?(he[n].pictureUrl=null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.data,pe((0,s.Z)(he))):(he[n].productMainImageProgress=-1,pe((0,s.Z)(he)));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,i,a,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),n=he[t].pictureUrl,r=n.split("/"),i=r[r.length-1],a={method:"DELETE",body:{name:i}},e.next=7,O.callApi("/file/deleteFile",a);case 7:if(200!==(null===(l=e.sent)||void 0===l?void 0:l.status)){e.next=16;break}return E(!1),he[t].pictureUrl="",he[t].productMainImageProgress=0,pe((0,s.Z)(he)),e.abrupt("return","success");case 16:return E(!1),S.Am.error("Error in deleting image. Something went wrong"),e.abrupt("return","failed");case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,l,c,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=new Array(t.length).fill({image:"",progress:0}),a=he[n].otherImages.length,l=[].concat((0,s.Z)(he[n].otherImages),(0,s.Z)(i)),he[n].otherImages=l,pe((0,s.Z)(he)),c=(0,o.Z)().mark((function e(i){var l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(l=new FormData).append("productImage",t[i]),c={method:"POST",headers:{"Content-Type":"multipart/form-data"},body:l,onUploadProgress:function(e){he[n].otherImages[i+a].progress=Math.round(100*e.loaded/e.total),pe((0,s.Z)(he))}},r.push(O.callApi("/file/uploadFile",c).catch((function(){he[n].otherImages[i+a].progress=-1,pe((0,s.Z)(he))})));case 4:case"end":return e.stop()}}),e)})),u=0;case 8:if(!(u<t.length)){e.next=13;break}return e.delegateYield(c(u),"t0",10);case 10:u++,e.next=8;break;case 13:Promise.all(r).then((function(e){for(var t=JSON.parse(JSON.stringify(he[n].otherImages)),r=0;r<e.length;r++){var i,o=e[r];if(200==o.status)t[r+a].image=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.data;else t[r+a].progress=-1}he[n].otherImages=t,pe((0,s.Z)(he))}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),we=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,l,c,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=new Array(t.length).fill({image:"",progress:0}),a=he[n].descriptionImage.length,l=[].concat((0,s.Z)(he[n].descriptionImage),(0,s.Z)(i)),he[n].descriptionImage=l,pe((0,s.Z)(he)),c=(0,o.Z)().mark((function e(i){var l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(l=new FormData).append("productImage",t[i]),c={method:"POST",headers:{"Content-Type":"multipart/form-data"},body:l,onUploadProgress:function(e){he[n].descriptionImage[i+a].progress=Math.round(100*e.loaded/e.total),pe((0,s.Z)(he))}},r.push(O.callApi("/file/uploadFile",c).catch((function(){he[n].descriptionImage[i+a].progress=-1,pe((0,s.Z)(he))})));case 4:case"end":return e.stop()}}),e)})),u=0;case 8:if(!(u<t.length)){e.next=13;break}return e.delegateYield(c(u),"t0",10);case 10:u++,e.next=8;break;case 13:Promise.all(r).then((function(e){for(var t=JSON.parse(JSON.stringify(he[n].descriptionImage)),r=0;r<e.length;r++){var i,o=e[r];if(200==o.status)t[r+a].image=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.data;else t[r+a].progress=-1}he[n].descriptionImage=t,pe((0,s.Z)(he))}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(e){var t=e.split("/"),n={method:"DELETE",body:{name:t[t.length-1]}};return O.callApi("/file/deleteFile",n)},ke=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),r=he[n].otherImages[t].image,i=r.split("/"),a=i[i.length-1],l={method:"DELETE",body:{name:a}},e.next=7,O.callApi("/file/deleteFile",l);case 7:if(200!==(null===(c=e.sent)||void 0===c?void 0:c.status)){e.next=15;break}return E(!1),he[n].otherImages.splice(t,1),pe((0,s.Z)(he)),e.abrupt("return","success");case 15:return E(!1),S.Am.error("Error in deleting image. Something went wrong"),e.abrupt("return","failed");case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),r=he[n].descriptionImage[t].image,i=r.split("/"),a=i[i.length-1],l={method:"DELETE",body:{name:a}},e.next=7,O.callApi("/file/deleteFile",l);case 7:if(200!==(null===(c=e.sent)||void 0===c?void 0:c.status)){e.next=15;break}return E(!1),he[n].descriptionImage.splice(t,1),pe((0,s.Z)(he)),e.abrupt("return","success");case 15:return E(!1),S.Am.error("Error in deleting image. Something went wrong"),e.abrupt("return","failed");case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n){var r,i,a,s,l,c,u,d,h,p,m,f,g,v,x,b,y,j,w,Z,k,I;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(E(!0),r=n.productName,i=n.productDescription,a=n.topNote,s=n.heartNote,l=n.baseNote,c=n.category,u=n.attribute,d=n.gender,h=n.fragrance,p=n.ingredients,m=n.hsnNumber,f=_?{productName:null===r||void 0===r?void 0:r.trim(),productDescription:i,noteStory:{topNote:a,heartNote:s,baseNote:l},hierarchyId:c,fragranceId:h,hsnNumber:m,gender:d}:{productName:null===r||void 0===r?void 0:r.trim(),productDescription:i,noteStory:{ingredients:p},hierarchyId:c,hsnNumber:m,gender:d},g=!1,v=!1,x=!1,b=!1,y=[],j=0;j<he.length;j++)(w={}).id=he[j].id,w.productPrice=n["productPrice".concat(j)],w.productDiscountPrice=n["productDiscountPrice".concat(j)],w.isGiftSetBox=n["isGiftSetBox".concat(j)],w.bestSellerStatus=n["bestSellerStatus".concat(j)],w.isNew=n["isNew".concat(j)],w.isActive=n["isActive".concat(j)],w.refNumber=n["refNumber".concat(j)],w.pictureUrl=he[j].pictureUrl,w.otherImages=he[j].otherImages.map((function(e){return e.image})),w.descriptionImage=he[j].descriptionImage.map((function(e){return e.image})),w.attributeCombination={},w.attributeCombination[u]=n["attributeValue".concat(j)],y.push(w),w.isGiftSetBox&&(g=!0),w.bestSellerStatus&&(v=!0),w.isNew&&(x=!0),w.isActive&&(b=!0);return f.productDetails=y,f.isGiftSetBox=g,f.bestSellerStatus=v,f.isNew=x,f.isActive=b,f.searchTags=le,"edit"==e.type&&(f.id=K.id),Z={method:"edit"==e.type?"PUT":"POST",body:f},t.next=19,O.callApi("/addProduct/",Z);case 19:200===(null===(k=t.sent)||void 0===k?void 0:k.status)?(I="edit"==e.type?"Updated successfully":"Product successfully created",(0,U.Z)("Success",I,"success"),E(!1)):((0,U.Z)("Error","Something went wrong","error"),E(!1)),P("/manage-products");case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[N?(0,x.jsx)(w.Z,{}):null,(0,x.jsx)("div",{className:"container-fluid addEditProductContainer my-lg-5",children:(0,x.jsxs)(u.Z,{onSubmit:Se,ref:te,children:[(0,x.jsxs)(j.X2,{children:[(0,x.jsx)(j.sg,{md:12,children:(0,x.jsx)(d.Z,{name:"productName",label:"Product Name",required:!0,isFormInputElement:!0,value:null===K||void 0===K?void 0:K.productName})}),(0,x.jsx)(j.sg,{md:12,children:(0,x.jsx)(d.Z,{name:"productDescription",label:"Product Description",required:!0,expandable:!0,isFormInputElement:!0,value:null===K||void 0===K?void 0:K.productDescription})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(h.Z,{name:"category",label:"Choose Category",required:!0,isFormInputElement:!0,value:null===K||void 0===K?void 0:K["Hierarchy.id"],data:A,onChange:function(e){e.label.includes("BATH & BODY")?J(!1):J(!0)}})}),_?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"topNote",label:"Top Note",required:!0,isFormInputElement:!0,value:null===K||void 0===K||null===(n=K.noteStory)||void 0===n?void 0:n.topNote})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"heartNote",label:"Heart Note",required:!0,isFormInputElement:!0,value:null===K||void 0===K||null===(r=K.noteStory)||void 0===r?void 0:r.heartNote})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"baseNote",label:"Base Note",required:!0,isFormInputElement:!0,value:null===K||void 0===K||null===(i=K.noteStory)||void 0===i?void 0:i.baseNote})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(h.Z,{name:"fragrance",label:"Choose Fragrance",required:!0,isFormInputElement:!0,value:null===K||void 0===K?void 0:K["Fragrance.id"],data:q})})]}):(0,x.jsx)(j.sg,{md:12,children:(0,x.jsx)(d.Z,{name:"ingredients",label:"Product Ingredients",required:!0,expandable:!0,isFormInputElement:!0,value:null===K||void 0===K||null===(c=K.noteStory)||void 0===c?void 0:c.ingredients})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(h.Z,{name:"attribute",label:"Choose Attribute",required:!0,isFormInputElement:!0,value:Object.keys((null===K||void 0===K||null===(m=K.productDetails)||void 0===m||null===(f=m[0])||void 0===f?void 0:f.attributeCombination)||{})[0],data:W})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(h.Z,{name:"gender",label:"Choose Gender",value:null===K||void 0===K?void 0:K.gender,required:!0,isFormInputElement:!0,data:[{label:"Men",value:"Men"},{label:"Women",value:"Women"},{label:"Unisex",value:"Unisex"}]})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(h.Z,{name:"hsnNumber",label:"Choose HSN Category",value:null===K||void 0===K?void 0:K.hsnNumber,required:!0,isFormInputElement:!0,data:[{label:"Perfumes",value:33030090},{label:"Deodorants",value:33072e3},{label:"Bath & Body",value:33071090}]})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"searchTagInput",label:"Search Tag",value:ie,onChange:function(e){return oe(e)}})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(j.ux,{className:"calendar-add-btn",onClick:function(){ie&&!le.find((function(e){return e==ie}))?(le.push(ie),ce((0,s.Z)(le)),oe("")):(0,U.Z)("Error","Invalid Input","error")},disabled:""==ie,children:"+ Add"})}),(0,x.jsxs)(j.sg,{md:12,children:[(0,x.jsx)("p",{className:"shift-list-title",children:"Search Tags List"}),(0,x.jsx)(j.X2,{style:{marginLeft:"0"},children:(0,x.jsx)(j.sg,{lg:12,style:{paddingLeft:"0"},children:null===le||void 0===le?void 0:le.map((function(e,t){return(0,x.jsx)("div",{className:"shiftCard",children:(0,x.jsxs)("p",{className:"shift-list",children:[(0,x.jsx)("span",{className:"shift-details",children:(0,x.jsx)("span",{className:"shift-name",children:e})}),(0,x.jsx)("span",{style:{cursor:"pointer"},className:"shift-remove",onClick:function(){return function(e){var t=le.filter((function(t){return t!==e}));ce((0,s.Z)(t)),oe("")}(e)},children:"X"})]})},t)}))})})]}),(0,x.jsxs)(j.sg,{md:12,children:[(0,x.jsx)(j.Dx,{children:"Add Product Variant"}),he.map((function(e,t){var n,r,i,o;return(0,x.jsxs)("div",{children:[(0,x.jsx)(j.sg,{md:12,children:(0,x.jsxs)("div",{className:"form-title",children:[(0,x.jsxs)("p",{children:["Product Variant ",t+1," Details"]}),t?(0,x.jsxs)("p",{onClick:function(){return xe(t)},children:[(0,x.jsx)(k.SV5,{}),"Delete Product Variant ",t+1]}):null]})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"productPrice".concat(t),label:"Product Price",value:e.productPrice,required:!0,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"productDiscountPrice".concat(t),label:"Product Discount Price",value:e.productDiscountPrice,required:!0,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"attributeValue".concat(t),label:"Attribute Value",value:e.attributeValue,required:!0,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(d.Z,{name:"refNumber".concat(t),label:"Reference Number",value:e.refNumber,required:!0,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(b,{name:"isGiftSetBox".concat(t),label:"Mark as Gift Set Box",required:!0,value:e.isGiftSetBox,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(b,{name:"bestSellerStatus".concat(t),label:"Mark as Best Seller",required:!0,value:e.bestSellerStatus,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(b,{name:"isNew".concat(t),label:"Mark as New",required:!0,value:e.isNew,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:6,children:(0,x.jsx)(b,{name:"isActive".concat(t),label:"Mark as Active",required:!0,value:e.isActive,isFormInputElement:!0})}),(0,x.jsx)(j.sg,{md:12,children:(0,x.jsx)(y.Z,{name:"productImage".concat(t),label:"Product Main Image(single pic)",isFormInputElement:!0,required:!0,productVariantIndex:t,acceptedFormat:"image/png, image/jpeg, image/jpg",onChange:be,value:e.pictureUrl?"https://embarkperfumes.com/api/"+e.pictureUrl:"",deleteFile:ye,progress:e.productMainImageProgress})}),(0,x.jsx)(j.sg,{md:12,children:(0,x.jsx)(I.Z,{name:"productOtherImage".concat(t),label:"Product Other Images(Multiple Pics allowed)",isFormInputElement:!0,required:!0,productVariantIndex:t,acceptedFormat:"image/png, image/jpeg, image/jpg",onChange:je,value:null===e||void 0===e||null===(n=e.otherImages)||void 0===n?void 0:n.map((function(e){return"https://embarkperfumes.com/api/"+(null===e||void 0===e?void 0:e.image)})),deleteFile:ke,progress:null===e||void 0===e||null===(r=e.otherImages)||void 0===r?void 0:r.map((function(e){return null===e||void 0===e?void 0:e.progress}))})}),(0,x.jsx)(j.sg,{md:12,children:(0,x.jsx)(I.Z,{name:"productDescriptionImage".concat(t),label:"Product Description Images(Multiple Pics allowed)",isFormInputElement:!0,required:!!_,productVariantIndex:t,acceptedFormat:"image/png, image/jpeg, image/jpg",onChange:we,value:null===e||void 0===e||null===(i=e.descriptionImage)||void 0===i?void 0:i.map((function(e){return"https://embarkperfumes.com/api/"+(null===e||void 0===e?void 0:e.image)})),deleteFile:Ie,progress:null===e||void 0===e||null===(o=e.descriptionImage)||void 0===o?void 0:o.map((function(e){return null===e||void 0===e?void 0:e.progress}))})})]},t)}))]})]}),(0,x.jsxs)("p",{className:"link-text",onClick:function(){pe([].concat((0,s.Z)(he),[{id:T(),productPrice:"",productDiscountPrice:"",attributeValue:"",pictureUrl:"",productMainImageProgress:0,isGiftSetBox:!1,bestSellerStatus:!1,isNew:!1,isActive:!0,refNumber:"",otherImages:[],descriptionImage:[]}]))},children:[(0,x.jsx)(Z.f8n,{})," Add Another Product Variant"]}),(0,x.jsx)(j.Bo,{children:(0,x.jsxs)("div",{children:[(0,x.jsx)(j.ux,{style:{marginRight:12},children:"Cancel"}),(0,x.jsx)(j.un,{disabled:!1,onClick:function(){var e;return null===(e=te.current)||void 0===e?void 0:e.handleSubmit()},children:"Submit"})]})})]})})]})}},94562:function(e,t,n){var r=n(72791);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}var o=r.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},r.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),a=r.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},r.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function s(e){if(7===e.length)return e;for(var t="#",n=1;n<4;n+=1)t+=e[n]+e[n];return t}function l(e,t,n,r,i){return function(e,t,n,r,i){var o=(e-n)/(t-n);if(0===o)return r;if(1===o)return i;for(var a="#",s=1;s<6;s+=2){var l=parseInt(r.substr(s,2),16),c=parseInt(i.substr(s,2),16),u=Math.round((1-o)*l+o*c).toString(16);1===u.length&&(u="0"+u),a+=u}return a}(e,t,n,s(r),s(i))}var c=function(e){function t(t){e.call(this,t);var n=t.height,r=t.width,i=t.checked;this.t=t.handleDiameter||n-2,this.i=Math.max(r-n,r-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={h:i?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.g=this.g.bind(this),this.k=this.k.bind(this),this.M=this.M.bind(this),this.m=this.m.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.componentDidMount=function(){this.W=!0},t.prototype.componentDidUpdate=function(e){e.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},t.prototype.componentWillUnmount=function(){this.W=!1},t.prototype.I=function(e){this.H.focus(),this.setState({R:e,j:!0,B:Date.now()})},t.prototype.L=function(e){var t=this.state,n=t.R,r=t.h,i=(this.props.checked?this.i:this.o)+e-n;t.N||e===n||this.setState({N:!0});var o=Math.min(this.i,Math.max(this.o,i));o!==r&&this.setState({h:o})},t.prototype.U=function(e){var t=this.state,n=t.h,r=t.N,i=t.B,o=this.props.checked,a=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var s=Date.now()-i;(!r||s<250||o&&n<=a||!o&&n>=a)&&this.A(e),this.W&&this.setState({N:!1,j:!1}),this.l=Date.now()},t.prototype.p=function(e){e.preventDefault(),"number"==typeof e.button&&0!==e.button||(this.I(e.clientX),window.addEventListener("mousemove",this.v),window.addEventListener("mouseup",this.g))},t.prototype.v=function(e){e.preventDefault(),this.L(e.clientX)},t.prototype.g=function(e){this.U(e),window.removeEventListener("mousemove",this.v),window.removeEventListener("mouseup",this.g)},t.prototype.k=function(e){this.X=null,this.I(e.touches[0].clientX)},t.prototype.M=function(e){this.L(e.touches[0].clientX)},t.prototype.m=function(e){e.preventDefault(),this.U(e)},t.prototype.$=function(e){Date.now()-this.l>50&&(this.A(e),Date.now()-this.u>50&&this.W&&this.setState({j:!1}))},t.prototype.C=function(){this.u=Date.now()},t.prototype.D=function(){this.setState({j:!0})},t.prototype.O=function(){this.setState({j:!1})},t.prototype.S=function(e){this.H=e},t.prototype.T=function(e){e.preventDefault(),this.H.focus(),this.A(e),this.W&&this.setState({j:!1})},t.prototype.A=function(e){var t=this.props;(0,t.onChange)(!t.checked,e,t.id)},t.prototype.render=function(){var e=this.props,t=e.checked,n=e.disabled,o=e.className,a=e.offColor,s=e.onColor,c=e.offHandleColor,u=e.onHandleColor,d=e.checkedIcon,h=e.uncheckedIcon,p=e.checkedHandleIcon,m=e.uncheckedHandleIcon,f=e.boxShadow,g=e.activeBoxShadow,v=e.height,x=e.width,b=e.borderRadius,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["checked","disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","checkedHandleIcon","uncheckedHandleIcon","boxShadow","activeBoxShadow","height","width","borderRadius","handleDiameter"]),j=this.state,w=j.h,Z=j.N,k=j.j,I={position:"relative",display:"inline-block",textAlign:"left",opacity:n?.5:1,direction:"ltr",borderRadius:v/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},S={height:v,width:x,margin:Math.max(0,(this.t-v)/2),position:"relative",background:l(w,this.i,this.o,a,s),borderRadius:"number"==typeof b?b:v/2,cursor:n?"default":"pointer",WebkitTransition:Z?null:"background 0.25s",MozTransition:Z?null:"background 0.25s",transition:Z?null:"background 0.25s"},C={height:v,width:Math.min(1.5*v,x-(this.t+v)/2+1),position:"relative",opacity:(w-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:Z?null:"opacity 0.25s",MozTransition:Z?null:"opacity 0.25s",transition:Z?null:"opacity 0.25s"},N={height:v,width:Math.min(1.5*v,x-(this.t+v)/2+1),position:"absolute",opacity:1-(w-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:Z?null:"opacity 0.25s",MozTransition:Z?null:"opacity 0.25s",transition:Z?null:"opacity 0.25s"},E={height:this.t,width:this.t,background:l(w,this.i,this.o,c,u),display:"inline-block",cursor:n?"default":"pointer",borderRadius:"number"==typeof b?b-1:"50%",position:"absolute",transform:"translateX("+w+"px)",top:Math.max(0,(v-this.t)/2),outline:0,boxShadow:k?g:f,border:0,WebkitTransition:Z?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:Z?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:Z?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"},P={height:this.t,width:this.t,opacity:Math.max(2*(1-(w-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:Z?null:"opacity 0.25s",MozTransition:Z?null:"opacity 0.25s",transition:Z?null:"opacity 0.25s"},D={height:this.t,width:this.t,opacity:Math.max(2*((w-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:Z?null:"opacity 0.25s",MozTransition:Z?null:"opacity 0.25s",transition:Z?null:"opacity 0.25s"};return r.createElement("div",{className:o,style:I},r.createElement("div",{className:"react-switch-bg",style:S,onClick:n?null:this.T,onMouseDown:function(e){return e.preventDefault()}},d&&r.createElement("div",{style:C},d),h&&r.createElement("div",{style:N},h)),r.createElement("div",{className:"react-switch-handle",style:E,onClick:function(e){return e.preventDefault()},onMouseDown:n?null:this.p,onTouchStart:n?null:this.k,onTouchMove:n?null:this.M,onTouchEnd:n?null:this.m,onTouchCancel:n?null:this.O},m&&r.createElement("div",{style:P},m),p&&r.createElement("div",{style:D},p)),r.createElement("input",i({},{type:"checkbox",role:"switch","aria-checked":t,checked:t,disabled:n,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},y,{ref:this.S,onFocus:this.D,onBlur:this.O,onKeyUp:this.C,onChange:this.$})))},t}(r.Component);c.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:o,checkedIcon:a,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},t.default=c},60862:function(e,t,n){e.exports=n(94562)}}]);
//# sourceMappingURL=8055.1276c3c0.chunk.js.map