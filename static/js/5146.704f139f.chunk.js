"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[5146],{65238:function(e,r,n){n.d(r,{Z:function(){return f}});var s=n(74165),t=n(15861),a=n(15671),o=n(43144),i=n(60136),c=n(27277),u=n(74569),l=n.n(u),d=(0,o.Z)((function e(r){var n=this;(0,a.Z)(this,e),this._initializeResponseInterceptor=function(){n.instance.interceptors.response.use(n._handleResponse,n._handleError)},this._handleResponse=function(e){return e},this._handleError=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(r){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.response,t=r.config,t,e.abrupt("return",Promise.resolve(n));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),this.instance=l().create({baseURL:r}),this._initializeResponseInterceptor()})),m=d,p=n(69441),f=function(e){(0,i.Z)(n,e);var r=(0,c.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=r.call(this,"https://embarkperfumes.com/api"))._initializeRequestInterceptor=function(){e.instance.interceptors.request.use(e._handleRequest)},e._handleRequest=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(r){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=p.Z.getState().user.currentUser.accessToken)&&(r.headers.Authorization=n),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e._initializeRequestInterceptor(),e}return(0,o.Z)(n,[{key:"callApi",value:function(e,r){return this.instance({method:r.method,url:e,headers:null!==r&&void 0!==r&&r.header?null===r||void 0===r?void 0:r.header:{},data:null!==r&&void 0!==r&&r.body?null===r||void 0===r?void 0:r.body:void 0,onUploadProgress:null!==r&&void 0!==r&&r.onUploadProgress?null===r||void 0===r?void 0:r.onUploadProgress:void 0})}}]),n}(m)},67604:function(e,r,n){var s=n(74165),t=n(15861),a=n(21830),o=n.n(a),i=n(58086),c=n.n(i),u=n(80184),l=c()(o()),d=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(r,n,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.fire({title:(0,u.jsx)("strong",{children:r}),html:(0,u.jsx)("p",{children:n}),icon:t}));case 1:case"end":return e.stop()}}),e)})));return function(r,n,s){return e.apply(this,arguments)}}();r.Z=d},5146:function(e,r,n){n.r(r),n.d(r,{default:function(){return w}});var s=n(74165),t=n(15861),a=n(4942),o=n(1413),i=n(29439),c=n(72791),u=function(e){var r=e.email,n=e.newPassword,s={email:!1,newPassword:!1,message:""};return r||(s.email=!0),r&&!/\S+@\S+\.\S+/.test(r)&&(s.email=!0,s.message="invalid email"),n||(s.newPassword=!0),s},l=n(57689),d=n(65238),m=n(67604),p=n(72881),f=n(80184),h=new d.Z,w=function(){var e=(0,l.UO)().token,r=(0,c.useState)(!1),n=(0,i.Z)(r,2),d=n[0],w=n[1],v=(0,l.s0)(),Z=(0,c.useState)({email:!1,confirmPassword:!1,message:""}),P=(0,i.Z)(Z,2),b=P[0],x=P[1],g=(0,c.useState)({email:"",newPassword:"",confirmPassword:""}),k=(0,i.Z)(g,2),j=k[0],N=k[1],y=function(e,r){N((0,o.Z)((0,o.Z)({},j),{},(0,a.Z)({},r,e))),!0!==b.email&&!0!==b.confirmPassword&&!0!==b.newPassword||x((0,o.Z)((0,o.Z)({},b),{},(0,a.Z)({},r,!1)))},S=function(){var r=(0,t.Z)((0,s.Z)().mark((function r(n){var t,a;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),t=u(j),j.newPassword!==j.confirmPassword&&(t.confirmPassword=!0),x(t),!(t.email||t.confirmPassword||t.newPassword)){r.next=6;break}return r.abrupt("return");case 6:return r.prev=6,a={method:"POST",body:(0,o.Z)((0,o.Z)({},j),{},{token:e})},w(!0),r.next=11,h.callApi("auth/resetPassword",a);case 11:200==r.sent.status?(w(!1),v("/sign-in"),(0,m.Z)("Success","Password has been reset","success")):(w(!1),(0,m.Z)("Failure","Error in changing password","error")),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(6),console.error("Something went wrong");case 18:case"end":return r.stop()}}),r,null,[[6,15]])})));return function(e){return r.apply(this,arguments)}}(),R=function(){var r=(0,t.Z)((0,s.Z)().mark((function r(){var n,t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n={method:"POST",body:{token:e}},r.next=4,h.callApi("auth/verifyForgetToken",n);case 4:200==(t=r.sent).status?N((0,o.Z)((0,o.Z)({},j),{},{email:t.data.data.email})):v("*"),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Something went wrong");case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}();return(0,c.useEffect)((function(){R()}),[]),(0,f.jsxs)(f.Fragment,{children:[d?(0,f.jsx)(p.Z,{}):null,(0,f.jsx)("div",{className:"resetPassword-wrapper bg-dark d-flex align-item-center justify-content-center w-100",children:(0,f.jsxs)("div",{className:"resetPassword",children:[(0,f.jsx)("h2",{className:"mb-3",children:"Reset Passowrd"}),(0,f.jsxs)("form",{children:[(0,f.jsxs)("div",{className:"form-group mb-2",children:[(0,f.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,f.jsx)("input",{disabled:!0,id:"email",className:"form-control ".concat(b.email&&"errorInputField"),required:!0,onChange:function(e){return y(e.target.value,"email")},value:j.email}),b.email&&(0,f.jsx)("div",{className:"error",children:b.message?"Please enter a valid email":"Please enter your email"})]}),(0,f.jsxs)("div",{className:"form-group mb-2",children:[(0,f.jsx)("label",{htmlFor:"new password",className:"form-label",children:"New password"}),(0,f.jsx)("input",{type:"password",id:"new password",className:"form-control ".concat(b.newPassword?"errorInputField":""),required:!0,onChange:function(e){return y(e.target.value,"newPassword")}}),b.newPassword&&(0,f.jsx)("div",{className:"error",children:"Please enter a password"})]}),(0,f.jsxs)("div",{className:"form-group mb-2",children:[(0,f.jsx)("label",{htmlFor:"confirm password",className:"form-label",children:"Confirm new password"}),(0,f.jsx)("input",{type:"password",id:"confirm password",className:"form-control ".concat(b.confirmPassword?"errorInputField":""),required:!0,onChange:function(e){return y(e.target.value,"confirmPassword")}}),b.confirmPassword&&(0,f.jsx)("div",{className:"error",children:"Passwords do not match"})]}),(0,f.jsx)("button",{className:"btn btn-dark w-100 mt-2",onClick:function(e){return S(e)},children:"RESET PASSWORD"})]})]})})]})}}}]);
//# sourceMappingURL=5146.704f139f.chunk.js.map