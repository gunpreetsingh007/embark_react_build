"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[7190],{65238:function(e,s,a){a.d(s,{Z:function(){return n}});var r=a(55294);var t=class{constructor(e){this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use(this._handleResponse,this._handleError)},this._handleResponse=e=>e,this._handleError=async e=>{let{response:s,config:a}=e;return Promise.resolve(s)},this.instance=r.Z.create({baseURL:e}),this._initializeResponseInterceptor()}},o=a(69441);class n extends t{constructor(){super("https://embarkperfumes.com/api"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use(this._handleRequest)},this._handleRequest=async e=>{let s=o.Z.getState().user.currentUser.accessToken;return s&&(e.headers.Authorization=s),sessionStorage.getItem("session-id")&&(e.headers["session-id"]=sessionStorage.getItem("session-id")),e},this._initializeRequestInterceptor()}callApi(e,s){return this.instance({method:s.method,url:e,headers:null!==s&&void 0!==s&&s.header?null===s||void 0===s?void 0:s.header:{},data:null!==s&&void 0!==s&&s.body?null===s||void 0===s?void 0:s.body:void 0,onUploadProgress:null!==s&&void 0!==s&&s.onUploadProgress?null===s||void 0===s?void 0:s.onUploadProgress:void 0})}}},89404:function(e,s,a){const r=new(a(65238).Z);s.Z=e=>{if(sessionStorage.getItem("session-id")&&(s=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(s)))r.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");const s=function(e){const s=new URLSearchParams(window.location.search),a={};for(const[r,t]of s)r.includes(e)&&(a[r]=t);return a}("utm");let a={method:"POST",body:{additionalDetails:s,event:e}};r.callApi("/session/createNewSession",a).then((e=>{sessionStorage.setItem("session-id",e.data.data)}))}var s}},17190:function(e,s,a){a.r(s);var r=a(72791),t=a(26022),o=a(65238),n=a(57689),i=a(89404),l=a(80184);const m=new o.Z;s.default=()=>{const e=(0,n.s0)(),s=(0,n.bx)(),[a,o]=(0,r.useState)({firstName:!1,lastName:!1,email:!1,confirmPassword:!1,message:""}),[c,d]=(0,r.useState)({firstName:"",lastName:"",email:"",currentPassword:"",newPassword:"",confirmPassword:""}),u=(e,s)=>{d({...c,[s]:e}),!0!==a.email&&!0!==a.confirmPassword&&!0!==a.firstName&&!0!==a.lastName||o({...a,[s]:!1})};return(0,r.useEffect)((()=>{d({...c,...s})}),[s]),(0,r.useEffect)((()=>{(0,i.Z)("Edit Account")}),[]),(0,l.jsx)("div",{className:"edit-account-container container-fluid",style:{backgroundColor:"white"},children:(0,l.jsxs)("form",{children:[(0,l.jsxs)("div",{className:"row",style:{marginTop:"25px"},children:[(0,l.jsxs)("div",{className:"col-lg-6 col-sm-12 form-group mb-2",children:[(0,l.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),(0,l.jsx)("input",{type:"text",id:"firstName",className:"form-control ".concat(a.firstName?"errorInputField":""),required:!0,onChange:e=>u(e.target.value,"firstName"),value:c.firstName}),a.firstName&&(0,l.jsx)("div",{className:"error",children:"Please enter your first name"})]}),(0,l.jsxs)("div",{className:"col-lg-6 col-sm-12 form-group mb-2",children:[(0,l.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),(0,l.jsx)("input",{type:"text",id:"lastName",className:"form-control ".concat(a.lastName?"errorInputField":""),required:!0,onChange:e=>u(e.target.value,"lastName"),value:c.lastName}),a.lastName&&(0,l.jsx)("div",{className:"error",children:"Please enter your last name"})]})]}),(0,l.jsxs)("div",{className:"form-group mb-2",children:[(0,l.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,l.jsx)("input",{type:"email",id:"email",className:"form-control ".concat(a.email?"errorInputField":""),required:!0,onChange:e=>u(e.target.value,"email"),value:c.email}),a.email&&(0,l.jsx)("div",{className:"error",children:a.message?"Please enter a valid email":"Please enter your email"})]}),(0,l.jsx)("span",{className:"text-style",style:{margin:"15px 0px",display:"inline-block"},children:"PASSWORD CHANGE"}),(0,l.jsxs)("div",{className:"form-group mb-2",children:[(0,l.jsx)("label",{htmlFor:"current password",className:"form-label",children:"Current password (leave blank to leave unchanged)"}),(0,l.jsx)("input",{type:"password",id:"current password",className:"form-control",required:!0,onChange:e=>u(e.target.value,"currentPassword")})]}),(0,l.jsxs)("div",{className:"form-group mb-2",children:[(0,l.jsx)("label",{htmlFor:"new password",className:"form-label",children:"New password (leave blank to leave unchanged) "}),(0,l.jsx)("input",{type:"password",id:"new password",className:"form-control",required:!0,onChange:e=>u(e.target.value,"newPassword")})]}),(0,l.jsxs)("div",{className:"form-group mb-2",children:[(0,l.jsx)("label",{htmlFor:"confirm password",className:"form-label",children:"Confirm new password"}),(0,l.jsx)("input",{type:"password",id:"confirm password",className:"form-control ".concat(a.confirmPassword?"errorInputField":""),required:!0,onChange:e=>u(e.target.value,"confirmPassword")}),a.confirmPassword&&(0,l.jsx)("div",{className:"error",children:"Passwords do not match"})]}),(0,l.jsx)("button",{className:"btn btn-dark mt-5 mb-2",onClick:s=>(async s=>{try{s.preventDefault();const a=(0,t.H)(c);if(c.newPassword!==c.confirmPassword&&(a.confirmPassword=!0),o(a),a.firstName||a.lastName||a.email||a.confirmPassword)return;const r={method:"POST",body:c};200==(await m.callApi("user/updateUser",r)).status&&e("/")}catch(a){console.error("Something went wrong")}})(s),children:"SAVE CHANGES"})]})})}},26022:function(e,s,a){a.d(s,{C:function(){return t},H:function(){return r}});const r=e=>{const{firstName:s,lastName:a,email:r}=e;var t={firstName:!1,lastName:!1,email:!1,message:""};return s||(t.firstName=!0),a||(t.lastName=!0),r||(t.email=!0),r&&!/\S+@\S+\.\S+/.test(r)&&(t.email=!0,t.message="invalid email"),t},t=e=>{const{firstName:s,lastName:a,email:r,state:t,streetAddress:o,city:n,postcode:i,phone:l}=e;var m={firstName:!1,lastName:!1,email:!1,state:!1,streetAddress:!1,city:!1,postcode:!1,phone:!1,message:""};return s||(m.firstName=!0),a||(m.lastName=!0),r||(m.email=!0),r&&!/\S+@\S+\.\S+/.test(r)&&(m.email=!0,m.message="invalid email"),t||(m.state=!0),o||(m.streetAddress=!0),n||(m.city=!0),i||(m.postcode=!0),l||(m.phone=!0),l&&10!=l.length&&(m.phone=!0),m}}}]);
//# sourceMappingURL=7190.b6583fcf.chunk.js.map