"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[9779],{65238:function(e,a,s){s.d(a,{Z:function(){return o}});var t=s(55294);var r=class{constructor(e){this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use(this._handleResponse,this._handleError)},this._handleResponse=e=>e,this._handleError=async e=>{let{response:a,config:s}=e;return Promise.resolve(a)},this.instance=t.Z.create({baseURL:e}),this._initializeResponseInterceptor()}},l=s(69441);class o extends r{constructor(){super("https://embarkperfumes.com/api"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use(this._handleRequest)},this._handleRequest=async e=>{let a=l.Z.getState().user.currentUser.accessToken;return a&&(e.headers.Authorization=a),sessionStorage.getItem("session-id")&&(e.headers["session-id"]=sessionStorage.getItem("session-id")),e},this._initializeRequestInterceptor()}callApi(e,a){return this.instance({method:a.method,url:e,headers:null!==a&&void 0!==a&&a.header?null===a||void 0===a?void 0:a.header:{},data:null!==a&&void 0!==a&&a.body?null===a||void 0===a?void 0:a.body:void 0,onUploadProgress:null!==a&&void 0!==a&&a.onUploadProgress?null===a||void 0===a?void 0:a.onUploadProgress:void 0})}}},89404:function(e,a,s){const t=new(s(65238).Z);a.Z=e=>{if(sessionStorage.getItem("session-id")&&(a=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(a)))t.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");const a=function(e){const a=new URLSearchParams(window.location.search),s={};for(const[t,r]of a)t.includes(e)&&(s[t]=r);return s}("utm");let s={method:"POST",body:{additionalDetails:a,event:e}};t.callApi("/session/createNewSession",s).then((e=>{sessionStorage.setItem("session-id",e.data.data)}))}var a}},8055:function(e,a,s){s.r(a);var t=s(72791),r=s(26022),l=s(65238),o=s(57689),n=s(11087),i=s(24459),d=s(24054),c=s(54558),m=s(69441),u=s(89404),h=s(80184);const p=new l.Z;a.default=()=>{const{addressType:e}=(0,o.UO)(),[a,s]=(0,n.lr)();let l=m.Z.getState().user.currentUser;const N=a.get("id"),v=a.get("firstAddress");let g="",f="",b="",y="";v&&"true"==v&&(g=l.firstName,f=l.lastName,b=l.email,y=l.contact);const x=(0,o.s0)();["billing-address","shipping-address"].includes(e)||x("/404");const[j,S]=(0,t.useState)({firstName:!1,lastName:!1,email:!1,state:!1,streetAddress:!1,city:!1,postcode:!1,phone:!1,message:""}),[A,F]=(0,t.useState)({firstName:g,lastName:f,email:b,companyName:"",gstNumber:"",country:"India",state:"",streetAddress:"",landmark:"",city:"",postcode:"",phone:y}),[I,C]=(0,t.useState)("IN"),[P,k]=(0,t.useState)(""),[w,Z]=(0,t.useState)({label:null}),_=(sessionStorage.getItem("add"),(e,a)=>{F({...A,[a]:e}),(!0===j.email||!0===j.city||!0===j.firstName||!0===j.lastName||!0===j.country||j.phone||j.postcode||j.state||j.streetAddress)&&S({...j,[a]:!1})});return(0,t.useEffect)((()=>{N&&(async()=>{const e=await p.callApi("user/getAddressById/".concat(N),{method:"GET"});200==e.status&&(F({...A,id:e.data.data.id,firstName:e.data.data.firstName,lastName:e.data.data.lastName,email:e.data.data.email,companyName:e.data.data.companyName,gstNumber:e.data.data.gstNumber,country:e.data.data.country,state:e.data.data.state,streetAddress:e.data.data.streetAddress,landmark:e.data.data.landmark,city:e.data.data.city,postcode:e.data.data.pincode+"",phone:e.data.data.contact}),Z({label:e.data.data.city}),k(e.data.data.stateId))})()}),[]),(0,t.useEffect)((()=>{(0,u.Z)("Add/Edit Address")}),[]),(0,h.jsxs)("div",{className:"edit-account-container container",style:{backgroundColor:"white"},children:[(0,h.jsx)("div",{className:"text-style mt-4",children:"billing-address"===e?"Billing address":"Shipping address"}),(0,h.jsxs)("form",{children:[(0,h.jsxs)("div",{className:"row",style:{marginTop:"25px"},children:[(0,h.jsxs)("div",{className:"col-sm-12 col-lg-6 form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),(0,h.jsx)("input",{type:"text",id:"firstName",className:"form-control ".concat(j.firstName?"errorInputField":""),required:!0,onChange:e=>_(e.target.value,"firstName"),value:null===A||void 0===A?void 0:A.firstName}),j.firstName&&(0,h.jsx)("div",{className:"error",children:"Please enter your first name"})]}),(0,h.jsxs)("div",{className:"col form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),(0,h.jsx)("input",{type:"text",id:"lastName",className:"form-control ".concat(j.lastName?"errorInputField":""),required:!0,onChange:e=>_(e.target.value,"lastName"),value:null===A||void 0===A?void 0:A.lastName}),j.lastName&&(0,h.jsx)("div",{className:"error",children:"Please enter your last name"})]})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"companyName",className:"form-label",children:"Company name (Optional)"}),(0,h.jsx)("input",{type:"text",id:"companyName",className:"form-control",onChange:e=>_(e.target.value,"companyName"),value:null===A||void 0===A?void 0:A.companyName})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"gstNumber",className:"form-label",children:"GST No. (Optional)"}),(0,h.jsx)("input",{type:"text",id:"gstNumber",className:"form-control",onChange:e=>_(e.target.value,"gstNumber"),value:null===A||void 0===A?void 0:A.gstNumber})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-sm-12 col-lg-6 form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"streetAddress",className:"form-label",children:"Address"}),(0,h.jsx)("input",{type:"text",id:"streetAddress",className:"form-control ".concat(j.streetAddress?"errorInputField":""),required:!0,onChange:e=>_(e.target.value,"streetAddress"),value:null===A||void 0===A?void 0:A.streetAddress}),j.streetAddress&&(0,h.jsx)("div",{className:"error",children:"Please enter your address"})]}),(0,h.jsxs)("div",{className:"col form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"landmark",className:"form-label",children:"Landmark (Optional)"}),(0,h.jsx)("input",{type:"text",id:"landmark",className:"form-control",onChange:e=>_(e.target.value,"landmark"),value:null===A||void 0===A?void 0:A.landmark})]})]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-sm-12 col-lg-6 form-group mb-2",children:[(0,h.jsx)("label",{className:"form-label",children:"Country"}),(0,h.jsx)(c.ZP,{className:"".concat(j.country?"errorSelectField":""),options:[{label:"India",value:"India",id:"IN"}],onChange:e=>{_(e.value,"country")},value:{label:"India"}})]}),(0,h.jsxs)("div",{className:"col form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"state",className:"form-label",children:"State"}),(0,h.jsx)(c.ZP,{className:"".concat(j.state?"errorSelectField":""),options:(R=I,i.ZP.getStatesOfCountry(R).map((e=>({label:e.name,value:e.name,id:e.isoCode})))),onChange:e=>{k(e.id),Z({label:null}),_(e.value,"state")},value:A.state&&{label:A.state}}),j.state&&(0,h.jsx)("div",{className:"error",children:"Please enter your state"})]})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"city",className:"form-label",children:"City"}),(0,h.jsx)(c.ZP,{className:"".concat(j.city?"errorSelectField":""),options:(q=I,E=P||null,d.Z.getCitiesOfState(q,E).map((e=>({label:e.name,value:e.name})))),onChange:e=>{Z({label:e.value}),_(e.value,"city")},value:w.label&&w}),j.city&&(0,h.jsx)("div",{className:"error",children:"Please enter your city"})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"postcode",className:"form-label",children:"Pincode"}),(0,h.jsx)("input",{type:"number",id:"postcode",className:"form-control ".concat(j.postcode?"errorInputField":""),required:!0,onChange:e=>_(e.target.value,"postcode"),value:null===A||void 0===A?void 0:A.postcode}),j.postcode&&(0,h.jsx)("div",{className:"error",children:"Please enter your pincode"})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"phone",className:"form-label",children:"Phone"}),(0,h.jsx)("input",{type:"number",id:"phone",className:"form-control ".concat(j.phone?"errorInputField":""),required:!0,onChange:e=>_(e.target.value,"phone"),value:null===A||void 0===A?void 0:A.phone}),j.phone&&(0,h.jsx)("div",{className:"error",children:"Please enter valid phone number"})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,h.jsx)("input",{type:"email",id:"email",className:"form-control ".concat(j.email?"errorInputField":""),required:!0,onChange:e=>_(e.target.value,"email"),value:null===A||void 0===A?void 0:A.email}),j.email&&(0,h.jsx)("div",{className:"error",children:j.message?"Please enter a valid email":"Please enter your email"})]}),(0,h.jsx)("button",{className:"btn btn-dark mt-5 mb-2",onClick:a=>(async a=>{try{a.preventDefault();const s=(0,r.C)(A);if(null==w.label?S({...s,city:!0}):S(s),s.city||s.firstName||s.lastName||s.email||s.country||s.phone||s.postcode||s.state||s.streetAddress||null==w.label)return;const t={method:"POST",body:{...A,selectedStateId:P,addressType:"billing-address"==e?"billing":"shipping"}};200==(await p.callApi("user/createEditAddresses",t)).status&&x("/checkout")}catch(j){console.error("Something went wrong")}})(a),children:"SAVE ADDRESS"})]})]});var q,E,R}},26022:function(e,a,s){s.d(a,{C:function(){return r},H:function(){return t}});const t=e=>{const{firstName:a,lastName:s,email:t}=e;var r={firstName:!1,lastName:!1,email:!1,message:""};return a||(r.firstName=!0),s||(r.lastName=!0),t||(r.email=!0),t&&!/\S+@\S+\.\S+/.test(t)&&(r.email=!0,r.message="invalid email"),r},r=e=>{const{firstName:a,lastName:s,email:t,state:r,streetAddress:l,city:o,postcode:n,phone:i}=e;var d={firstName:!1,lastName:!1,email:!1,state:!1,streetAddress:!1,city:!1,postcode:!1,phone:!1,message:""};return a||(d.firstName=!0),s||(d.lastName=!0),t||(d.email=!0),t&&!/\S+@\S+\.\S+/.test(t)&&(d.email=!0,d.message="invalid email"),r||(d.state=!0),l||(d.streetAddress=!0),o||(d.city=!0),n||(d.postcode=!0),i||(d.phone=!0),i&&10!=i.length&&(d.phone=!0),d}}}]);
//# sourceMappingURL=9779.cc0139ad.chunk.js.map