"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[5146],{65238:function(e,s,r){r.d(s,{Z:function(){return t}});var a=r(55294);var n=class{constructor(e){this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use(this._handleResponse,this._handleError)},this._handleResponse=e=>e,this._handleError=async e=>{let{response:s,config:r}=e;return Promise.resolve(s)},this.instance=a.Z.create({baseURL:e}),this._initializeResponseInterceptor()}},o=r(69441);class t extends n{constructor(){super("https://embarkperfumes.com/api"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use(this._handleRequest)},this._handleRequest=async e=>{let s=o.Z.getState().user.currentUser.accessToken;return s&&(e.headers.Authorization=s),sessionStorage.getItem("session-id")&&(e.headers["session-id"]=sessionStorage.getItem("session-id")),e},this._initializeRequestInterceptor()}callApi(e,s){return this.instance({method:s.method,url:e,headers:null!==s&&void 0!==s&&s.header?null===s||void 0===s?void 0:s.header:{},data:null!==s&&void 0!==s&&s.body?null===s||void 0===s?void 0:s.body:void 0,onUploadProgress:null!==s&&void 0!==s&&s.onUploadProgress?null===s||void 0===s?void 0:s.onUploadProgress:void 0})}}},89404:function(e,s,r){const a=new(r(65238).Z);s.Z=e=>{if(sessionStorage.getItem("session-id")&&(s=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(s)))a.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");const s=function(e){const s=new URLSearchParams(window.location.search),r={};for(const[a,n]of s)a.includes(e)&&(r[a]=n);return r}("utm");let r={method:"POST",body:{additionalDetails:s,event:e}};a.callApi("/session/createNewSession",r).then((e=>{sessionStorage.setItem("session-id",e.data.data)}))}var s}},67604:function(e,s,r){var a=r(21830),n=r.n(a),o=r(58086),t=r.n(o),i=r(80184);const l=t()(n());s.Z=async(e,s,r)=>l.fire({title:(0,i.jsx)("strong",{children:e}),html:(0,i.jsx)("p",{children:s}),icon:r})},5146:function(e,s,r){r.r(s),r.d(s,{default:function(){return m}});var a=r(72791);var n=r(57689),o=r(65238),t=r(67604),i=r(72881),l=r(89404),d=r(80184);const c=new o.Z;var m=()=>{const{token:e}=(0,n.UO)(),[s,r]=(0,a.useState)(!1),o=(0,n.s0)(),[m,u]=(0,a.useState)({email:!1,confirmPassword:!1,message:""}),[h,w]=(0,a.useState)({email:"",newPassword:"",confirmPassword:""}),f=(e,s)=>{w({...h,[s]:e}),!0!==m.email&&!0!==m.confirmPassword&&!0!==m.newPassword||u({...m,[s]:!1})};return(0,a.useEffect)((()=>{(async()=>{try{const s={method:"POST",body:{token:e}},r=await c.callApi("auth/verifyForgetToken",s);200==r.status?w({...h,email:r.data.data.email}):o("*")}catch(m){console.error("Something went wrong")}})()}),[]),(0,a.useEffect)((()=>{(0,l.Z)("Reset Password")}),[]),(0,d.jsxs)(d.Fragment,{children:[s?(0,d.jsx)(i.Z,{}):null,(0,d.jsx)("div",{className:"resetPassword-wrapper bg-dark d-flex align-item-center justify-content-center w-100",children:(0,d.jsxs)("div",{className:"resetPassword",children:[(0,d.jsx)("h2",{className:"mb-3",children:"Reset Passowrd"}),(0,d.jsxs)("form",{children:[(0,d.jsxs)("div",{className:"form-group mb-2",children:[(0,d.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,d.jsx)("input",{disabled:!0,id:"email",className:"form-control ".concat(m.email&&"errorInputField"),required:!0,onChange:e=>f(e.target.value,"email"),value:h.email}),m.email&&(0,d.jsx)("div",{className:"error",children:m.message?"Please enter a valid email":"Please enter your email"})]}),(0,d.jsxs)("div",{className:"form-group mb-2",children:[(0,d.jsx)("label",{htmlFor:"new password",className:"form-label",children:"New password"}),(0,d.jsx)("input",{type:"password",id:"new password",className:"form-control ".concat(m.newPassword?"errorInputField":""),required:!0,onChange:e=>f(e.target.value,"newPassword")}),m.newPassword&&(0,d.jsx)("div",{className:"error",children:"Please enter a password"})]}),(0,d.jsxs)("div",{className:"form-group mb-2",children:[(0,d.jsx)("label",{htmlFor:"confirm password",className:"form-label",children:"Confirm new password"}),(0,d.jsx)("input",{type:"password",id:"confirm password",className:"form-control ".concat(m.confirmPassword?"errorInputField":""),required:!0,onChange:e=>f(e.target.value,"confirmPassword")}),m.confirmPassword&&(0,d.jsx)("div",{className:"error",children:"Passwords do not match"})]}),(0,d.jsx)("button",{className:"btn btn-dark w-100 mt-2",onClick:s=>(async s=>{s.preventDefault();const a=(e=>{const{email:s,newPassword:r}=e;var a={email:!1,newPassword:!1,message:""};return s||(a.email=!0),s&&!/\S+@\S+\.\S+/.test(s)&&(a.email=!0,a.message="invalid email"),r||(a.newPassword=!0),a})(h);if(h.newPassword!==h.confirmPassword&&(a.confirmPassword=!0),u(a),!(a.email||a.confirmPassword||a.newPassword))try{const s={method:"POST",body:{...h,token:e}};r(!0),200==(await c.callApi("auth/resetPassword",s)).status?(r(!1),o("/sign-in"),(0,t.Z)("Success","Password has been reset","success")):(r(!1),(0,t.Z)("Failure","Error in changing password","error"))}catch(m){console.error("Something went wrong")}})(s),children:"RESET PASSWORD"})]})]})})]})}}}]);
//# sourceMappingURL=5146.67544821.chunk.js.map