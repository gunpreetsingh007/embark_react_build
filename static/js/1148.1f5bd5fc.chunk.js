"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[1148],{65238:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(55294);var i=class{constructor(e){this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use(this._handleResponse,this._handleError)},this._handleResponse=e=>e,this._handleError=async e=>{let{response:t,config:s}=e;return Promise.resolve(t)},this.instance=n.Z.create({baseURL:e}),this._initializeResponseInterceptor()}},a=s(69441);class r extends i{constructor(){super("https://embarkperfumes.com/api"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use(this._handleRequest)},this._handleRequest=async e=>{let t=a.Z.getState().user.currentUser.accessToken;return t&&(e.headers.Authorization=t),sessionStorage.getItem("session-id")&&(e.headers["session-id"]=sessionStorage.getItem("session-id")),e},this._initializeRequestInterceptor()}callApi(e,t){return this.instance({method:t.method,url:e,headers:null!==t&&void 0!==t&&t.header?null===t||void 0===t?void 0:t.header:{},data:null!==t&&void 0!==t&&t.body?null===t||void 0===t?void 0:t.body:void 0,onUploadProgress:null!==t&&void 0!==t&&t.onUploadProgress?null===t||void 0===t?void 0:t.onUploadProgress:void 0})}}},71148:function(e,t,s){s.r(t);var n=s(72791),i=s(57689),a=s(59434),r=s(65238),o=s(46799),d=s(21830),l=s.n(d),u=s(58086),c=s.n(u),h=s(72881),p=s(80184);const m=new r.Z,f=c()(l());t.default=e=>{const t=(0,a.I0)(),s=(0,i.s0)(),{accessCode:r,Component:d}=e,[l,u]=(0,n.useState)(null),c=(0,n.useCallback)((async()=>{let e=await m.callApi("/user/me",{method:"GET"});200===(null===e||void 0===e?void 0:e.status)?(t((0,o.Nq)({role:e.data.data.role,userId:e.data.data.id,firstName:e.data.data.firstName,lastName:e.data.data.lastName,email:e.data.data.email,contact:e.data.data.phoneNumber})),u(e.data.data.role)):u("sign-in-required")}),[]);if((0,n.useLayoutEffect)((()=>{c()}),[]),!l)return(0,p.jsx)(h.Z,{});if("sign-in-required"==l)f.fire({text:"You need to sign in to continue",buttons:{OK:{text:"OK",value:"OK"}}}).then((e=>{if(null!==e&&void 0!==e&&e.isConfirmed)return s("/sign-in")}));else{if(r.includes(l))return d;f.fire({text:"You are not authorized",buttons:{OK:{text:"OK",value:"OK"}}}).then((e=>{if(null!==e&&void 0!==e&&e.isConfirmed)return s(-1)}))}}}}]);
//# sourceMappingURL=1148.1f5bd5fc.chunk.js.map