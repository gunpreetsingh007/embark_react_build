"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[8357],{65238:function(e,s,t){t.d(s,{Z:function(){return r}});var a=t(55294);var l=class{constructor(e){this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use(this._handleResponse,this._handleError)},this._handleResponse=e=>e,this._handleError=async e=>{let{response:s,config:t}=e;return Promise.resolve(s)},this.instance=a.Z.create({baseURL:e}),this._initializeResponseInterceptor()}},n=t(69441);class r extends l{constructor(){super("https://embarkperfumes.com/api"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use(this._handleRequest)},this._handleRequest=async e=>{let s=n.Z.getState().user.currentUser.accessToken;return s&&(e.headers.Authorization=s),sessionStorage.getItem("session-id")&&(e.headers["session-id"]=sessionStorage.getItem("session-id")),e},this._initializeRequestInterceptor()}callApi(e,s){return this.instance({method:s.method,url:e,headers:null!==s&&void 0!==s&&s.header?null===s||void 0===s?void 0:s.header:{},data:null!==s&&void 0!==s&&s.body?null===s||void 0===s?void 0:s.body:void 0,onUploadProgress:null!==s&&void 0!==s&&s.onUploadProgress?null===s||void 0===s?void 0:s.onUploadProgress:void 0})}}},67604:function(e,s,t){var a=t(21830),l=t.n(a),n=t(58086),r=t.n(n),i=t(80184);const d=r()(l());s.Z=async(e,s,t)=>d.fire({title:(0,i.jsx)("strong",{children:e}),html:(0,i.jsx)("p",{children:s}),icon:t})},38357:function(e,s,t){t.r(s),t.d(s,{default:function(){return A}});var a=t(72791),l=t(6713),n=t(12528),r=t(88831),i=(t(60669),t(64197),t(80184));const{Column:d,ColumnGroup:c,HeaderCell:o,Cell:h}=l.Z;var u,x=t(72426),v=t.n(x),j=t(28029),p=t(85792),m=t(68096),g=t(66232),N=t(75064),S=t(30168);const w=t(17691).ZP.input(u||(u=(0,S.Z)(['\nwidth: 236px;\nheight: 40px;\nborder: 1px solid #A6B0B9;\nborder-radius: 4px;\ncolor: #A6B0B9;\n  padding: 0.56rem 0.25rem 0.56rem 1.875rem;  \nbackground: transparent url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%220.875rem%22%20width%3D%220.75rem%22%20viewBox%3D%220%200%20448%20512%22%3E%3Cpath%20fill%3D%22%23A6B0B9%22%20d%3D%22M0%20464c0%2026.5%2021.5%2048%2048%2048h352c26.5%200%2048-21.5%2048-48V192H0v272zm320-196c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zM192%20268c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zM64%20268c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012H76c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012H76c-6.6%200-12-5.4-12-12v-40zM400%2064h-48V16c0-8.8-7.2-16-16-16h-32c-8.8%200-16%207.2-16%2016v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8%200-16%207.2-16%2016v48H48C21.5%2064%200%2085.5%200%20112v48h448v-48c0-26.5-21.5-48-48-48z%22%2F%3E%3C%2Fsvg%3E") no-repeat 10px center;\n::placeholder {\n    font: normal normal normal 16px/19px "Proxima Nova Rg", sans-serif;\n    letter-spacing: 0px;\n    color: #00000099;\n  }\n'])));t(84778);var b=e=>{const{onChangeDateRange:s}=e,t=[(new Date).setHours(0,0,0,0),(new Date).setHours(0,0,0,0)],[l,n]=[(new Date).setHours(0,0,0,0),(new Date).setHours(0,0,0,0)],r=(0,a.useRef)();(0,a.useEffect)((()=>{r.current.setStartDate(null!==l&&void 0!==l?l:t[0]),r.current.setEndDate(null!==n&&void 0!==n?n:t[1])}),[l,n]);return(0,i.jsx)("form",{className:"dateRange",children:(0,i.jsx)(N.Z,{ref:r,initialSettings:{locale:{format:"MMM DD YYYY"},showDropdowns:!0,opens:"left"},onApply:e=>{let t=e.target.value.split(" - ");t=t.map((e=>new Date(e))),s&&s(t)},children:(0,i.jsx)(w,{readOnly:!0})})})},C=t(65238),E=t(72881),D=t(57689),y=t(67604),O=t(98472);const f=new C.Z;var A=()=>{const e=(0,D.s0)(),{Column:s,HeaderCell:t,Cell:d}=l.Z,[c,o]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[x,N]=(0,a.useState)(""),[S,w]=(0,a.useState)("ALL"),[C,A]=(0,a.useState)([]),[T,R]=(0,a.useState)(!1),[L,M]=(0,a.useState)(),[P,k]=(0,a.useState)(),[z,Z]=(0,a.useState)(10),[U,I]=(0,a.useState)(1),[H,Y]=(0,a.useState)([]),[K,F]=(0,a.useState)([]),[_,B]=(0,a.useState)({totalOrders:0,value:0}),[V,G]=(0,a.useState)({totalOrders:0,value:0}),[q,W]=(0,a.useState)({totalOrders:0,value:0}),[J,Q]=(0,a.useState)({totalOrders:0,value:0}),[X,$]=(0,a.useState)({totalOrders:0,value:0});let[ee,se]=(0,a.useState)(0),[te,ae]=(0,a.useState)(0),[le,ne]=(0,a.useState)(0);const[re,ie]=(0,a.useState)(!1),[de,ce]=(0,a.useState)([new Date,new Date]);let oe=!1,he=!1;const ue={PaperProps:{style:{maxHeight:224,width:250}}};c.length===h.length?oe=!0:0===c.length?oe=!1:c.length>0&&c.length<h.length&&(he=!0);const xe=e=>{let{rowData:s,onChange:t,checkedKeys:a,dataKey:l,...r}=e;return(0,i.jsx)(d,{...r,style:{padding:0},children:(0,i.jsx)("div",{style:{lineHeight:"46px"},children:(0,i.jsx)(n.Z,{value:s[l],inline:!0,onChange:t,checked:a.some((e=>e===s[l]))})})})},ve=e=>{let{rowData:s,dataKey:t,...a}=e;return(0,i.jsx)(d,{...a,style:{padding:0},children:(0,i.jsx)("div",{style:{background:"".concat("COMPLETED"==s.status?"#00ff00":"PROCESSING"==s.status?"#FFA500":"CANCELLED"==s.status?"#e0e0e0":"transparent"),borderRadius:6,padding:"5px 10px",marginTop:"8px",overflow:"hidden",display:"inline-block"},children:(0,i.jsx)("div",{children:s.status})})})},je=(0,a.useCallback)((async()=>{ie(!0);const e=await f.callApi("order/getOrders?start=".concat(v()(de[0]).startOf("day").valueOf(),"&end=").concat(v()(de[1]).endOf("day").valueOf(),"&type=").concat("ALL"!=S?S:""),{method:"GET"});if(200==e.status){var s,t,a,l,n,r,i,d,c;ie(!1);let o=[],h=[],x=[];null===e||void 0===e||null===(s=e.data)||void 0===s||s.data.forEach((e=>{1==e.purchaseCount?h.push(e.userId):x.push(e.userId),o.push({id:e.id,orderNo:"".concat(e.orderToken),shiprocketOrderNo:"".concat(e.id),name:"".concat(e.addressDetails.shippingAddress.firstName," ").concat(e.addressDetails.shippingAddress.lastName),date:v()(e.placedAt).format("YYYY-MM-DD h:m a"),status:e.orderStatus,city:e.addressDetails.shippingAddress.city,purchaseNo:e.purchaseCount,total:parseInt(e.orderTotalAmount),additionalDetails:e.additionalDetails})})),ee=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.customerCount,u(o),A(o),F(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data),B(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.todayStats),G(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.currentMonthStats),W(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.lastMonthStats),Q(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.thisYearStats),$(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.customStats),se(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.customerCount),te=new Set(h).size,le=new Set(x).size,ae(te),ne(le)}else ie(!1)}),[de,S]);(0,a.useEffect)((()=>{je()}),[de,S]);const pe=(0,a.useCallback)((e=>{const s=C.filter((s=>{var t;return null===s||void 0===s||null===(t=s.name)||void 0===t?void 0:t.toLocaleLowerCase().includes(e.trim().toLocaleLowerCase())}));u(s)}),[C]),me=()=>L&&P?h.sort(((e,s)=>{let t=e[L],a=s[L];return"string"===typeof t&&(t=t.charCodeAt()),"string"===typeof a&&(a=a.charCodeAt()),"asc"===P?t-a:a-t})):h,ge=me().filter(((e,s)=>{const t=z*(U-1);return s>=t&&s<t+z}));return(0,i.jsxs)(i.Fragment,{children:[re?(0,i.jsx)(E.Z,{}):null,(0,i.jsxs)("div",{className:"container ordersContainer",children:[(0,i.jsx)("div",{className:"header my-4 title fs-3",children:"Orders"}),(0,i.jsxs)("div",{className:"row mb-5 gy-5",children:[(0,i.jsx)("div",{className:"col-3 valueTable",children:(0,i.jsxs)("table",{className:"w-100",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:2,children:"TODAY'S"})}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,i.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:(null===_||void 0===_?void 0:_.totalOrders)||0}),(0,i.jsx)("td",{className:"w-50",children:(null===_||void 0===_?void 0:_.value)||0})]})]})}),(0,i.jsx)("div",{className:"col-3 valueTable",children:(0,i.jsxs)("table",{className:"w-100",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:2,children:"CURRENT MONTH"})}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,i.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:(null===V||void 0===V?void 0:V.totalOrders)||0}),(0,i.jsx)("td",{className:"w-50",children:(null===V||void 0===V?void 0:V.value)||0})]})]})}),(0,i.jsx)("div",{className:"col-3 valueTable",children:(0,i.jsxs)("table",{className:"w-100",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:2,children:"LAST MONTH"})}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,i.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:(null===q||void 0===q?void 0:q.totalOrders)||0}),(0,i.jsx)("td",{className:"w-50",children:(null===q||void 0===q?void 0:q.value)||0})]})]})}),(0,i.jsx)("div",{className:"col-3 valueTable",children:(0,i.jsxs)("table",{className:"w-100",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:2,children:"THIS YEAR"})}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,i.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:(null===J||void 0===J?void 0:J.totalOrders)||0}),(0,i.jsx)("td",{className:"w-50",children:(null===J||void 0===J?void 0:J.value)||0})]})]})}),(0,i.jsx)("div",{className:"col-3 valueTable",children:(0,i.jsxs)("table",{className:"w-100",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:2,children:"CUSTOM"})}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,i.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:(null===X||void 0===X?void 0:X.totalOrders)||0}),(0,i.jsx)("td",{className:"w-50",children:(null===X||void 0===X?void 0:X.value)||0})]})]})}),(0,i.jsx)("div",{className:"col-3 valueTable",children:(0,i.jsxs)("table",{className:"w-100",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:2,children:"CUSTOMER"})}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:"NEW"}),(0,i.jsx)("td",{className:"w-50",children:"EXISTING"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"w-50",children:te}),(0,i.jsx)("td",{className:"w-50",children:le})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{className:"w-50",children:[Math.round(te/ee*100)||0,"%"]}),(0,i.jsxs)("td",{className:"w-50",children:[Math.round(le/ee*100)||0,"%"]})]})]})}),(0,i.jsx)("div",{className:"col-3 valueTable",children:(0,i.jsxs)("table",{className:"w-100",children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{colSpan:2,children:"CUSTOMER COUNT"})}),(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:2,style:{width:"100%",textAlign:"center"},children:ee})})]})})]}),(0,i.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,i.jsx)(m.Z,{sx:{m:1,width:300,mt:3},children:(0,i.jsx)(g.Z,{displayEmpty:!0,value:x,onChange:async e=>{if(0==c.length)return;const{target:{value:s}}=e;ie(!0),N(s);let t={method:"POST",body:{status:s,ids:c}};if(200==(await f.callApi("/order/bulkUpdateOrderStatus",t)).status){ie(!1);let e=JSON.parse(JSON.stringify(C));e.map((e=>{c.includes(e.id)&&(e.status=s)})),u(e),A(e),(0,y.Z)("Success","Status Updated Successfully","success")}else ie(!1),(0,y.Z)("Error","Error while updating the status of order","error")},input:(0,i.jsx)(j.Z,{}),renderValue:e=>e||(0,i.jsx)("em",{children:"Bulk actions"}),MenuProps:ue,inputProps:{"aria-label":"Without label"},children:[{id:2,value:"PROCESSING",label:"Change status to processing"},{id:3,value:"ON HOLD",label:"Change status to on-hold"},{id:4,value:"COMPLETED",label:"Change status to completed"},{id:5,value:"CANCELLED",label:"Change status to cancelled"}].map((e=>(0,i.jsx)(p.Z,{value:e.value,children:e.label},e.id)))})}),(0,i.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"0 0.75rem"},children:[(0,i.jsx)(b,{onChangeDateRange:e=>{ce(e)}}),(0,i.jsx)(m.Z,{sx:{width:300,mt:3},children:(0,i.jsx)(g.Z,{displayEmpty:!0,value:S,onChange:e=>{const{target:{value:s}}=e;w(s)},input:(0,i.jsx)(j.Z,{}),renderValue:e=>e||(0,i.jsx)("em",{children:"Filters"}),MenuProps:ue,inputProps:{"aria-label":"Without label"},children:[{id:"all",value:"ALL"},{id:"processing",value:"PROCESSING"},{id:"onhold",value:"ON HOLD"},{id:"completed",value:"COMPLETED"},{id:"cancelled",value:"CANCELLED"},{id:"refunded",value:"REFUNDED"},{id:"failed",value:"FAILED"}].map((e=>(0,i.jsx)(p.Z,{value:e.value,children:e.value},e.id)))})}),(0,i.jsx)("form",{className:"nosubmit",onSubmit:e=>{e.preventDefault()},children:(0,i.jsx)("input",{className:"nosubmit",type:"search",placeholder:"Search",onChange:e=>pe(e.target.value)})}),(0,i.jsx)(O.CSVLink,{data:H,filename:"orders.csv",headers:["PARTNER","DATE","EAN CODE","PRODUCT NAME","QTY","MRP SALES","NET(DISCOUNTED SALES)","LOCATION"],onClick:()=>{let e=[];K.forEach((s=>{["CANCELLED","REFUNDED","FAILED"].includes(s.orderStatus)||s.orderDetails.forEach((t=>{e.push({PARTNER:"WEBSITE",DATE:v()(s.placedAt).format("DD/MM/YYYY"),"EAN CODE":t.hsnNumber,"PRODUCT NAME":t.productName+" "+Object.values(t.attributeCombination),QTY:t.count,"MRP SALES":t.productPrice*t.count,"NET(DISCOUNTED SALES)":t.productDiscountPrice*t.count,LOCATION:s.addressDetails.shippingAddress.city})}))})),Y(e)},asyncOnClick:!0,style:{display:"inline",marginTop:"0px",textDecoration:"none"},children:(0,i.jsx)("button",{className:"btn ordersDownload",children:"Download"})})]})]}),(0,i.jsxs)(l.Z,{className:"my-4",height:300,id:"table",bordered:!0,loading:T,data:ge,sortColumn:L,sortType:P,onSortColumn:(e,s)=>{R(!0),setTimeout((()=>{R(!1),M(e),k(s)}),500)},children:[(0,i.jsxs)(s,{width:100,align:"center",children:[(0,i.jsx)(t,{style:{padding:0},children:(0,i.jsx)("div",{style:{lineHeight:"40px"},children:(0,i.jsx)(n.Z,{inline:!0,checked:oe,indeterminate:he,onChange:(e,s)=>{const t=s?h.map((e=>e.id)):[];o(t)}})})}),(0,i.jsx)(xe,{dataKey:"id",checkedKeys:c,onChange:(e,s)=>{const t=s?[...c,e]:c.filter((s=>s!==e));o(t)}})]}),(0,i.jsxs)(s,{align:"center",sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Order No."}),(0,i.jsx)(d,{dataKey:"orderNo"})]}),(0,i.jsxs)(s,{align:"center",sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Shiprocket Order No."}),(0,i.jsx)(d,{dataKey:"shiprocketOrderNo"})]}),(0,i.jsxs)(s,{align:"center",sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Name"}),(0,i.jsx)(d,{dataKey:"name"})]}),(0,i.jsxs)(s,{align:"center",resizable:!0,children:[(0,i.jsx)(t,{}),(0,i.jsx)(d,{dataKey:"id",children:s=>(0,i.jsxs)("svg",{onClick:()=>e("/view-order/".concat(s.id)),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-eye-fill",viewBox:"0 0 16 16",children:[(0,i.jsx)("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"}),(0,i.jsx)("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"})]})})]}),(0,i.jsxs)(s,{width:100,sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Purchase No."}),(0,i.jsx)(d,{dataKey:"purchaseNo"})]}),(0,i.jsxs)(s,{width:100,sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"City"}),(0,i.jsx)(d,{dataKey:"city"})]}),(0,i.jsxs)(s,{width:300,sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Date"}),(0,i.jsx)(d,{dataKey:"date"})]}),(0,i.jsxs)(s,{width:235,sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Status"}),(0,i.jsx)(ve,{style:{padding:"10px 0"},dataKey:"status"})]}),(0,i.jsxs)(s,{width:300,sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Additional Details"}),(0,i.jsx)(d,{style:{padding:"10px 0"},dataKey:"additionalDetails",children:e=>Object.entries(e.additionalDetails||{}).map(((e,s)=>{let[t,a]=e;return(0,i.jsxs)("li",{children:[(0,i.jsxs)("strong",{children:[t,":"]})," ",a.toString()]},s)}))})]}),(0,i.jsxs)(s,{width:300,sortable:!0,resizable:!0,children:[(0,i.jsx)(t,{children:"Total"}),(0,i.jsx)(d,{style:{padding:"10px 0"},dataKey:"total",children:e=>(0,i.jsxs)("div",{children:["\u20b9 ",e.total]})})]})]}),(0,i.jsx)("div",{style:{padding:20},children:(0,i.jsx)(r.Z,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,maxButtons:5,size:"xs",layout:["total","-","limit","|","pager","skip"],total:me().length,limitOptions:[10,30,50],limit:z,activePage:U,onChangePage:I,onChangeLimit:e=>{I(1),Z(e)}})})]})]})}}}]);
//# sourceMappingURL=8357.04feab53.chunk.js.map