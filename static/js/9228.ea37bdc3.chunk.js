"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[9228],{65238:function(e,r,t){t.d(r,{Z:function(){return h}});var n=t(74165),a=t(15861),s=t(15671),o=t(43144),i=t(60136),l=t(27277),c=t(74569),u=t.n(c),d=(0,o.Z)((function e(r){var t=this;(0,s.Z)(this,e),this._initializeResponseInterceptor=function(){t.instance.interceptors.response.use(t._handleResponse,t._handleError)},this._handleResponse=function(e){return e},this._handleError=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.response,a=r.config,a,e.abrupt("return",Promise.resolve(t));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),this.instance=u().create({baseURL:r}),this._initializeResponseInterceptor()})),m=d,p=t(69441),h=function(e){(0,i.Z)(t,e);var r=(0,l.Z)(t);function t(){var e;return(0,s.Z)(this,t),(e=r.call(this,"https://embarkperfumes.com/api"))._initializeRequestInterceptor=function(){e.instance.interceptors.request.use(e._handleRequest)},e._handleRequest=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=p.Z.getState().user.currentUser.accessToken)&&(r.headers.Authorization=t),sessionStorage.getItem("session-id")&&(r.headers["session-id"]=sessionStorage.getItem("session-id")),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e._initializeRequestInterceptor(),e}return(0,o.Z)(t,[{key:"callApi",value:function(e,r){return this.instance({method:r.method,url:e,headers:null!==r&&void 0!==r&&r.header?null===r||void 0===r?void 0:r.header:{},data:null!==r&&void 0!==r&&r.body?null===r||void 0===r?void 0:r.body:void 0,onUploadProgress:null!==r&&void 0!==r&&r.onUploadProgress?null===r||void 0===r?void 0:r.onUploadProgress:void 0})}}]),t}(m)},89404:function(e,r,t){var n=t(29439),a=t(37762),s=new(t(65238).Z);r.Z=function(e){if(sessionStorage.getItem("session-id")&&(o=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(o)))s.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");var r=function(e){var r,t=new URLSearchParams(window.location.search),s={},o=(0,a.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=(0,n.Z)(r.value,2),l=i[0],c=i[1];l.includes(e)&&(s[l]=c)}}catch(u){o.e(u)}finally{o.f()}return s}("utm"),t={method:"POST",body:{additionalDetails:r,event:e}};s.callApi("/session/createNewSession",t).then((function(e){sessionStorage.setItem("session-id",e.data.data)}))}var o}},67604:function(e,r,t){var n=t(74165),a=t(15861),s=t(21830),o=t.n(s),i=t(58086),l=t.n(i),c=t(80184),u=l()(o()),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.fire({title:(0,c.jsx)("strong",{children:r}),html:(0,c.jsx)("p",{children:t}),icon:a}));case 1:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}();r.Z=d},39228:function(e,r,t){t.r(r),t.d(r,{default:function(){return x}});var n=t(74165),a=t(15861),s=t(4942),o=t(1413),i=t(29439),l=t(72791),c=function(e){var r=e.firstName,t=e.lastName,n=e.email,a=e.phoneNumber,s=e.password,o={firstName:!1,lastName:!1,password:!1,email:!1,phoneNumber:!1,message:""};return r||(o.firstName=!0),t||(o.lastName=!0),n||(o.email=!0),n&&!/\S+@\S+\.\S+/.test(n)&&(o.email=!0,o.message="invalid email"),a||(o.phoneNumber=!0),a&&10!=a.length&&(o.phoneNumber=!0),s||(o.password=!0),o},u=t(65238),d=t(46799),m=t(57689),p=t(11087),h=t(59434),f=t(67604),g=t(72881),v=t(30456),N=t(89404),b=t(80184),w=new u.Z;var x=function(){var e=(0,m.s0)(),r=(0,h.I0)(),t=(0,l.useState)(!1),u=(0,i.Z)(t,2),x=u[0],Z=u[1],y=window.google,j=(0,l.useState)({firstName:!1,lastName:!1,password:!1,email:!1,phoneNumber:!1,message:""}),k=(0,i.Z)(j,2),S=k[0],I=k[1],P=(0,l.useState)({firstName:"",lastName:"",phoneNumber:"",email:"",password:""}),A=(0,i.Z)(P,2),F=A[0],U=A[1],C=function(e,r){U((0,o.Z)((0,o.Z)({},F),{},(0,s.Z)({},r,e))),!0!==S.email&&!0!==S.password&&!0!==S.firstName&&!0!==S.lastName&&!0!==S.phoneNumber||I((0,o.Z)((0,o.Z)({},S),{},(0,s.Z)({},r,!1)))};(0,l.useEffect)((function(){(0,N.Z)("Sign Up")}),[]);var E=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(a){var s,o,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),s=c(F),I(s),!(s.phoneNumber||s.firstName||s.lastName||s.email||s.password)){t.next=6;break}return t.abrupt("return");case 6:return o={method:"POST",body:F},Z(!0),t.next=10,w.callApi("auth/createUser",o);case 10:200==(i=t.sent).status?(Z(!1),r((0,d.x4)({userId:i.data.id,accessToken:i.data.accessToken,role:i.data.role,firstName:i.data.firstName,lastName:i.data.lastName,email:i.data.email,contact:i.data.phoneNumber})),e("/")):(Z(!1),(0,f.Z)("Error",i.data.errorMessage||"Something went wrong","error")),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("Something went wrong");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),_=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a,s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,v.Z)(t.credential),s={method:"POST",body:a},e.prev=2,Z(!0),e.next=6,w.callApi("auth/loginWithGoogle",s);case 6:200==(o=e.sent).status?(Z(!1),r((0,d.x4)({userId:o.data.id,accessToken:o.data.accessToken,role:o.data.role,firstName:o.data.firstName,lastName:o.data.lastName,email:o.data.email,contact:o.data.phoneNumber}))):(Z(!1),(0,f.Z)("Error",o.data.errorMessage||"Something went wrong","error")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Something went wrong");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){y.accounts.id.initialize({client_id:"565815563901-1aifse56er87bilok6i98r9p5h8pnhsu.apps.googleusercontent.com",callback:_}),y.accounts.id.renderButton(document.getElementById("SignInWithGoogle"),{theme:"outline",size:"large"})}),[]),(0,b.jsxs)(b.Fragment,{children:[x?(0,b.jsx)(g.Z,{}):null,(0,b.jsx)("div",{className:"signUp-wrapper bg-dark d-flex align-item-center justify-content-center w-100",children:(0,b.jsxs)("div",{className:"signUp",children:[(0,b.jsx)("h2",{className:"mb-3",children:"Sign Up"}),(0,b.jsxs)("form",{children:[(0,b.jsxs)("div",{className:"form-group mb-2",children:[(0,b.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),(0,b.jsx)("input",{type:"text",id:"firstName",className:"form-control ".concat(S.firstName&&"errorInputField"),required:!0,onChange:function(e){return C(e.target.value,"firstName")}}),S.firstName&&(0,b.jsx)("div",{className:"error",children:"Please enter your first name"})]}),(0,b.jsxs)("div",{className:"form-group mb-2",children:[(0,b.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),(0,b.jsx)("input",{type:"text",id:"lastName",className:"form-control ".concat(S.lastName&&"errorInputField"),required:!0,onChange:function(e){return C(e.target.value,"lastName")}}),S.lastName&&(0,b.jsx)("div",{className:"error",children:"Please enter your last name"})]}),(0,b.jsxs)("div",{className:"form-group mb-2",children:[(0,b.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,b.jsx)("input",{type:"email",id:"email",className:"form-control ".concat(S.email&&"errorInputField"),required:!0,onChange:function(e){return C(e.target.value,"email")}}),S.email&&(0,b.jsx)("div",{className:"error",children:S.message?"Please enter a valid email":"Please enter your email"})]}),(0,b.jsxs)("div",{className:"form-group mb-2",children:[(0,b.jsx)("label",{htmlFor:"phoneNumber",className:"form-label",children:"Phone Number"}),(0,b.jsx)("input",{type:"number",id:"phoneNumber",className:"form-control ".concat(S.phoneNumber&&"errorInputField"),required:!0,onChange:function(e){return C(e.target.value,"phoneNumber")}}),S.phoneNumber&&(0,b.jsx)("div",{className:"error",children:"Please enter valid phoneNumber number"})]}),(0,b.jsxs)("div",{className:"form-group mb-2",children:[(0,b.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,b.jsx)("input",{type:"password",id:"password",className:"form-control ".concat(S.password&&"errorInputField"),required:!0,onChange:function(e){return C(e.target.value,"password")}}),S.password&&(0,b.jsx)("div",{className:"error",children:"Please enter your password"})]}),(0,b.jsx)("button",{className:"btn btn-dark w-100 mt-2",onClick:function(e){return E(e)},children:"SIGN UP"}),(0,b.jsx)("div",{className:"text-center mt-2",children:(0,b.jsxs)("p",{children:["Already a member? ",(0,b.jsx)(p.rU,{to:"/sign-in",children:"Sign In"})]})}),(0,b.jsx)("span",{style:{display:"block",textAlign:"center",margin:"0.7rem 0"},children:" OR  "}),(0,b.jsx)("div",{id:"SignInWithGoogle",style:{display:"flex",justifyContent:"center"}})]})]})})]})}},30456:function(e,r,t){function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,a,s=0,o=0,i="";a=r.charAt(o++);~a&&(t=s%4?64*t+a:a,s++%4)?i+=String.fromCharCode(255&t>>(-2*s&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return i};function s(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(r)}catch(e){return a(r)}}function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",r.Z=function(e,r){if("string"!=typeof e)throw new o("Invalid token specified");var t=!0===(r=r||{}).header?0:1;try{return JSON.parse(s(e.split(".")[t]))}catch(e){throw new o("Invalid token specified: "+e.message)}}}}]);
//# sourceMappingURL=9228.ea37bdc3.chunk.js.map