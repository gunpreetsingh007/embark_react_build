"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[2174],{50226:function(e,a,c){c.r(a),c.d(a,{default:function(){return g}});var t=c(93433),n=c(74165),r=c(15861),s=c(29439),l=c(72791),i=c(57689),o=c(4646),d=c(65238),u=c(72881),h=c(11087),p=c(33419),f=c(763),m=c(14902),v=c(95634),x=c(80184),b=new d.Z,g=function(e){var a=(0,i.s0)(),c=(0,i.TH)(),d=(0,l.useState)(!1),g=(0,s.Z)(d,2),j=g[0],y=g[1],N=(0,l.useState)([]),k=(0,s.Z)(N,2),Z=k[0],D=k[1],C=(0,l.useState)([]),S=(0,s.Z)(C,2),F=S[0],w=S[1],E=(0,l.useState)([]),P=(0,s.Z)(E,2),T=P[0],B=P[1],A=(0,l.useState)(0),q=(0,s.Z)(A,2),O=q[0],H=q[1],G=(0,i.UO)(),I=(0,h.lr)(),M=(0,s.Z)(I,2),U=M[0],R=(M[1],U.get("query"));sessionStorage.setItem("emsebach",null!==R&&void 0!==R?R:"");var V=null===G||void 0===G?void 0:G.id,W=(0,l.useState)(V),_=(0,s.Z)(W,2),Q=_[0],z=_[1],J=(0,l.useState)(null),K=(0,s.Z)(J,2),L=K[0],X=K[1],Y=(0,l.useState)([]),$=(0,s.Z)(Y,2),ee=$[0],ae=$[1],ce=(0,l.useState)(e.type),te=(0,s.Z)(ce,2),ne=te[0],re=te[1],se=(0,l.useRef)([]),le=(0,l.useState)([]),ie=(0,s.Z)(le,2),oe=ie[0],de=ie[1],ue=(0,l.useState)([]),he=(0,s.Z)(ue,2),pe=he[0],fe=he[1],me=(0,l.useState)([]),ve=(0,s.Z)(me,2),xe=ve[0],be=ve[1],ge=(0,l.useState)([]),je=(0,s.Z)(ge,2),ye=je[0],Ne=je[1],ke=(0,l.useState)([]),Ze=(0,s.Z)(ke,2),De=Ze[0],Ce=Ze[1],Se=(0,l.useState)(""),Fe=(0,s.Z)(Se,2),we=Fe[0],Ee=Fe[1],Pe="149c30da-c1f3-4189-9961-799fbdfc501f",Te=[],Be=[];"9db4d1b8-b7f4-426a-b1e2-0e98f0ac417f"==Q?(Te=[[0,500],[500,1e3],[1e3,3e3],[3e3,9999]],Be=[15,30,100,150]):Q==Pe?(Te=[[395],[595],[695],[795]],Be=[125,150,200,250,300]):"fa47feb9-5e9d-4645-8124-aaf2f769829a"==Q?(Te=[[1235],[1490],[1690],[1785],[2530]],Be=[45,60,280,450]):(Te=[[0,500],[500,1e3],[1e3,3e3],[3e3,9999]],Be=[15,30,100,150]),(0,l.useEffect)((function(){re(null===e||void 0===e?void 0:e.type)}),[e]);var Ae=(0,l.useCallback)((0,r.Z)((0,n.Z)().mark((function e(){var a,c,t,r,s,l,i,o,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y(!0),c={method:"GET"},"hierarchy"!=ne){e.next=9;break}return e.next=6,b.callApi("/product/getProductsByMajorHierarchy/".concat(Q||""),c);case 6:e.t0=e.sent,e.next=26;break;case 9:if("search"!=ne){e.next=15;break}return e.next=12,b.callApi("/product/searchProducts?q=".concat(R||""),c);case 12:e.t1=e.sent,e.next=25;break;case 15:if("fragrances"!=ne){e.next=21;break}return e.next=18,b.callApi("/product/getProductsByFragrance/".concat(Q||""),c);case 18:e.t2=e.sent,e.next=24;break;case 21:return e.next=23,b.callApi("/product/getProductsByGender/".concat(Q||""),c);case 23:e.t2=e.sent;case 24:e.t1=e.t2;case 25:e.t0=e.t1;case 26:t=e.t0,200==(null===(a=t)||void 0===a?void 0:a.status)?(y(!1),D(null===(r=t)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.data),w(null===(l=t)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.data),B(null===(o=t)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.data)):(D([]),w([]),B([]),y(!1)),e.next=33;break;case 30:e.prev=30,e.t3=e.catch(0),y(!1);case 33:case"end":return e.stop()}}),e,null,[[0,30]])}))),[Q,R,ne]);(0,l.useEffect)((function(){var e;e=1===O?(0,t.Z)(F).sort((function(e,a){return e.productDetails.productDiscountPrice-a.productDetails.productDiscountPrice})):2===O?(0,t.Z)(F).sort((function(e,a){return a.productDetails.productDiscountPrice-e.productDetails.productDiscountPrice})):F,B(e)}),[F,O]);var qe=(0,l.useCallback)((0,r.Z)((0,n.Z)().mark((function e(){var a,c,t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"GET"},e.next=4,b.callApi("/hierarchy/getHierarchyDetailsById/".concat(Q||""),a);case 4:200==(null===(c=e.sent)||void 0===c?void 0:c.status)&&X(null===c||void 0===c||null===(t=c.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.hierarchyName),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[Q]),Oe=(0,l.useCallback)((0,r.Z)((0,n.Z)().mark((function e(){var a,c,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),a={method:"GET"},e.next=4,b.callApi("/hierarchy/getAllFragrances",a);case 4:200==(null===(c=e.sent)||void 0===c?void 0:c.status)&&de(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.data.map((function(e){return{value:e.id,label:e.fragranceName}})));case 6:case"end":return e.stop()}}),e)}))),[]),He=(0,l.useCallback)((0,r.Z)((0,n.Z)().mark((function e(){var a,c,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET"},e.next=3,b.callApi("/hierarchy/getHierarchyTreeById/".concat(Q||""),a);case 3:200==(null===(c=e.sent)||void 0===c?void 0:c.status)&&ae(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.data);case 5:case"end":return e.stop()}}),e)}))),[]);(0,l.useEffect)((function(){"search"!=ne&&Ae(),"hierarchy"==ne&&(qe(),Q!=Pe&&Oe(),He()),"search"!=ne&&"gender"!=ne||Oe()}),[Q,ne]),(0,l.useEffect)((function(){"search"==ne&&Ae()}),[R,ne]),(0,l.useEffect)((function(){z(null===G||void 0===G?void 0:G.id)}),[G]);var Ge=function(e,a){if(a)pe=[].concat((0,t.Z)(pe),[e]);else{var c=pe.indexOf(e);c>-1&&pe.splice(c,1)}fe((0,t.Z)(pe))},Ie=function(e,a){if(a)xe=[].concat((0,t.Z)(xe),[e]);else{var c=xe.indexOf(e);c>-1&&xe.splice(c,1)}be((0,t.Z)(xe))},Me=function(e,a){if(a)ye=[].concat((0,t.Z)(ye),[e]);else{var c=0,n=!1;ye.every((function(a,t){return!(0,f.isEqual)(a,e)||(c=t,n=!0,!1)})),n&&ye.splice(c,1)}Ne((0,t.Z)(ye))},Ue=function(e,a){if(a)De=[].concat((0,t.Z)(De),[e]);else{var c=De.indexOf(e);c>-1&&De.splice(c,1)}Ce((0,t.Z)(De))},Re=function(){y(!0),F=(0,t.Z)(Z),se.current.length&&(F=(0,t.Z)(F.filter((function(e){return se.current.includes(e.hierarchyId)})))),pe.length&&(F=(0,t.Z)(F.filter((function(e){return pe.some((function(a){return e.productDetails.attributeNumericValue==a}))})))),ye.length&&(F=ye[0].length>1?(0,t.Z)(F.filter((function(e){return ye.some((function(a){return e.productDetails.productDiscountPrice>a[0]&&e.productDetails.productDiscountPrice<a[1]}))}))):(0,t.Z)(F.filter((function(e){return ye.some((function(a){return e.productDetails.productDiscountPrice==a[0]}))})))),De.length&&(F=(0,t.Z)(F.filter((function(e){return De.includes(e.fragranceId)})))),xe.length&&(F=(0,t.Z)(F.filter((function(e){return xe.includes(e.gender)})))),w((0,t.Z)(F)),y(!1)},Ve=function(e){se.current=e};return(0,l.useEffect)((function(){Ee(sessionStorage.getItem("emsebach"))}),[sessionStorage]),(0,x.jsxs)(x.Fragment,{children:[j?(0,x.jsx)(u.Z,{}):null,(0,x.jsx)(v.Z,{dataElementId:"mobileSearchBar",dataText:["Search Perfumes","Bath and Body","Search Gift Sets"],autoFocus:"/search"==c.pathname,navigate:a,searchValue:we}),(0,x.jsx)("div",{className:"container-fluid py-lg-3 py-2",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsxs)("div",{className:"col-lg-2 d-none d-lg-block py-3 productsFilters",children:[L?(0,x.jsx)("div",{className:"mb-3 ps-1",children:(0,x.jsxs)("strong",{children:["HOME - ",L]})}):"",(0,x.jsxs)("div",{className:"accordion",id:"accordionExample",children:["hierarchy"==ne&&ee.length?(0,x.jsxs)("div",{className:"accordion-item",children:[(0,x.jsx)("h2",{className:"accordion-header",id:"headingOne",children:(0,x.jsx)("button",{className:"accordion-button filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:"Categories"})}),(0,x.jsx)("div",{id:"collapseOne",className:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:(0,x.jsx)("div",{className:"accordion-body",children:(0,x.jsx)(m.Z,{convertedHierarchy:ee,handleChangeHierarchy:Ve})})})]}):"","gender"!=ne?(0,x.jsxs)("div",{className:"accordion-item",children:[(0,x.jsx)("h2",{className:"accordion-header",id:"headingFive",children:(0,x.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFive","aria-expanded":"false","aria-controls":"collapseFive",children:"Gender"})}),(0,x.jsx)("div",{id:"collapseFive",className:"accordion-collapse collapse","aria-labelledby":"headingFive","data-bs-parent":"#accordionExample",children:(0,x.jsxs)("div",{className:"accordion-body",children:[(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",value:"0-20ml",id:"quantity1",onChange:function(e){return Ie("Men",e.target.checked)}}),(0,x.jsx)("label",{className:"form-check-label",for:"quantity1",children:"Men"})]}),(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",value:"20-50ml",id:"quantity2",onChange:function(e){return Ie("Women",e.target.checked)}}),(0,x.jsx)("label",{className:"form-check-label",for:"quantity2",children:"Women"})]}),(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",value:"50-100ml",id:"quantity3",onChange:function(e){return Ie("Unisex",e.target.checked)}}),(0,x.jsx)("label",{className:"form-check-label",for:"quantity3",children:"Unisex"})]})]})})]}):"",(0,x.jsxs)("div",{className:"accordion-item",children:[(0,x.jsx)("h2",{className:"accordion-header",id:"headingTwo",children:(0,x.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo",children:"Volume"})}),(0,x.jsx)("div",{id:"collapseTwo",className:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:(0,x.jsx)("div",{className:"accordion-body",children:Be.map((function(e,a){return(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"quantity".concat(a+1),onChange:function(a){return Ge(e,a.target.checked)}}),(0,x.jsxs)("label",{className:"form-check-label",for:"quantity".concat(a+1),children:[e,"ml"]})]})}))})})]}),(0,x.jsxs)("div",{className:"accordion-item",children:[(0,x.jsx)("h2",{className:"accordion-header",id:"headingThree",children:(0,x.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree",children:"Price"})}),(0,x.jsx)("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:(0,x.jsx)("div",{className:"accordion-body",children:Te.map((function(e,a){return e.length>1?(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"price".concat(a+1),onChange:function(a){return Me(e,a.target.checked)}}),(0,x.jsxs)("label",{className:"form-check-label",for:"price".concat(a+1),children:["\u20b9",e[0]," - \u20b9 ",9999==e[1]?"above":e[1]]})]}):(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",id:"price".concat(a+1),onChange:function(a){return Me(e,a.target.checked)}}),(0,x.jsxs)("label",{className:"form-check-label",for:"price".concat(a+1),children:["\u20b9",e[0]]})]})}))})})]}),oe.length?(0,x.jsxs)("div",{className:"accordion-item",children:[(0,x.jsx)("h2",{className:"accordion-header",id:"headingFour",children:(0,x.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-expanded":"false","aria-controls":"collapseFour",children:"Fragrance Family"})}),(0,x.jsx)("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:(0,x.jsx)("div",{className:"accordion-body",children:oe.map((function(e,a){return(0,x.jsxs)("div",{className:"form-check",children:[(0,x.jsx)("input",{className:"form-check-input",type:"checkbox",value:e.label,id:"fragrance".concat(a),onChange:function(a){return Ue(e.value,a.target.checked)}}),(0,x.jsx)("label",{className:"form-check-label",for:"fragrance".concat(a),children:e.label})]})}))})})]}):""]}),(0,x.jsx)("div",{className:"applyFilterBtn",children:(0,x.jsx)("button",{onClick:Re,children:"Apply Filter"})})]}),(0,x.jsx)("div",{className:"col-lg-10",children:(0,x.jsxs)("div",{className:"row gx-2",children:[null===T||void 0===T?void 0:T.map((function(e){return(0,x.jsx)("div",{className:"col-6 col-md-4 col-lg-3",children:(0,x.jsx)(o.Z,{cardClass:"productsDetails",id:e.id,src:"https://embarkperfumes.com/api/"+e.productDetails.pictureUrl,originalPrice:e.productDetails.productPrice,title:e.productName,price:e.productDetails.productDiscountPrice,attributeCombination:e.productDetails.attributeCombination,bestSellerStatus:e.productDetails.bestSellerStatus,isActive:e.productDetails.isActive,isNew:e.productDetails.isNew,rating:e.productDetails.rating,ratingCount:e.productDetails.ratingCount})})})),j?(0,x.jsx)(x.Fragment,{}):0==(null===T||void 0===T?void 0:T.length)?(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:(0,x.jsx)("div",{className:"fs-3 fw-bold",children:"No Data"})}):(0,x.jsx)(x.Fragment,{})]})})]})}),(0,x.jsx)(p.Z,{fragrances:oe,type:ne,convertedHierarchy:ee,handleOnApplyFilter:Re,handleChangeHierarchy:Ve,handleFragranceChange:Ue,handlePriceChange:Me,handleGenderChange:Ie,handleQuantityChange:Ge,handleButtonActive:H,buttonActive:O,priceRange:Te,volumeRange:Be,id:Q})]})}}}]);
//# sourceMappingURL=2174.9e859054.chunk.js.map