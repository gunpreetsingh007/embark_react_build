"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[6717],{67604:function(e,s,a){var t=a(21830),l=a.n(t),d=a(58086),n=a.n(d),r=a(80184);const i=n()(l());s.Z=async(e,s,a)=>i.fire({title:(0,r.jsx)("strong",{children:e}),html:(0,r.jsx)("p",{children:s}),icon:a})},66527:function(e,s,a){a.r(s),a.d(s,{default:function(){return C}});var t,l=a(72791),d=a(6713),n=a(12528),r=a(88831),i=(a(60669),a(29560),a(72426)),c=a.n(i),o=a(28029),h=a(85792),u=a(68096),x=a(66232),v=a(75064),j=a(30168);const m=a(17691).ZP.input(t||(t=(0,j.Z)(['\nwidth: 236px;\nheight: 40px;\nborder: 1px solid #A6B0B9;\nborder-radius: 4px;\ncolor: #A6B0B9;\n  padding: 0.56rem 0.25rem 0.56rem 1.875rem;  \nbackground: transparent url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%220.875rem%22%20width%3D%220.75rem%22%20viewBox%3D%220%200%20448%20512%22%3E%3Cpath%20fill%3D%22%23A6B0B9%22%20d%3D%22M0%20464c0%2026.5%2021.5%2048%2048%2048h352c26.5%200%2048-21.5%2048-48V192H0v272zm320-196c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zM192%20268c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zM64%20268c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012H76c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012H76c-6.6%200-12-5.4-12-12v-40zM400%2064h-48V16c0-8.8-7.2-16-16-16h-32c-8.8%200-16%207.2-16%2016v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8%200-16%207.2-16%2016v48H48C21.5%2064%200%2085.5%200%20112v48h448v-48c0-26.5-21.5-48-48-48z%22%2F%3E%3C%2Fsvg%3E") no-repeat 10px center;\n::placeholder {\n    font: normal normal normal 16px/19px "Proxima Nova Rg", sans-serif;\n    letter-spacing: 0px;\n    color: #00000099;\n  }\n'])));a(84778);var p=a(80184);var N=e=>{const{onChangeDateRange:s}=e,a=[(new Date).setHours(0,0,0,0),(new Date).setHours(0,0,0,0)],[t,d]=[(new Date).setHours(0,0,0,0),(new Date).setHours(0,0,0,0)],n=(0,l.useRef)();(0,l.useEffect)((()=>{n.current.setStartDate(null!==t&&void 0!==t?t:a[0]),n.current.setEndDate(null!==d&&void 0!==d?d:a[1])}),[t,d]);return(0,p.jsx)("form",{className:"dateRange",children:(0,p.jsx)(v.Z,{ref:n,initialSettings:{locale:{format:"MMM DD YYYY"},showDropdowns:!0,opens:"left"},onApply:e=>{let a=e.target.value.split(" - ");a=a.map((e=>new Date(e))),s&&s(a)},children:(0,p.jsx)(m,{readOnly:!0})})})},g=a(27117),S=a(72881),w=a(57689),b=a(67604),D=a(98472);const E=new g.Z;var C=()=>{const e=(0,w.s0)(),{Column:s,HeaderCell:a,Cell:t}=d.Z,[i,v]=(0,l.useState)([]),[j,m]=(0,l.useState)([]),[g,C]=(0,l.useState)(""),[y,O]=(0,l.useState)("ALL"),[f,A]=(0,l.useState)([]),[T,L]=(0,l.useState)(!1),[R,M]=(0,l.useState)(),[k,P]=(0,l.useState)(),[z,Z]=(0,l.useState)(10),[H,U]=(0,l.useState)(1),[Y,I]=(0,l.useState)([]),[K,F]=(0,l.useState)([]),[B,V]=(0,l.useState)({totalOrders:0,value:0}),[G,W]=(0,l.useState)({totalOrders:0,value:0}),[J,Q]=(0,l.useState)({totalOrders:0,value:0}),[_,X]=(0,l.useState)({totalOrders:0,value:0}),[q,$]=(0,l.useState)({totalOrders:0,value:0});let[ee,se]=(0,l.useState)(0),[ae,te]=(0,l.useState)(0),[le,de]=(0,l.useState)(0);const[ne,re]=(0,l.useState)(!1),[ie,ce]=(0,l.useState)([new Date,new Date]);let oe=!1,he=!1;const ue={PaperProps:{style:{maxHeight:224,width:250}}};i.length===j.length?oe=!0:0===i.length?oe=!1:i.length>0&&i.length<j.length&&(he=!0);const xe=e=>{let{rowData:s,onChange:a,checkedKeys:l,dataKey:d,...r}=e;return(0,p.jsx)(t,{...r,style:{padding:0},children:(0,p.jsx)("div",{style:{lineHeight:"46px"},children:(0,p.jsx)(n.Z,{value:s[d],inline:!0,onChange:a,checked:l.some((e=>e===s[d]))})})})},ve=e=>{let{rowData:s,dataKey:a,...l}=e;return(0,p.jsx)(t,{...l,style:{padding:0},children:(0,p.jsx)("div",{style:{background:"".concat("COMPLETED"==s.status?"#00ff00":"PROCESSING"==s.status?"#FFA500":"CANCELLED"==s.status?"#e0e0e0":"transparent"),borderRadius:6,padding:"5px 10px",marginTop:"8px",overflow:"hidden",display:"inline-block"},children:(0,p.jsx)("div",{children:s.status})})})},je=(0,l.useCallback)((async()=>{re(!0);const e=await E.callApi("order/getOrders?start=".concat(c()(ie[0]).startOf("day").valueOf(),"&end=").concat(c()(ie[1]).endOf("day").valueOf(),"&type=").concat("ALL"!=y?y:""),{method:"GET"});if(200==e.status){var s,a,t,l,d,n,r,i,o;re(!1);let h=[],u=[],x=[];null===e||void 0===e||null===(s=e.data)||void 0===s||s.data.forEach((e=>{1==e.purchaseCount?u.push(e.userId):x.push(e.userId),h.push({id:e.id,orderNo:"".concat(e.orderToken),shiprocketOrderNo:"".concat(e.id),name:"".concat(e.addressDetails.shippingAddress.firstName," ").concat(e.addressDetails.shippingAddress.lastName),date:c()(e.placedAt).format("YYYY-MM-DD h:m a"),status:e.orderStatus,city:e.addressDetails.shippingAddress.city,purchaseNo:e.purchaseCount,total:parseInt(e.orderTotalAmount),additionalDetails:e.additionalDetails})})),ee=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.customerCount,m(h),A(h),F(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data),V(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.todayStats),W(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.currentMonthStats),Q(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.lastMonthStats),X(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.thisYearStats),$(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.customStats),se(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.customerCount),ae=new Set(u).size,le=new Set(x).size,te(ae),de(le)}else re(!1)}),[ie,y]);(0,l.useEffect)((()=>{je()}),[ie,y]);const me=(0,l.useCallback)((e=>{const s=f.filter((s=>{var a;return null===s||void 0===s||null===(a=s.name)||void 0===a?void 0:a.toLocaleLowerCase().includes(e.trim().toLocaleLowerCase())}));m(s)}),[f]),pe=()=>R&&k?j.sort(((e,s)=>{let a=e[R],t=s[R];return"string"===typeof a&&(a=a.charCodeAt()),"string"===typeof t&&(t=t.charCodeAt()),"asc"===k?a-t:t-a})):j,Ne=pe().filter(((e,s)=>{const a=z*(H-1);return s>=a&&s<a+z}));return(0,p.jsxs)(p.Fragment,{children:[ne?(0,p.jsx)(S.Z,{}):null,(0,p.jsxs)("div",{className:"container ordersContainer",children:[(0,p.jsx)("div",{className:"header my-4 title fs-3",children:"Orders"}),(0,p.jsxs)("div",{className:"row mb-5 gy-5",children:[(0,p.jsx)("div",{className:"col-3 valueTable",children:(0,p.jsxs)("table",{className:"w-100",children:[(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"TODAY'S"})}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,p.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:(null===B||void 0===B?void 0:B.totalOrders)||0}),(0,p.jsx)("td",{className:"w-50",children:(null===B||void 0===B?void 0:B.value)||0})]})]})}),(0,p.jsx)("div",{className:"col-3 valueTable",children:(0,p.jsxs)("table",{className:"w-100",children:[(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"CURRENT MONTH"})}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,p.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:(null===G||void 0===G?void 0:G.totalOrders)||0}),(0,p.jsx)("td",{className:"w-50",children:(null===G||void 0===G?void 0:G.value)||0})]})]})}),(0,p.jsx)("div",{className:"col-3 valueTable",children:(0,p.jsxs)("table",{className:"w-100",children:[(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"LAST MONTH"})}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,p.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:(null===J||void 0===J?void 0:J.totalOrders)||0}),(0,p.jsx)("td",{className:"w-50",children:(null===J||void 0===J?void 0:J.value)||0})]})]})}),(0,p.jsx)("div",{className:"col-3 valueTable",children:(0,p.jsxs)("table",{className:"w-100",children:[(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"THIS YEAR"})}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,p.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:(null===_||void 0===_?void 0:_.totalOrders)||0}),(0,p.jsx)("td",{className:"w-50",children:(null===_||void 0===_?void 0:_.value)||0})]})]})}),(0,p.jsx)("div",{className:"col-3 valueTable",children:(0,p.jsxs)("table",{className:"w-100",children:[(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"CUSTOM"})}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:"ORDERS"}),(0,p.jsx)("td",{className:"w-50",children:"VALUE"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:(null===q||void 0===q?void 0:q.totalOrders)||0}),(0,p.jsx)("td",{className:"w-50",children:(null===q||void 0===q?void 0:q.value)||0})]})]})}),(0,p.jsx)("div",{className:"col-3 valueTable",children:(0,p.jsxs)("table",{className:"w-100",children:[(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"CUSTOMER"})}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:"NEW"}),(0,p.jsx)("td",{className:"w-50",children:"EXISTING"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"w-50",children:ae}),(0,p.jsx)("td",{className:"w-50",children:le})]}),(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{className:"w-50",children:[Math.round(ae/ee*100)||0,"%"]}),(0,p.jsxs)("td",{className:"w-50",children:[Math.round(le/ee*100)||0,"%"]})]})]})}),(0,p.jsx)("div",{className:"col-3 valueTable",children:(0,p.jsxs)("table",{className:"w-100",children:[(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"CUSTOMER COUNT"})}),(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:2,style:{width:"100%",textAlign:"center"},children:ee})})]})})]}),(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsx)(u.Z,{sx:{m:1,width:300,mt:3},children:(0,p.jsx)(x.Z,{displayEmpty:!0,value:g,onChange:async e=>{if(0==i.length)return;const{target:{value:s}}=e;re(!0),C(s);let a={method:"POST",body:{status:s,ids:i}};if(200==(await E.callApi("/order/bulkUpdateOrderStatus",a)).status){re(!1);let e=JSON.parse(JSON.stringify(f));e.map((e=>{i.includes(e.id)&&(e.status=s)})),m(e),A(e),(0,b.Z)("Success","Status Updated Successfully","success")}else re(!1),(0,b.Z)("Error","Error while updating the status of order","error")},input:(0,p.jsx)(o.Z,{}),renderValue:e=>e||(0,p.jsx)("em",{children:"Bulk actions"}),MenuProps:ue,inputProps:{"aria-label":"Without label"},children:[{id:2,value:"PROCESSING",label:"Change status to processing"},{id:3,value:"ON HOLD",label:"Change status to on-hold"},{id:4,value:"COMPLETED",label:"Change status to completed"},{id:5,value:"CANCELLED",label:"Change status to cancelled"}].map((e=>(0,p.jsx)(h.Z,{value:e.value,children:e.label},e.id)))})}),(0,p.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"0 0.75rem"},children:[(0,p.jsx)(N,{onChangeDateRange:e=>{ce(e)}}),(0,p.jsx)(u.Z,{sx:{width:300,mt:3},children:(0,p.jsx)(x.Z,{displayEmpty:!0,value:y,onChange:e=>{const{target:{value:s}}=e;O(s)},input:(0,p.jsx)(o.Z,{}),renderValue:e=>e||(0,p.jsx)("em",{children:"Filters"}),MenuProps:ue,inputProps:{"aria-label":"Without label"},children:[{id:"all",value:"ALL"},{id:"processing",value:"PROCESSING"},{id:"onhold",value:"ON HOLD"},{id:"completed",value:"COMPLETED"},{id:"cancelled",value:"CANCELLED"},{id:"refunded",value:"REFUNDED"},{id:"failed",value:"FAILED"}].map((e=>(0,p.jsx)(h.Z,{value:e.value,children:e.value},e.id)))})}),(0,p.jsx)("form",{className:"nosubmit",onSubmit:e=>{e.preventDefault()},children:(0,p.jsx)("input",{className:"nosubmit",type:"search",placeholder:"Search",onChange:e=>me(e.target.value)})}),(0,p.jsx)(D.CSVLink,{data:Y,filename:"orders.csv",headers:["PARTNER","DATE","EAN CODE","PRODUCT NAME","QTY","MRP SALES","NET(DISCOUNTED SALES)","LOCATION"],onClick:()=>{let e=[];K.forEach((s=>{["CANCELLED","REFUNDED","FAILED"].includes(s.orderStatus)||s.orderDetails.forEach((a=>{e.push({PARTNER:"WEBSITE",DATE:c()(s.placedAt).format("DD/MM/YYYY"),"EAN CODE":a.hsnNumber,"PRODUCT NAME":a.productName+" "+Object.values(a.attributeCombination),QTY:a.count,"MRP SALES":a.productPrice*a.count,"NET(DISCOUNTED SALES)":a.productDiscountPrice*a.count,LOCATION:s.addressDetails.shippingAddress.city})}))})),I(e)},asyncOnClick:!0,style:{display:"inline",marginTop:"0px",textDecoration:"none"},children:(0,p.jsx)("button",{className:"btn ordersDownload",children:"Download"})})]})]}),(0,p.jsxs)(d.Z,{className:"my-4",height:300,id:"table",bordered:!0,loading:T,data:Ne,sortColumn:R,sortType:k,onSortColumn:(e,s)=>{L(!0),setTimeout((()=>{L(!1),M(e),P(s)}),500)},children:[(0,p.jsxs)(s,{width:100,align:"center",children:[(0,p.jsx)(a,{style:{padding:0},children:(0,p.jsx)("div",{style:{lineHeight:"40px"},children:(0,p.jsx)(n.Z,{inline:!0,checked:oe,indeterminate:he,onChange:(e,s)=>{const a=s?j.map((e=>e.id)):[];v(a)}})})}),(0,p.jsx)(xe,{dataKey:"id",checkedKeys:i,onChange:(e,s)=>{const a=s?[...i,e]:i.filter((s=>s!==e));v(a)}})]}),(0,p.jsxs)(s,{align:"center",sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Order No."}),(0,p.jsx)(t,{dataKey:"orderNo"})]}),(0,p.jsxs)(s,{align:"center",sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Shiprocket Order No."}),(0,p.jsx)(t,{dataKey:"shiprocketOrderNo"})]}),(0,p.jsxs)(s,{align:"center",sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Name"}),(0,p.jsx)(t,{dataKey:"name"})]}),(0,p.jsxs)(s,{align:"center",resizable:!0,children:[(0,p.jsx)(a,{}),(0,p.jsx)(t,{dataKey:"id",children:s=>(0,p.jsxs)("svg",{onClick:()=>e("/view-order/".concat(s.id)),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-eye-fill",viewBox:"0 0 16 16",children:[(0,p.jsx)("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"}),(0,p.jsx)("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"})]})})]}),(0,p.jsxs)(s,{width:100,sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Purchase No."}),(0,p.jsx)(t,{dataKey:"purchaseNo"})]}),(0,p.jsxs)(s,{width:100,sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"City"}),(0,p.jsx)(t,{dataKey:"city"})]}),(0,p.jsxs)(s,{width:300,sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Date"}),(0,p.jsx)(t,{dataKey:"date"})]}),(0,p.jsxs)(s,{width:235,sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Status"}),(0,p.jsx)(ve,{style:{padding:"10px 0"},dataKey:"status"})]}),(0,p.jsxs)(s,{width:300,sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Additional Details"}),(0,p.jsx)(t,{style:{padding:"10px 0"},dataKey:"additionalDetails",children:e=>Object.entries(e.additionalDetails||{}).map(((e,s)=>{let[a,t]=e;return(0,p.jsxs)("li",{children:[(0,p.jsxs)("strong",{children:[a,":"]})," ",t.toString()]},s)}))})]}),(0,p.jsxs)(s,{width:300,sortable:!0,resizable:!0,children:[(0,p.jsx)(a,{children:"Total"}),(0,p.jsx)(t,{style:{padding:"10px 0"},dataKey:"total",children:e=>(0,p.jsxs)("div",{children:["\u20b9 ",e.total]})})]})]}),(0,p.jsx)("div",{style:{padding:20},children:(0,p.jsx)(r.Z,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,maxButtons:5,size:"xs",layout:["total","-","limit","|","pager","skip"],total:pe().length,limitOptions:[10,30,50],limit:z,activePage:H,onChangePage:U,onChangeLimit:e=>{U(1),Z(e)}})})]})]})}}}]);
//# sourceMappingURL=6717.4b12ca59.chunk.js.map