"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[9228],{65238:function(e,r,s){s.d(r,{Z:function(){return o}});var a=s(55294);var t=class{constructor(e){this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use(this._handleResponse,this._handleError)},this._handleResponse=e=>e,this._handleError=async e=>{let{response:r,config:s}=e;return Promise.resolve(r)},this.instance=a.Z.create({baseURL:e}),this._initializeResponseInterceptor()}},n=s(69441);class o extends t{constructor(){super("https://embarkperfumes.com/api"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use(this._handleRequest)},this._handleRequest=async e=>{let r=n.Z.getState().user.currentUser.accessToken;return r&&(e.headers.Authorization=r),sessionStorage.getItem("session-id")&&(e.headers["session-id"]=sessionStorage.getItem("session-id")),e},this._initializeRequestInterceptor()}callApi(e,r){return this.instance({method:r.method,url:e,headers:null!==r&&void 0!==r&&r.header?null===r||void 0===r?void 0:r.header:{},data:null!==r&&void 0!==r&&r.body?null===r||void 0===r?void 0:r.body:void 0,onUploadProgress:null!==r&&void 0!==r&&r.onUploadProgress?null===r||void 0===r?void 0:r.onUploadProgress:void 0})}}},89404:function(e,r,s){const a=new(s(65238).Z);r.Z=e=>{if(sessionStorage.getItem("session-id")&&(r=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(r)))a.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");const r=function(e){const r=new URLSearchParams(window.location.search),s={};for(const[a,t]of r)a.includes(e)&&(s[a]=t);return s}("utm");let s={method:"POST",body:{additionalDetails:r,event:e}};a.callApi("/session/createNewSession",s).then((e=>{sessionStorage.setItem("session-id",e.data.data)}))}var r}},67604:function(e,r,s){var a=s(21830),t=s.n(a),n=s(58086),o=s.n(n),i=s(80184);const l=o()(t());r.Z=async(e,r,s)=>l.fire({title:(0,i.jsx)("strong",{children:e}),html:(0,i.jsx)("p",{children:r}),icon:s})},39228:function(e,r,s){s.r(r),s.d(r,{default:function(){return g}});var a=s(72791);const t=e=>{const{firstName:r,lastName:s,email:a,phoneNumber:t,password:n}=e;var o={firstName:!1,lastName:!1,password:!1,email:!1,phoneNumber:!1,message:""};return r||(o.firstName=!0),s||(o.lastName=!0),a||(o.email=!0),a&&!/\S+@\S+\.\S+/.test(a)&&(o.email=!0,o.message="invalid email"),t||(o.phoneNumber=!0),t&&10!=t.length&&(o.phoneNumber=!0),n||(o.password=!0),o};var n=s(65238),o=s(46799),i=s(57689),l=s(11087),c=s(59434),d=s(67604),m=s(72881),u=s(30456),h=s(89404),p=s(80184);const f=new n.Z;var g=function(){const e=(0,i.s0)(),r=(0,c.I0)(),[s,n]=(0,a.useState)(!1),g=window.google,[N,b]=(0,a.useState)({firstName:!1,lastName:!1,password:!1,email:!1,phoneNumber:!1,message:""}),[v,w]=(0,a.useState)({firstName:"",lastName:"",phoneNumber:"",email:"",password:""}),x=(e,r)=>{w({...v,[r]:e}),!0!==N.email&&!0!==N.password&&!0!==N.firstName&&!0!==N.lastName&&!0!==N.phoneNumber||b({...N,[r]:!1})};(0,a.useEffect)((()=>{(0,h.Z)("Sign Up")}),[]);const y=async e=>{const s={method:"POST",body:(0,u.Z)(e.credential)};try{n(!0);const e=await f.callApi("auth/loginWithGoogle",s);200==e.status?(n(!1),r((0,o.x4)({userId:e.data.id,accessToken:e.data.accessToken,role:e.data.role,firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,contact:e.data.phoneNumber}))):(n(!1),(0,d.Z)("Error",e.data.errorMessage||"Something went wrong","error"))}catch(N){console.error("Something went wrong")}};return(0,a.useEffect)((()=>{g.accounts.id.initialize({client_id:"565815563901-1aifse56er87bilok6i98r9p5h8pnhsu.apps.googleusercontent.com",callback:y}),g.accounts.id.renderButton(document.getElementById("SignInWithGoogle"),{theme:"outline",size:"large"})}),[]),(0,p.jsxs)(p.Fragment,{children:[s?(0,p.jsx)(m.Z,{}):null,(0,p.jsx)("div",{className:"signUp-wrapper bg-dark d-flex align-item-center justify-content-center w-100",children:(0,p.jsxs)("div",{className:"signUp",children:[(0,p.jsx)("h2",{className:"mb-3",children:"Sign Up"}),(0,p.jsxs)("form",{children:[(0,p.jsxs)("div",{className:"form-group mb-2",children:[(0,p.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),(0,p.jsx)("input",{type:"text",id:"firstName",className:"form-control ".concat(N.firstName&&"errorInputField"),required:!0,onChange:e=>x(e.target.value,"firstName")}),N.firstName&&(0,p.jsx)("div",{className:"error",children:"Please enter your first name"})]}),(0,p.jsxs)("div",{className:"form-group mb-2",children:[(0,p.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),(0,p.jsx)("input",{type:"text",id:"lastName",className:"form-control ".concat(N.lastName&&"errorInputField"),required:!0,onChange:e=>x(e.target.value,"lastName")}),N.lastName&&(0,p.jsx)("div",{className:"error",children:"Please enter your last name"})]}),(0,p.jsxs)("div",{className:"form-group mb-2",children:[(0,p.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,p.jsx)("input",{type:"email",id:"email",className:"form-control ".concat(N.email&&"errorInputField"),required:!0,onChange:e=>x(e.target.value,"email")}),N.email&&(0,p.jsx)("div",{className:"error",children:N.message?"Please enter a valid email":"Please enter your email"})]}),(0,p.jsxs)("div",{className:"form-group mb-2",children:[(0,p.jsx)("label",{htmlFor:"phoneNumber",className:"form-label",children:"Phone Number"}),(0,p.jsx)("input",{type:"number",id:"phoneNumber",className:"form-control ".concat(N.phoneNumber&&"errorInputField"),required:!0,onChange:e=>x(e.target.value,"phoneNumber")}),N.phoneNumber&&(0,p.jsx)("div",{className:"error",children:"Please enter valid phoneNumber number"})]}),(0,p.jsxs)("div",{className:"form-group mb-2",children:[(0,p.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,p.jsx)("input",{type:"password",id:"password",className:"form-control ".concat(N.password&&"errorInputField"),required:!0,onChange:e=>x(e.target.value,"password")}),N.password&&(0,p.jsx)("div",{className:"error",children:"Please enter your password"})]}),(0,p.jsx)("button",{className:"btn btn-dark w-100 mt-2",onClick:s=>(async s=>{try{s.preventDefault();const a=t(v);if(b(a),a.phoneNumber||a.firstName||a.lastName||a.email||a.password)return;const i={method:"POST",body:v};n(!0);const l=await f.callApi("auth/createUser",i);200==l.status?(n(!1),r((0,o.x4)({userId:l.data.id,accessToken:l.data.accessToken,role:l.data.role,firstName:l.data.firstName,lastName:l.data.lastName,email:l.data.email,contact:l.data.phoneNumber})),e("/")):(n(!1),(0,d.Z)("Error",l.data.errorMessage||"Something went wrong","error"))}catch(N){console.error("Something went wrong")}})(s),children:"SIGN UP"}),(0,p.jsx)("div",{className:"text-center mt-2",children:(0,p.jsxs)("p",{children:["Already a member? ",(0,p.jsx)(l.rU,{to:"/sign-in",children:"Sign In"})]})}),(0,p.jsx)("span",{style:{display:"block",textAlign:"center",margin:"0.7rem 0"},children:" OR  "}),(0,p.jsx)("div",{id:"SignInWithGoogle",style:{display:"flex",justifyContent:"center"}})]})]})})]})}},30456:function(e,r,s){function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidCharacterError";var t="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var s,t,n=0,o=0,i="";t=r.charAt(o++);~t&&(s=n%4?64*s+t:t,n++%4)?i+=String.fromCharCode(255&s>>(-2*n&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return i};function n(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(t(e).replace(/(.)/g,(function(e,r){var s=r.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s})))}(r)}catch(e){return t(r)}}function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",r.Z=function(e,r){if("string"!=typeof e)throw new o("Invalid token specified");var s=!0===(r=r||{}).header?0:1;try{return JSON.parse(n(e.split(".")[s]))}catch(e){throw new o("Invalid token specified: "+e.message)}}}}]);
//# sourceMappingURL=9228.87675977.chunk.js.map