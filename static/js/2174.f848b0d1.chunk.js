"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[2174],{95634:function(e,a,t){var c=t(72791),s=t(80184);class l extends c.Component{constructor(){var e;super(...arguments),this.state={elementId:"",text:"",isDeleting:!1,loopNum:0,typingSpeed:150,searchContent:null!==(e=sessionStorage.getItem("emsebach"))&&void 0!==e?e:"",typingTimer:null},this.handleType=()=>{const{dataText:e,dataElementId:a}=this.props,{isDeleting:t,loopNum:c,text:s,typingSpeed:l}=this.state,i=e[c%e.length];this.setState({text:t?i.substring(0,s.length-1):i.substring(0,s.length+1),typingSpeed:t?30:150,elementId:a}),t||s!==i?t&&""===s&&this.setState({isDeleting:!1,loopNum:c+1}):setTimeout((()=>this.setState({isDeleting:!0})),500),setTimeout(this.handleType,l)},this.handleChange=e=>{e.persist(),sessionStorage.setItem("emsebach",e.target.value),e.target.value&&this.props.navigate("/search?query=".concat(e.target.value)),this.setState({searchContent:e.target.value})},this.optimisedHandleChange=e=>{clearTimeout(this.state.typingTimer);let a=setTimeout((()=>{this.handleChange(e)}),1e3);this.setState({typingTimer:a})}}componentDidMount(){this.handleType()}render(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"".concat("mobileSearchBar"==this.state.elementId?"col-sm-12 p-2 mobileSearchContainer":this.state.elementId),children:(0,s.jsx)("form",{className:"nosubmit ".concat(this.state.elementId),onSubmit:e=>{e.preventDefault()},children:(0,s.jsx)("input",{className:"nosubmit",autoFocus:this.props.autoFocus,defaultValue:this.props.searchValue,type:"search",placeholder:this.state.text,onKeyUp:e=>this.optimisedHandleChange(e)})})})})}}a.Z=l},50226:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var c=t(72791),s=t(57689),l=t(4646),i=t(27117),r=t(72881),n=t(11087),o=t(33419),d=t(763),h=t(14902),u=t(95634),p=t(89404),m=t(80184);const g=new i.Z;var v=e=>{var a;const t=(0,s.s0)(),i=(0,s.TH)(),[v,b]=(0,c.useState)(!1),[x,f]=(0,c.useState)([]);let[y,j]=(0,c.useState)([]);const[N,k]=(0,c.useState)([]),[S,D]=(0,c.useState)(0),C=(0,s.UO)(),[T,F]=(0,n.lr)(),w=T.get("query");sessionStorage.setItem("emsebach",null!==w&&void 0!==w?w:"");let E=null===C||void 0===C?void 0:C.name;E=null===(a=E)||void 0===a?void 0:a.replaceAll("-"," ");const[P,A]=(0,c.useState)(E),[B,I]=(0,c.useState)(null),[q,H]=(0,c.useState)([]),[O,G]=(0,c.useState)(e.type),Z=(0,c.useRef)([]),[V,M]=(0,c.useState)([]);let[U,R]=(0,c.useState)([]),[W,_]=(0,c.useState)([]),[K,Q]=(0,c.useState)([]),[z,J]=(0,c.useState)([]);const[L,X]=(0,c.useState)("");let Y="bath & body",$=[],ee=[];"perfume"==P?($=[[0,500],[500,1e3],[1e3,3e3],[3e3,9999]],ee=[15,30,100,150]):P==Y?($=[[395],[595],[695],[795]],ee=[125,150,200,250,300]):"giftset"==P?($=[[1235],[1490],[1690],[1785],[2530]],ee=[45,60,280,450]):($=[[0,500],[500,1e3],[1e3,3e3],[3e3,9999]],ee=[15,30,100,150]),(0,c.useEffect)((()=>{G(null===e||void 0===e?void 0:e.type)}),[e]);const ae=(0,c.useCallback)((async()=>{try{var e;b(!0);const r={method:"GET"};let n;var a,t,c,s,l,i;if(n="hierarchy"==O?await g.callApi("/product/getProductsByMajorHierarchy/".concat(P||""),r):"search"==O?await g.callApi("/product/searchProducts?q=".concat(w||""),r):"fragrances"==O?await g.callApi("/product/getProductsByFragrance/".concat(P||""),r):"bestseller"==O?await g.callApi("/product/bestSellerProducts",r):await g.callApi("/product/getProductsByGender/".concat(P||""),r),200==(null===(e=n)||void 0===e?void 0:e.status))b(!1),f(null===(a=n)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data),j(null===(c=n)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.data),k(null===(l=n)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.data);else f([]),j([]),k([]),b(!1)}catch(r){b(!1)}}),[P,w,O]);(0,c.useEffect)((()=>{let e;e=1===S?[...y].sort((function(e,a){return e.productDetails.productDiscountPrice-a.productDetails.productDiscountPrice})):2===S?[...y].sort((function(e,a){return a.productDetails.productDiscountPrice-e.productDetails.productDiscountPrice})):y,k(e)}),[y,S]),(0,c.useEffect)((()=>{(0,p.Z)("View Products")}),[]);const te=(0,c.useCallback)((async()=>{try{const t={method:"GET"},c=await g.callApi("/hierarchy/getHierarchyDetailsByName/".concat(P||""),t);var e,a;if(200==(null===c||void 0===c?void 0:c.status))I(null===c||void 0===c||null===(e=c.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.hierarchyName)}catch(t){}}),[P]),ce=(0,c.useCallback)((async()=>{b(!0);let e=await g.callApi("/hierarchy/getAllFragrances",{method:"GET"});var a;200==(null===e||void 0===e?void 0:e.status)&&M(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data.map((e=>({value:e.id,label:e.fragranceName}))))}),[]),se=(0,c.useCallback)((async()=>{let e=await g.callApi("/hierarchy/getHierarchyTreeByName/".concat(P||""),{method:"GET"});var a;200==(null===e||void 0===e?void 0:e.status)&&H(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data)}),[]);(0,c.useEffect)((()=>{"search"!=O&&ae(),"hierarchy"==O&&(te(),P!=Y&&ce(),se()),"search"!=O&&"gender"!=O||ce()}),[P,O]),(0,c.useEffect)((()=>{"search"==O&&ae()}),[w,O]),(0,c.useEffect)((()=>{var e;let a=C.name;a=null===(e=a)||void 0===e?void 0:e.replaceAll("-"," "),A(a)}),[C]);const le=(e,a)=>{if(a)U=[...U,e];else{const a=U.indexOf(e);a>-1&&U.splice(a,1)}R([...U])},ie=(e,a)=>{if(a)W=[...W,e];else{const a=W.indexOf(e);a>-1&&W.splice(a,1)}_([...W])},re=(e,a)=>{if(a)K=[...K,e];else{let a=0,t=!1;K.every(((c,s)=>!(0,d.isEqual)(c,e)||(a=s,t=!0,!1))),t&&K.splice(a,1)}Q([...K])},ne=(e,a)=>{if(a)z=[...z,e];else{const a=z.indexOf(e);a>-1&&z.splice(a,1)}J([...z])},oe=()=>{b(!0),y=[...x],Z.current.length&&(y=[...y.filter((e=>Z.current.includes(e.hierarchyId)))]),U.length&&(y=[...y.filter((e=>U.some((a=>e.productDetails.attributeNumericValue==a))))]),K.length&&(y=K[0].length>1?[...y.filter((e=>K.some((a=>e.productDetails.productDiscountPrice>a[0]&&e.productDetails.productDiscountPrice<a[1]))))]:[...y.filter((e=>K.some((a=>e.productDetails.productDiscountPrice==a[0]))))]),z.length&&(y=[...y.filter((e=>z.includes(e.fragranceId)))]),W.length&&(y=[...y.filter((e=>W.includes(e.gender)))]),j([...y]),b(!1)},de=e=>{Z.current=e};return(0,c.useEffect)((()=>{X(sessionStorage.getItem("emsebach"))}),[sessionStorage]),(0,m.jsxs)(m.Fragment,{children:[v?(0,m.jsx)(r.Z,{}):null,(0,m.jsx)(u.Z,{dataElementId:"mobileSearchBar",dataText:["Search Perfumes","Bath and Body","Search Gift Sets"],autoFocus:"/search"==i.pathname,navigate:t,searchValue:L}),(0,m.jsx)("div",{className:"container-fluid py-lg-3 py-2",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-lg-2 d-none d-lg-block py-3 productsFilters",children:[B?(0,m.jsx)("div",{className:"mb-3 ps-1",children:(0,m.jsxs)("strong",{children:["HOME - ",B]})}):"",(0,m.jsxs)("div",{className:"accordion",id:"accordionExample",children:["hierarchy"==O&&q.length?(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingOne",children:(0,m.jsx)("button",{className:"accordion-button filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:"Categories"})}),(0,m.jsx)("div",{id:"collapseOne",className:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:(0,m.jsx)(h.Z,{convertedHierarchy:q,handleChangeHierarchy:de})})})]}):"","gender"!=O?(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingFive",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFive","aria-expanded":"false","aria-controls":"collapseFive",children:"Gender"})}),(0,m.jsx)("div",{id:"collapseFive",className:"accordion-collapse collapse","aria-labelledby":"headingFive","data-bs-parent":"#accordionExample",children:(0,m.jsxs)("div",{className:"accordion-body",children:[(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:"0-20ml",id:"quantity1",onChange:e=>ie("Men",e.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"quantity1",children:"Men"})]}),(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:"20-50ml",id:"quantity2",onChange:e=>ie("Women",e.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"quantity2",children:"Women"})]}),(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:"50-100ml",id:"quantity3",onChange:e=>ie("Unisex",e.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"quantity3",children:"Unisex"})]})]})})]}):"",(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingTwo",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo",children:"Volume"})}),(0,m.jsx)("div",{id:"collapseTwo",className:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:ee.map(((e,a)=>(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"quantity".concat(a+1),onChange:a=>le(e,a.target.checked)}),(0,m.jsxs)("label",{className:"form-check-label",for:"quantity".concat(a+1),children:[e,"ml"]})]})))})})]}),(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingThree",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree",children:"Price"})}),(0,m.jsx)("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:$.map(((e,a)=>e.length>1?(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"price".concat(a+1),onChange:a=>re(e,a.target.checked)}),(0,m.jsxs)("label",{className:"form-check-label",for:"price".concat(a+1),children:["\u20b9",e[0]," - \u20b9 ",9999==e[1]?"above":e[1]]})]}):(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"price".concat(a+1),onChange:a=>re(e,a.target.checked)}),(0,m.jsxs)("label",{className:"form-check-label",for:"price".concat(a+1),children:["\u20b9",e[0]]})]})))})})]}),V.length?(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingFour",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-expanded":"false","aria-controls":"collapseFour",children:"Fragrance Family"})}),(0,m.jsx)("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:V.map(((e,a)=>(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:e.label,id:"fragrance".concat(a),onChange:a=>ne(e.value,a.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"fragrance".concat(a),children:e.label})]})))})})]}):""]}),(0,m.jsx)("div",{className:"applyFilterBtn",children:(0,m.jsx)("button",{onClick:oe,children:"Apply Filter"})})]}),(0,m.jsx)("div",{className:"col-lg-10",children:(0,m.jsxs)("div",{className:"row gx-2",children:[null===N||void 0===N?void 0:N.map((e=>(0,m.jsx)("div",{className:"col-6 col-md-4 col-lg-3",children:(0,m.jsx)(l.Z,{cardClass:"productsDetails",id:e.id,productVariantId:e.productDetails.id,name:e.productName,src:"https://embarkperfumes.com/api/"+e.productDetails.pictureUrl,originalPrice:e.productDetails.productPrice,title:e.productName,price:e.productDetails.productDiscountPrice,attributeCombination:e.productDetails.attributeCombination,bestSellerStatus:e.productDetails.bestSellerStatus,isActive:e.productDetails.isActive,isNew:e.productDetails.isNew,rating:e.productDetails.rating,ratingCount:e.productDetails.ratingCount})}))),v?(0,m.jsx)(m.Fragment,{}):0==(null===N||void 0===N?void 0:N.length)?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:(0,m.jsx)("div",{className:"fs-3 fw-bold",children:"No Data"})}):(0,m.jsx)(m.Fragment,{})]})})]})}),(0,m.jsx)(o.Z,{fragrances:V,type:O,convertedHierarchy:q,handleOnApplyFilter:oe,handleChangeHierarchy:de,handleFragranceChange:ne,handlePriceChange:re,handleGenderChange:ie,handleQuantityChange:le,handleButtonActive:D,buttonActive:S,priceRange:$,volumeRange:ee,name:P})]})}}}]);
//# sourceMappingURL=2174.f848b0d1.chunk.js.map