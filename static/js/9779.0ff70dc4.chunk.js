"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[9779],{65238:function(e,a,t){t.d(a,{Z:function(){return f}});var s=t(74165),r=t(15861),n=t(15671),l=t(43144),o=t(60136),i=t(27277),d=t(74569),c=t.n(d),m=(0,l.Z)((function e(a){var t=this;(0,n.Z)(this,e),this._initializeResponseInterceptor=function(){t.instance.interceptors.response.use(t._handleResponse,t._handleError)},this._handleResponse=function(e){return e},this._handleError=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(a){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.response,r=a.config,r,e.abrupt("return",Promise.resolve(t));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),this.instance=c().create({baseURL:a}),this._initializeResponseInterceptor()})),u=m,p=t(69441),f=function(e){(0,o.Z)(t,e);var a=(0,i.Z)(t);function t(){var e;return(0,n.Z)(this,t),(e=a.call(this,"https://embarkperfumes.com/api"))._initializeRequestInterceptor=function(){e.instance.interceptors.request.use(e._handleRequest)},e._handleRequest=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(a){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=p.Z.getState().user.currentUser.accessToken)&&(a.headers.Authorization=t),sessionStorage.getItem("session-id")&&(a.headers["session-id"]=sessionStorage.getItem("session-id")),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),e._initializeRequestInterceptor(),e}return(0,l.Z)(t,[{key:"callApi",value:function(e,a){return this.instance({method:a.method,url:e,headers:null!==a&&void 0!==a&&a.header?null===a||void 0===a?void 0:a.header:{},data:null!==a&&void 0!==a&&a.body?null===a||void 0===a?void 0:a.body:void 0,onUploadProgress:null!==a&&void 0!==a&&a.onUploadProgress?null===a||void 0===a?void 0:a.onUploadProgress:void 0})}}]),t}(u)},89404:function(e,a,t){var s=t(29439),r=t(37762),n=new(t(65238).Z);a.Z=function(e){if(sessionStorage.getItem("session-id")&&(l=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(l)))n.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");var a=function(e){var a,t=new URLSearchParams(window.location.search),n={},l=(0,r.Z)(t);try{for(l.s();!(a=l.n()).done;){var o=(0,s.Z)(a.value,2),i=o[0],d=o[1];i.includes(e)&&(n[i]=d)}}catch(c){l.e(c)}finally{l.f()}return n}("utm"),t={method:"POST",body:{additionalDetails:a,event:e}};n.callApi("/session/createNewSession",t).then((function(e){sessionStorage.setItem("session-id",e.data.data)}))}var l}},8055:function(e,a,t){t.r(a);var s=t(74165),r=t(15861),n=t(4942),l=t(1413),o=t(29439),i=t(72791),d=t(26022),c=t(65238),m=t(57689),u=t(11087),p=t(24459),f=t(24054),h=t(6978),v=t(69441),N=t(89404),g=t(80184),b=new c.Z;a.default=function(){var e=(0,m.UO)().addressType,a=(0,u.lr)(),t=(0,o.Z)(a,2),c=t[0],y=(t[1],v.Z.getState().user.currentUser),x=c.get("id"),j=c.get("firstAddress"),Z="",S="",A="",k="";j&&"true"==j&&(Z=y.firstName,S=y.lastName,A=y.email,k=y.contact);var F=(0,m.s0)();["billing-address","shipping-address"].includes(e)||F("/404");var I,C,P,w=(0,i.useState)({firstName:!1,lastName:!1,email:!1,state:!1,streetAddress:!1,city:!1,postcode:!1,phone:!1,message:""}),_=(0,o.Z)(w,2),q=_[0],E=_[1],R=(0,i.useState)({firstName:Z,lastName:S,email:A,companyName:"",gstNumber:"",country:"India",state:"",streetAddress:"",landmark:"",city:"",postcode:"",phone:k}),O=(0,o.Z)(R,2),T=O[0],U=O[1],z=(0,i.useState)("IN"),D=(0,o.Z)(z,2),L=D[0],B=(D[1],(0,i.useState)("")),G=(0,o.Z)(B,2),H=G[0],V=G[1],$=(0,i.useState)({label:null}),J=(0,o.Z)($,2),K=J[0],M=J[1],Q=(sessionStorage.getItem("add"),function(e,a){U((0,l.Z)((0,l.Z)({},T),{},(0,n.Z)({},a,e))),(!0===q.email||!0===q.city||!0===q.firstName||!0===q.lastName||!0===q.country||q.phone||q.postcode||q.state||q.streetAddress)&&E((0,l.Z)((0,l.Z)({},q),{},(0,n.Z)({},a,!1)))}),W=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var a,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"GET"},e.next=3,b.callApi("user/getAddressById/".concat(x),a);case 3:200==(t=e.sent).status&&(U((0,l.Z)((0,l.Z)({},T),{},{id:t.data.data.id,firstName:t.data.data.firstName,lastName:t.data.data.lastName,email:t.data.data.email,companyName:t.data.data.companyName,gstNumber:t.data.data.gstNumber,country:t.data.data.country,state:t.data.data.state,streetAddress:t.data.data.streetAddress,landmark:t.data.data.landmark,city:t.data.data.city,postcode:t.data.data.pincode+"",phone:t.data.data.contact})),M({label:t.data.data.city}),V(t.data.data.stateId));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var a=(0,r.Z)((0,s.Z)().mark((function a(t){var r,n;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t.preventDefault(),r=(0,d.C)(T),null==K.label?E((0,l.Z)((0,l.Z)({},r),{},{city:!0})):E(r),!(r.city||r.firstName||r.lastName||r.email||r.country||r.phone||r.postcode||r.state||r.streetAddress||null==K.label)){a.next=6;break}return a.abrupt("return");case 6:return n={method:"POST",body:(0,l.Z)((0,l.Z)({},T),{},{selectedStateId:H,addressType:"billing-address"==e?"billing":"shipping"})},a.next=9,b.callApi("user/createEditAddresses",n);case 9:200==a.sent.status&&F("/checkout"),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),console.error("Something went wrong");case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}();return(0,i.useEffect)((function(){x&&W()}),[]),(0,i.useEffect)((function(){(0,N.Z)("Add/Edit Address")}),[]),(0,g.jsxs)("div",{className:"edit-account-container container",style:{backgroundColor:"white"},children:[(0,g.jsx)("div",{className:"text-style mt-4",children:"billing-address"===e?"Billing address":"Shipping address"}),(0,g.jsxs)("form",{children:[(0,g.jsxs)("div",{className:"row",style:{marginTop:"25px"},children:[(0,g.jsxs)("div",{className:"col-sm-12 col-lg-6 form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),(0,g.jsx)("input",{type:"text",id:"firstName",className:"form-control ".concat(q.firstName?"errorInputField":""),required:!0,onChange:function(e){return Q(e.target.value,"firstName")},value:null===T||void 0===T?void 0:T.firstName}),q.firstName&&(0,g.jsx)("div",{className:"error",children:"Please enter your first name"})]}),(0,g.jsxs)("div",{className:"col form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),(0,g.jsx)("input",{type:"text",id:"lastName",className:"form-control ".concat(q.lastName?"errorInputField":""),required:!0,onChange:function(e){return Q(e.target.value,"lastName")},value:null===T||void 0===T?void 0:T.lastName}),q.lastName&&(0,g.jsx)("div",{className:"error",children:"Please enter your last name"})]})]}),(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"companyName",className:"form-label",children:"Company name (Optional)"}),(0,g.jsx)("input",{type:"text",id:"companyName",className:"form-control",onChange:function(e){return Q(e.target.value,"companyName")},value:null===T||void 0===T?void 0:T.companyName})]}),(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"gstNumber",className:"form-label",children:"GST No. (Optional)"}),(0,g.jsx)("input",{type:"text",id:"gstNumber",className:"form-control",onChange:function(e){return Q(e.target.value,"gstNumber")},value:null===T||void 0===T?void 0:T.gstNumber})]}),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsxs)("div",{className:"col-sm-12 col-lg-6 form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"streetAddress",className:"form-label",children:"Address"}),(0,g.jsx)("input",{type:"text",id:"streetAddress",className:"form-control ".concat(q.streetAddress?"errorInputField":""),required:!0,onChange:function(e){return Q(e.target.value,"streetAddress")},value:null===T||void 0===T?void 0:T.streetAddress}),q.streetAddress&&(0,g.jsx)("div",{className:"error",children:"Please enter your address"})]}),(0,g.jsxs)("div",{className:"col form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"landmark",className:"form-label",children:"Landmark (Optional)"}),(0,g.jsx)("input",{type:"text",id:"landmark",className:"form-control",onChange:function(e){return Q(e.target.value,"landmark")},value:null===T||void 0===T?void 0:T.landmark})]})]}),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsxs)("div",{className:"col-sm-12 col-lg-6 form-group mb-2",children:[(0,g.jsx)("label",{className:"form-label",children:"Country"}),(0,g.jsx)(h.ZP,{className:"".concat(q.country?"errorSelectField":""),options:[{label:"India",value:"India",id:"IN"}],onChange:function(e){Q(e.value,"country")},value:{label:"India"}})]}),(0,g.jsxs)("div",{className:"col form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"state",className:"form-label",children:"State"}),(0,g.jsx)(h.ZP,{className:"".concat(q.state?"errorSelectField":""),options:(P=L,p.ZP.getStatesOfCountry(P).map((function(e){return{label:e.name,value:e.name,id:e.isoCode}}))),onChange:function(e){V(e.id),M({label:null}),Q(e.value,"state")},value:T.state&&{label:T.state}}),q.state&&(0,g.jsx)("div",{className:"error",children:"Please enter your state"})]})]}),(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"city",className:"form-label",children:"City"}),(0,g.jsx)(h.ZP,{className:"".concat(q.city?"errorSelectField":""),options:(I=L,C=H||null,f.Z.getCitiesOfState(I,C).map((function(e){return{label:e.name,value:e.name}}))),onChange:function(e){M({label:e.value}),Q(e.value,"city")},value:K.label&&K}),q.city&&(0,g.jsx)("div",{className:"error",children:"Please enter your city"})]}),(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"postcode",className:"form-label",children:"Pincode"}),(0,g.jsx)("input",{type:"number",id:"postcode",className:"form-control ".concat(q.postcode?"errorInputField":""),required:!0,onChange:function(e){return Q(e.target.value,"postcode")},value:null===T||void 0===T?void 0:T.postcode}),q.postcode&&(0,g.jsx)("div",{className:"error",children:"Please enter your pincode"})]}),(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"phone",className:"form-label",children:"Phone"}),(0,g.jsx)("input",{type:"number",id:"phone",className:"form-control ".concat(q.phone?"errorInputField":""),required:!0,onChange:function(e){return Q(e.target.value,"phone")},value:null===T||void 0===T?void 0:T.phone}),q.phone&&(0,g.jsx)("div",{className:"error",children:"Please enter valid phone number"})]}),(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,g.jsx)("input",{type:"email",id:"email",className:"form-control ".concat(q.email?"errorInputField":""),required:!0,onChange:function(e){return Q(e.target.value,"email")},value:null===T||void 0===T?void 0:T.email}),q.email&&(0,g.jsx)("div",{className:"error",children:q.message?"Please enter a valid email":"Please enter your email"})]}),(0,g.jsx)("button",{className:"btn btn-dark mt-5 mb-2",onClick:function(e){return X(e)},children:"SAVE ADDRESS"})]})]})}},26022:function(e,a,t){t.d(a,{C:function(){return r},H:function(){return s}});var s=function(e){var a=e.firstName,t=e.lastName,s=e.email,r={firstName:!1,lastName:!1,email:!1,message:""};return a||(r.firstName=!0),t||(r.lastName=!0),s||(r.email=!0),s&&!/\S+@\S+\.\S+/.test(s)&&(r.email=!0,r.message="invalid email"),r},r=function(e){var a=e.firstName,t=e.lastName,s=e.email,r=e.state,n=e.streetAddress,l=e.city,o=e.postcode,i=e.phone,d={firstName:!1,lastName:!1,email:!1,state:!1,streetAddress:!1,city:!1,postcode:!1,phone:!1,message:""};return a||(d.firstName=!0),t||(d.lastName=!0),s||(d.email=!0),s&&!/\S+@\S+\.\S+/.test(s)&&(d.email=!0,d.message="invalid email"),r||(d.state=!0),n||(d.streetAddress=!0),l||(d.city=!0),o||(d.postcode=!0),i||(d.phone=!0),i&&10!=i.length&&(d.phone=!0),d}}}]);
//# sourceMappingURL=9779.0ff70dc4.chunk.js.map