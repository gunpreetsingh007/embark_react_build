"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[1148],{65238:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(74165),a=n(15861),i=n(15671),s=n(43144),o=n(60136),u=n(27277),c=n(74569),d=n.n(c),l=(0,s.Z)((function e(t){var n=this;(0,i.Z)(this,e),this._initializeResponseInterceptor=function(){n.instance.interceptors.response.use(n._handleResponse,n._handleError)},this._handleResponse=function(e){return e},this._handleError=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.response,a=t.config,a,e.abrupt("return",Promise.resolve(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.instance=d().create({baseURL:t}),this._initializeResponseInterceptor()})),f=l,h=n(69441),p=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this,"http://localhost:8085/api"))._initializeRequestInterceptor=function(){e.instance.interceptors.request.use(e._handleRequest)},e._handleRequest=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=h.Z.getState().user.currentUser.accessToken)&&(t.headers.Authorization=n),sessionStorage.getItem("session-id")&&(t.headers["session-id"]=sessionStorage.getItem("session-id")),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e._initializeRequestInterceptor(),e}return(0,s.Z)(n,[{key:"callApi",value:function(e,t){return this.instance({method:t.method,url:e,headers:null!==t&&void 0!==t&&t.header?null===t||void 0===t?void 0:t.header:{},data:null!==t&&void 0!==t&&t.body?null===t||void 0===t?void 0:t.body:void 0,onUploadProgress:null!==t&&void 0!==t&&t.onUploadProgress?null===t||void 0===t?void 0:t.onUploadProgress:void 0})}}]),n}(f)},71148:function(e,t,n){n.r(t);var r=n(74165),a=n(15861),i=n(29439),s=n(72791),o=n(57689),u=n(59434),c=n(65238),d=n(46799),l=n(21830),f=n.n(l),h=n(58086),p=n.n(h),v=n(72881),m=n(80184),Z=new c.Z,b=p()(f());t.default=function(e){var t=(0,u.I0)(),n=(0,o.s0)(),c=e.accessCode,l=e.Component,f=(0,s.useState)(null),h=(0,i.Z)(f,2),p=h[0],g=h[1],k=(0,s.useCallback)((0,a.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET"},e.next=3,Z.callApi("/user/me",n);case 3:200===(null===(a=e.sent)||void 0===a?void 0:a.status)?(t((0,d.Nq)({role:a.data.data.role,userId:a.data.data.id,firstName:a.data.data.firstName,lastName:a.data.data.lastName,email:a.data.data.email,contact:a.data.data.phoneNumber})),g(a.data.data.role)):g("sign-in-required");case 5:case"end":return e.stop()}}),e)}))),[]);if((0,s.useLayoutEffect)((function(){k()}),[]),!p)return(0,m.jsx)(v.Z,{});if("sign-in-required"==p)b.fire({text:"You need to sign in to continue",buttons:{OK:{text:"OK",value:"OK"}}}).then((function(e){if(null!==e&&void 0!==e&&e.isConfirmed)return n("/sign-in")}));else{if(c.includes(p))return l;b.fire({text:"You are not authorized",buttons:{OK:{text:"OK",value:"OK"}}}).then((function(e){if(null!==e&&void 0!==e&&e.isConfirmed)return n(-1)}))}}}}]);
//# sourceMappingURL=1148.2ce1f618.chunk.js.map