"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[9913],{65238:function(e,r,n){n.d(r,{Z:function(){return m}});var t=n(74165),a=n(15861),s=n(15671),o=n(43144),i=n(60136),c=n(27277),l=n(74569),u=n.n(l),d=(0,o.Z)((function e(r){var n=this;(0,s.Z)(this,e),this._initializeResponseInterceptor=function(){n.instance.interceptors.response.use(n._handleResponse,n._handleError)},this._handleResponse=function(e){return e},this._handleError=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.response,a=r.config,a,e.abrupt("return",Promise.resolve(n));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),this.instance=u().create({baseURL:r}),this._initializeResponseInterceptor()})),h=d,p=n(69441),m=function(e){(0,i.Z)(n,e);var r=(0,c.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=r.call(this,"http://localhost:8085/api"))._initializeRequestInterceptor=function(){e.instance.interceptors.request.use(e._handleRequest)},e._handleRequest=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=p.Z.getState().user.currentUser.accessToken)&&(r.headers.Authorization=n),sessionStorage.getItem("session-id")&&(r.headers["session-id"]=sessionStorage.getItem("session-id")),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e._initializeRequestInterceptor(),e}return(0,o.Z)(n,[{key:"callApi",value:function(e,r){return this.instance({method:r.method,url:e,headers:null!==r&&void 0!==r&&r.header?null===r||void 0===r?void 0:r.header:{},data:null!==r&&void 0!==r&&r.body?null===r||void 0===r?void 0:r.body:void 0,onUploadProgress:null!==r&&void 0!==r&&r.onUploadProgress?null===r||void 0===r?void 0:r.onUploadProgress:void 0})}}]),n}(h)},89404:function(e,r,n){var t=n(29439),a=n(37762),s=new(n(65238).Z);r.Z=function(e){if(sessionStorage.getItem("session-id")&&(o=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(o)))s.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");var r=function(e){var r,n=new URLSearchParams(window.location.search),s={},o=(0,a.Z)(n);try{for(o.s();!(r=o.n()).done;){var i=(0,t.Z)(r.value,2),c=i[0],l=i[1];c.includes(e)&&(s[c]=l)}}catch(u){o.e(u)}finally{o.f()}return s}("utm"),n={method:"POST",body:{additionalDetails:r,event:e}};s.callApi("/session/createNewSession",n).then((function(e){sessionStorage.setItem("session-id",e.data.data)}))}var o}},67604:function(e,r,n){var t=n(74165),a=n(15861),s=n(21830),o=n.n(s),i=n(58086),c=n.n(i),l=n(80184),u=c()(o()),d=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n,a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.fire({title:(0,l.jsx)("strong",{children:r}),html:(0,l.jsx)("p",{children:n}),icon:a}));case 1:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}();r.Z=d},9913:function(e,r,n){n.r(r),n.d(r,{default:function(){return x}});var t=n(74165),a=n(15861),s=n(4942),o=n(1413),i=n(29439),c=n(72791),l=function(e){var r=e.emailOrPhone,n=e.password,t={emailOrPhone:!1,password:!1,message:""};return r||(t.emailOrPhone=!0),(r&&isNaN(r)&&!/\S+@\S+\.\S+/.test(r)||!isNaN(r)&&10!=r.length)&&(t.emailOrPhone=!0,t.message="invalid emailOrPhone"),n||(t.password=!0),t},u=n(57689),d=n(11087),h=n(46799),p=n(65238),m=n(59434),f=n(72881),g=n(67604),v=n(30456),w=n(89404),b=n(80184),Z=new p.Z;var x=function(){var e=(0,u.s0)(),r=(0,m.I0)(),n=(0,d.lr)(),p=(0,i.Z)(n,2),x=p[0],k=(p[1],(0,c.useState)(x.get("target")||null)),N=(0,i.Z)(k,2),y=N[0],S=(N[1],(0,c.useState)(!1)),I=(0,i.Z)(S,2),P=I[0],j=I[1],O=(0,c.useState)({emailOrPhone:!1,password:!1,message:""}),A=(0,i.Z)(O,2),E=A[0],R=A[1],_=(0,c.useState)({emailOrPhone:"",password:""}),C=(0,i.Z)(_,2),F=C[0],T=C[1],U=function(e,r){T((0,o.Z)((0,o.Z)({},F),{},(0,s.Z)({},r,e))),!0!==E.emailOrPhone&&!0!==E.password||R((0,o.Z)((0,o.Z)({},E),{},(0,s.Z)({},r,!1)))},q=window.google,z=function(){var n=(0,a.Z)((0,t.Z)().mark((function n(a){var s,o,i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a.preventDefault(),s=l(F),R(s),!s.emailOrPhone&&!s.password){n.next=6;break}return n.abrupt("return");case 6:return o={method:"POST",body:F},j(!0),n.next=10,Z.callApi("auth/login",o);case 10:200==(i=n.sent).status?(j(!1),r((0,h.x4)({userId:i.data.id,accessToken:i.data.accessToken,role:i.data.role,firstName:i.data.firstName,lastName:i.data.lastName,email:i.data.email,contact:i.data.phoneNumber})),e("checkout"==y?"/checkout":"cart"==y?"/cart":"/")):(j(!1),(0,g.Z)("Error",i.data.errorMessage||"Something went wrong","error")),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Something went wrong");case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}(),G=function(){var n=(0,a.Z)((0,t.Z)().mark((function n(a){var s,o,i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=(0,v.Z)(a.credential),o={method:"POST",body:s},n.prev=2,j(!0),n.next=6,Z.callApi("auth/loginWithGoogle",o);case 6:200==(i=n.sent).status?(j(!1),r((0,h.x4)({userId:i.data.id,accessToken:i.data.accessToken,role:i.data.role,firstName:i.data.firstName,lastName:i.data.lastName,email:i.data.email,contact:i.data.phoneNumber})),e("checkout"==y?"/checkout":"/")):(j(!1),(0,g.Z)("Error",i.data.errorMessage||"Something went wrong","error")),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.error("Something went wrong");case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){q.accounts.id.initialize({client_id:"565815563901-1aifse56er87bilok6i98r9p5h8pnhsu.apps.googleusercontent.com",callback:G}),q.accounts.id.renderButton(document.getElementById("SignInWithGoogle"),{theme:"outline",size:"large"})}),[]),(0,c.useEffect)((function(){(0,w.Z)("Sign In")}),[]),(0,b.jsxs)(b.Fragment,{children:[P?(0,b.jsx)(f.Z,{}):null,(0,b.jsx)("div",{className:"signIn-wrapper bg-dark d-flex align-item-center justify-content-center w-100",children:(0,b.jsxs)("div",{className:"signIn",children:[(0,b.jsx)("h2",{className:"mb-3",children:"Sign In"}),(0,b.jsxs)("form",{children:[(0,b.jsxs)("div",{className:"form-group mb-2",children:[(0,b.jsx)("label",{htmlFor:"emailOrPhone",className:"form-label",children:"Email Address or Phone Number"}),(0,b.jsx)("input",{id:"emailOrPhone",className:"form-control ".concat(E.emailOrPhone&&"errorInputField"),required:!0,onChange:function(e){return U(e.target.value,"emailOrPhone")}}),E.emailOrPhone&&(0,b.jsx)("div",{className:"error",children:E.message?"Please enter a valid email or phone number ":"Please enter your email or phone number"})]}),(0,b.jsxs)("div",{className:"form-group mb-2",children:[(0,b.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,b.jsx)("input",{type:"password",id:"password",className:"form-control ".concat(E.password&&"errorInputField"),required:!0,onChange:function(e){return U(e.target.value,"password")}}),E.password&&(0,b.jsx)("div",{className:"error",children:"Please enter your password"}),(0,b.jsx)("div",{className:"forget-password mt-2",children:(0,b.jsx)(d.rU,{to:"/forget-password",children:(0,b.jsx)("span",{children:"Forgot Password?"})})})]}),(0,b.jsx)("button",{className:"btn btn-dark w-100 mt-2",onClick:function(e){return z(e)},children:"SIGN IN"}),(0,b.jsx)("div",{className:"text-center mt-2",children:(0,b.jsxs)("p",{children:["Not a member? ",(0,b.jsx)(d.rU,{to:"/sign-up",children:"Register"})]})}),(0,b.jsx)("span",{style:{display:"block",textAlign:"center",margin:"0.7rem 0"},children:" OR  "}),(0,b.jsx)("div",{id:"SignInWithGoogle",style:{display:"flex",justifyContent:"center"}})]})]})})]})}},30456:function(e,r,n){function t(e){this.message=e}t.prototype=new Error,t.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,a,s=0,o=0,i="";a=r.charAt(o++);~a&&(n=s%4?64*n+a:a,s++%4)?i+=String.fromCharCode(255&n>>(-2*s&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return i};function s(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,r){var n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(r)}catch(e){return a(r)}}function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",r.Z=function(e,r){if("string"!=typeof e)throw new o("Invalid token specified");var n=!0===(r=r||{}).header?0:1;try{return JSON.parse(s(e.split(".")[n]))}catch(e){throw new o("Invalid token specified: "+e.message)}}}}]);
//# sourceMappingURL=9913.ca8320ea.chunk.js.map