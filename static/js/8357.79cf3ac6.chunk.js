"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[8357],{65238:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(74165),a=n(15861),s=n(15671),i=n(43144),o=n(60136),l=n(27277),c=n(74569),d=n.n(c),u=(0,i.Z)((function e(t){var n=this;(0,s.Z)(this,e),this._initializeResponseInterceptor=function(){n.instance.interceptors.response.use(n._handleResponse,n._handleError)},this._handleResponse=function(e){return e},this._handleError=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.response,a=t.config,a,e.abrupt("return",Promise.resolve(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.instance=d().create({baseURL:t}),this._initializeResponseInterceptor()})),h=u,p=n(69441),f=function(e){(0,o.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this,"https://embarkperfumes.com/api"))._initializeRequestInterceptor=function(){e.instance.interceptors.request.use(e._handleRequest)},e._handleRequest=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=p.Z.getState().user.currentUser.accessToken)&&(t.headers.Authorization=n),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e._initializeRequestInterceptor(),e}return(0,i.Z)(n,[{key:"callApi",value:function(e,t){return this.instance({method:t.method,url:e,headers:null!==t&&void 0!==t&&t.header?null===t||void 0===t?void 0:t.header:{},data:null!==t&&void 0!==t&&t.body?null===t||void 0===t?void 0:t.body:void 0,onUploadProgress:null!==t&&void 0!==t&&t.onUploadProgress?null===t||void 0===t?void 0:t.onUploadProgress:void 0})}}]),n}(h)},67604:function(e,t,n){var r=n(74165),a=n(15861),s=n(21830),i=n.n(s),o=n(58086),l=n.n(o),c=n(80184),d=l()(i()),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.fire({title:(0,c.jsx)("strong",{children:t}),html:(0,c.jsx)("p",{children:n}),icon:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();t.Z=u},38357:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r,a=n(74165),s=n(15861),i=n(1413),o=n(45987),l=n(93433),c=n(29439),d=n(72791),u=n(6713),h=n(12528),p=n(88831),f=(n(60669),n(64197),n(80184)),v=(u.Z.Column,u.Z.ColumnGroup,u.Z.HeaderCell,u.Z.Cell,n(72426)),x=n.n(v),m=n(28029),g=n(85792),j=n(68096),Z=n(66232),C=n(75064),D=n(30168),y=n(17691).ZP.input(r||(r=(0,D.Z)(['\nwidth: 236px;\nheight: 40px;\nborder: 1px solid #A6B0B9;\nborder-radius: 4px;\ncolor: #A6B0B9;\n  padding: 0.56rem 0.25rem 0.56rem 1.875rem;  \nbackground: transparent url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%220.875rem%22%20width%3D%220.75rem%22%20viewBox%3D%220%200%20448%20512%22%3E%3Cpath%20fill%3D%22%23A6B0B9%22%20d%3D%22M0%20464c0%2026.5%2021.5%2048%2048%2048h352c26.5%200%2048-21.5%2048-48V192H0v272zm320-196c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zM192%20268c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012h-40c-6.6%200-12-5.4-12-12v-40zM64%20268c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012H76c-6.6%200-12-5.4-12-12v-40zm0%20128c0-6.6%205.4-12%2012-12h40c6.6%200%2012%205.4%2012%2012v40c0%206.6-5.4%2012-12%2012H76c-6.6%200-12-5.4-12-12v-40zM400%2064h-48V16c0-8.8-7.2-16-16-16h-32c-8.8%200-16%207.2-16%2016v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8%200-16%207.2-16%2016v48H48C21.5%2064%200%2085.5%200%20112v48h448v-48c0-26.5-21.5-48-48-48z%22%2F%3E%3C%2Fsvg%3E") no-repeat 10px center;\n::placeholder {\n    font: normal normal normal 16px/19px "Proxima Nova Rg", sans-serif;\n    letter-spacing: 0px;\n    color: #00000099;\n  }\n']))),E=(n(84778),function(e){var t=e.onChangeDateRange,n=[(new Date).setHours(0,0,0,0),(new Date).setHours(0,0,0,0)],r=[(new Date).setHours(0,0,0,0),(new Date).setHours(0,0,0,0)],a=r[0],s=r[1],i=(0,d.useRef)();(0,d.useEffect)((function(){i.current.setStartDate(null!==a&&void 0!==a?a:n[0]),i.current.setEndDate(null!==s&&void 0!==s?s:n[1])}),[a,s]);return(0,f.jsx)("form",{className:"dateRange",children:(0,f.jsx)(C.Z,{ref:i,initialSettings:{locale:{format:"MMM DD YYYY"},showDropdowns:!0,opens:"left"},onApply:function(e){var n=e.target.value.split(" - ");n=n.map((function(e){return new Date(e)})),t&&t(n)},children:(0,f.jsx)(y,{readOnly:!0})})})}),b=n(65238),w=n(72881),S=n(57689),N=n(67604),A=n(98472),L=["rowData","onChange","checkedKeys","dataKey"],O=["rowData","dataKey"],k=new b.Z,T=function(){var e=(0,S.s0)(),t=u.Z.Column,n=u.Z.HeaderCell,r=u.Z.Cell,v=(0,d.useState)([]),C=(0,c.Z)(v,2),D=C[0],y=C[1],b=(0,d.useState)([]),T=(0,c.Z)(b,2),P=T[0],R=T[1],z=(0,d.useState)(""),M=(0,c.Z)(z,2),I=M[0],K=M[1],F=(0,d.useState)("ALL"),H=(0,c.Z)(F,2),U=H[0],Y=H[1],_=(0,d.useState)([]),B=(0,c.Z)(_,2),V=B[0],q=B[1],G=(0,d.useState)(!1),W=(0,c.Z)(G,2),J=W[0],Q=W[1],X=(0,d.useState)(),$=(0,c.Z)(X,2),ee=$[0],te=$[1],ne=(0,d.useState)(),re=(0,c.Z)(ne,2),ae=re[0],se=re[1],ie=(0,d.useState)(10),oe=(0,c.Z)(ie,2),le=oe[0],ce=oe[1],de=(0,d.useState)(1),ue=(0,c.Z)(de,2),he=ue[0],pe=ue[1],fe=(0,d.useState)([]),ve=(0,c.Z)(fe,2),xe=ve[0],me=ve[1],ge=(0,d.useState)([]),je=(0,c.Z)(ge,2),Ze=je[0],Ce=je[1],De=(0,d.useState)(0),ye=(0,c.Z)(De,2),Ee=ye[0],be=ye[1],we=(0,d.useState)(0),Se=(0,c.Z)(we,2),Ne=Se[0],Ae=Se[1],Le=(0,d.useState)(!1),Oe=(0,c.Z)(Le,2),ke=Oe[0],Te=Oe[1],Pe=(0,d.useState)([new Date,new Date]),Re=(0,c.Z)(Pe,2),ze=Re[0],Me=Re[1],Ie=!1,Ke=!1,Fe={PaperProps:{style:{maxHeight:224,width:250}}};D.length===P.length?Ie=!0:0===D.length?Ie=!1:D.length>0&&D.length<P.length&&(Ke=!0);var He=function(e){var t=e.rowData,n=e.onChange,a=e.checkedKeys,s=e.dataKey,l=(0,o.Z)(e,L);return(0,f.jsx)(r,(0,i.Z)((0,i.Z)({},l),{},{style:{padding:0},children:(0,f.jsx)("div",{style:{lineHeight:"46px"},children:(0,f.jsx)(h.Z,{value:t[s],inline:!0,onChange:n,checked:a.some((function(e){return e===t[s]}))})})}))},Ue=function(e){var t=e.rowData,n=(e.dataKey,(0,o.Z)(e,O));return(0,f.jsx)(r,(0,i.Z)((0,i.Z)({},n),{},{style:{padding:0},children:(0,f.jsx)("div",{style:{background:"".concat("COMPLETED"==t.status?"#00ff00":"PROCESSING"==t.status?"#FFA500":"CANCELLED"==t.status?"#e0e0e0":"transparent"),borderRadius:6,padding:"5px 10px",marginTop:"8px",overflow:"hidden",display:"inline-block"},children:(0,f.jsx)("div",{children:t.status})})}))},Ye=(0,d.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,s,i,o,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te(!0),t={method:"GET"},e.next=4,k.callApi("order/getOrders?start=".concat(x()(ze[0]).startOf("day").valueOf(),"&end=").concat(x()(ze[1]).endOf("day").valueOf(),"&type=").concat("ALL"!=U?U:""),t);case 4:200==(n=e.sent).status?(Te(!1),i=[],o=0,l=0,null===n||void 0===n||null===(r=n.data)||void 0===r||r.data.forEach((function(e){i.push({id:e.id,orderNo:"".concat(e.orderToken),shiprocketOrderNo:"".concat(e.id),name:"".concat(e.addressDetails.shippingAddress.firstName," ").concat(e.addressDetails.shippingAddress.lastName),date:x()(e.placedAt).format("YYYY-MM-DD h:m a"),status:e.orderStatus,city:e.addressDetails.shippingAddress.city,purchaseNo:e.purchaseCount,total:parseInt(e.orderTotalAmount)}),["CANCELLED","REFUNDED","FAILED"].includes(e.orderStatus)||(o+=parseInt(e.orderTotalAmount),e.orderDetails.forEach((function(e){l+=parseInt(e.count)})))})),be(o),Ae(l),R(i),q(i),Ce(null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.data)):Te(!1);case 6:case"end":return e.stop()}}),e)}))),[ze,U]);(0,d.useEffect)((function(){Ye()}),[ze,U]);var _e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=D.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.target.value,Te(!0),K(n),r={method:"POST",body:{status:n,ids:D}},e.next=8,k.callApi("/order/bulkUpdateOrderStatus",r);case 8:200==e.sent.status?(Te(!1),(s=JSON.parse(JSON.stringify(V))).map((function(e){D.includes(e.id)&&(e.status=n)})),R(s),q(s),(0,N.Z)("Success","Status Updated Successfully","success")):(Te(!1),(0,N.Z)("Error","Error while updating the status of order","error"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=(0,d.useCallback)((function(e){var t=V.filter((function(t){var n;return null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLocaleLowerCase().includes(e.trim().toLocaleLowerCase())}));R(t)}),[V]),Ve=function(){return ee&&ae?P.sort((function(e,t){var n=e[ee],r=t[ee];return"string"===typeof n&&(n=n.charCodeAt()),"string"===typeof r&&(r=r.charCodeAt()),"asc"===ae?n-r:r-n})):P},qe=Ve().filter((function(e,t){var n=le*(he-1);return t>=n&&t<n+le}));return(0,f.jsxs)(f.Fragment,{children:[ke?(0,f.jsx)(w.Z,{}):null,(0,f.jsxs)("div",{className:"container ordersContainer",children:[(0,f.jsx)("div",{className:"header my-4",children:"Orders"}),(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,f.jsx)(j.Z,{sx:{m:1,width:300,mt:3},children:(0,f.jsx)(Z.Z,{displayEmpty:!0,value:I,onChange:_e,input:(0,f.jsx)(m.Z,{}),renderValue:function(e){return e||(0,f.jsx)("em",{children:"Bulk actions"})},MenuProps:Fe,inputProps:{"aria-label":"Without label"},children:[{id:2,value:"PROCESSING",label:"Change status to processing"},{id:3,value:"ON HOLD",label:"Change status to on-hold"},{id:4,value:"COMPLETED",label:"Change status to completed"},{id:5,value:"CANCELLED",label:"Change status to cancelled"}].map((function(e){return(0,f.jsx)(g.Z,{value:e.value,children:e.label},e.id)}))})}),(0,f.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"0 0.75rem"},children:[(0,f.jsx)(E,{onChangeDateRange:function(e){Me(e)}}),(0,f.jsx)(j.Z,{sx:{width:300,mt:3},children:(0,f.jsx)(Z.Z,{displayEmpty:!0,value:U,onChange:function(e){var t=e.target.value;Y(t)},input:(0,f.jsx)(m.Z,{}),renderValue:function(e){return e||(0,f.jsx)("em",{children:"Filters"})},MenuProps:Fe,inputProps:{"aria-label":"Without label"},children:[{id:"all",value:"ALL"},{id:"processing",value:"PROCESSING"},{id:"onhold",value:"ON HOLD"},{id:"completed",value:"COMPLETED"},{id:"cancelled",value:"CANCELLED"},{id:"refunded",value:"REFUNDED"},{id:"failed",value:"FAILED"}].map((function(e){return(0,f.jsx)(g.Z,{value:e.value,children:e.value},e.id)}))})}),(0,f.jsx)("form",{className:"nosubmit",onSubmit:function(e){e.preventDefault()},children:(0,f.jsx)("input",{className:"nosubmit",type:"search",placeholder:"Search",onChange:function(e){return Be(e.target.value)}})}),(0,f.jsx)(A.CSVLink,{data:xe,filename:"orders.csv",headers:["PARTNER","DATE","EAN CODE","PRODUCT NAME","QTY","MRP SALES","NET(DISCOUNTED SALES)","LOCATION"],onClick:function(){var e=[];Ze.forEach((function(t){["CANCELLED","REFUNDED","FAILED"].includes(t.orderStatus)||t.orderDetails.forEach((function(n){e.push({PARTNER:"WEBSITE",DATE:x()(t.placedAt).format("DD/MM/YYYY"),"EAN CODE":n.refNumber,"PRODUCT NAME":n.productName+" "+Object.values(n.attributeCombination),QTY:n.count,"MRP SALES":n.productPrice*n.count,"NET(DISCOUNTED SALES)":n.productDiscountPrice*n.count,LOCATION:t.addressDetails.shippingAddress.city})}))})),me(e)},asyncOnClick:!0,style:{display:"inline",marginTop:"0px",textDecoration:"none"},children:(0,f.jsx)("button",{className:"btn ordersDownload",children:"Download"})})]})]}),(0,f.jsxs)(u.Z,{className:"my-4",height:300,id:"table",bordered:!0,loading:J,data:qe,sortColumn:ee,sortType:ae,onSortColumn:function(e,t){Q(!0),setTimeout((function(){Q(!1),te(e),se(t)}),500)},children:[(0,f.jsxs)(t,{width:100,align:"center",children:[(0,f.jsx)(n,{style:{padding:0},children:(0,f.jsx)("div",{style:{lineHeight:"40px"},children:(0,f.jsx)(h.Z,{inline:!0,checked:Ie,indeterminate:Ke,onChange:function(e,t){var n=t?P.map((function(e){return e.id})):[];y(n)}})})}),(0,f.jsx)(He,{dataKey:"id",checkedKeys:D,onChange:function(e,t){var n=t?[].concat((0,l.Z)(D),[e]):D.filter((function(t){return t!==e}));y(n)}})]}),(0,f.jsxs)(t,{align:"center",sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"Order No."}),(0,f.jsx)(r,{dataKey:"orderNo"})]}),(0,f.jsxs)(t,{align:"center",sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"Shiprocket Order No."}),(0,f.jsx)(r,{dataKey:"shiprocketOrderNo"})]}),(0,f.jsxs)(t,{align:"center",sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"Name"}),(0,f.jsx)(r,{dataKey:"name"})]}),(0,f.jsxs)(t,{align:"center",resizable:!0,children:[(0,f.jsx)(n,{}),(0,f.jsx)(r,{dataKey:"id",children:function(t){return(0,f.jsxs)("svg",{onClick:function(){return e("/view-order/".concat(t.id))},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-eye-fill",viewBox:"0 0 16 16",children:[(0,f.jsx)("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"}),(0,f.jsx)("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"})]})}})]}),(0,f.jsxs)(t,{width:100,sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"Purchase No."}),(0,f.jsx)(r,{dataKey:"purchaseNo"})]}),(0,f.jsxs)(t,{width:100,sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"City"}),(0,f.jsx)(r,{dataKey:"city"})]}),(0,f.jsxs)(t,{width:300,sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"Date"}),(0,f.jsx)(r,{dataKey:"date"})]}),(0,f.jsxs)(t,{width:235,sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"Status"}),(0,f.jsx)(Ue,{style:{padding:"10px 0"},dataKey:"status"})]}),(0,f.jsxs)(t,{width:300,sortable:!0,resizable:!0,children:[(0,f.jsx)(n,{children:"Total"}),(0,f.jsx)(r,{style:{padding:"10px 0"},dataKey:"total",children:function(e){return(0,f.jsxs)("div",{children:["\u20b9 ",e.total]})}})]})]}),(0,f.jsx)("div",{style:{padding:20},children:(0,f.jsx)(p.Z,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,maxButtons:5,size:"xs",layout:["total","-","limit","|","pager","skip"],total:Ve().length,limitOptions:[10,30,50],limit:le,activePage:he,onChangePage:pe,onChangeLimit:function(e){pe(1),ce(e)}})}),(0,f.jsxs)("div",{style:{textAlign:"right"},children:[(0,f.jsxs)("span",{children:["Total Sales - \u20b9",Ee]}),(0,f.jsxs)("span",{style:{marginLeft:"10px"},children:["Total Units Sold - ",Ne]})]})]})]})}}}]);
//# sourceMappingURL=8357.79cf3ac6.chunk.js.map