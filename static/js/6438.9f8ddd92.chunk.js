"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[6438],{44170:function(e,n,t){t.r(n);var i=t(65238),o=t(47701),a=t(7273),l=t(48672),r=t(87315),s=t(72791),u=t(72881),d=t(56960),c=t(57689),m=t(67604),g=t(24373),v=t(80184);const p=new i.Z;n.default=e=>{var n,t,i,f,h,b,y,w,x,S,j,Z,k,J,E,C,F,O;const[I,T]=(0,s.useState)(!1),N=(0,c.s0)(),[R,B]=(0,s.useState)({type:"",imageJson:{desktop:{},tab:{},mobile:{}}}),{id:L}=(0,c.UO)(),H=(0,s.useRef)(),A=(0,s.useCallback)((async()=>{T(!0);let e=await p.callApi("/banner/getBannerDetails/".concat(L||""),{method:"GET"});var n;200==(null===e||void 0===e?void 0:e.status)?(B(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data),T(!1)):(T(!1),d.Am.error("Something went wrong while fetching product"))}),[]);(0,s.useEffect)((()=>{"edit"==e.type&&A()}),[]);const M=async(e,n)=>{let t=new FormData;t.append("productImage",e);const i={method:"POST",headers:{"Content-Type":"multipart/form-data"},body:t,onUploadProgress:e=>{R.imageJson[n].progress=Math.round(100*e.loaded/e.total),B(JSON.parse(JSON.stringify(R)))}};let o=await p.callApi("/file/uploadFile",i);var a;200==o.status?(R.imageJson[n].image=null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.data,B(JSON.parse(JSON.stringify(R)))):(R.imageJson[n].progress=-1,B(JSON.parse(JSON.stringify(R))))},P=async e=>{var n,t;T(!0);let i=(null===R||void 0===R||null===(n=R.imageJson)||void 0===n||null===(t=n[e])||void 0===t?void 0:t.image).split("/");const o={method:"DELETE",body:{name:i[i.length-1]}};let a=await p.callApi("/file/deleteFile",o);return 200===(null===a||void 0===a?void 0:a.status)?(T(!1),R.imageJson[e].image="",R.imageJson[e].progress=0,B(JSON.parse(JSON.stringify(R))),"success"):(T(!1),d.Am.error("Error in deleting image. Something went wrong"),"failed")};return(0,v.jsxs)(v.Fragment,{children:[I?(0,v.jsx)(u.Z,{}):null,(0,v.jsx)("div",{className:"container-fluid addEditProductContainer my-lg-5",children:(0,v.jsxs)(o.Z,{onSubmit:async n=>{T(!0);const{type:t,pageLink:i}=n,o={type:t,pageLink:i.replace("https://embarkperfumes.com",""),imageJson:R.imageJson};"edit"==e.type&&(o.id=R.id);let a={method:"edit"==e.type?"PUT":"POST",body:o},l="edit"==e.type?"/banner/updatebanner":"/banner/createBanner",r=await p.callApi(l,a);if(200===(null===r||void 0===r?void 0:r.status)){let n="edit"==e.type?"Updated successfully":"Banner successfully created";(0,m.Z)("Success",n,"success"),T(!1)}else(0,m.Z)("Error","Something went wrong","error"),T(!1);N("/manage-banners")},ref:H,children:[(0,v.jsxs)(r.X2,{children:[(0,v.jsx)(r.sg,{md:6,children:(0,v.jsx)(a.Z,{name:"type",label:"Choose Banner Type",required:!0,isFormInputElement:!0,value:null===R||void 0===R?void 0:R.type,data:[{value:"topBanner",label:"Top Banner"},{value:"justLaunched",label:"Just Launched"}]})}),(0,v.jsx)(r.sg,{md:6,children:(0,v.jsx)(g.Z,{name:"pageLink",label:"Enter Page Link",required:!0,isFormInputElement:!0,value:null===R||void 0===R?void 0:R.pageLink})}),(0,v.jsx)(r.sg,{md:12,children:(0,v.jsx)(l.Z,{name:"desktopImage",label:"Banner Desktop Image/Gif",isFormInputElement:!0,required:!0,acceptedFormat:"image/png, image/jpeg, image/jpg, image/gif",onChange:e=>M(e,"desktop"),value:null!==R&&void 0!==R&&null!==(n=R.imageJson)&&void 0!==n&&null!==(t=n.desktop)&&void 0!==t&&t.image?"https://embarkperfumes.com/api/"+(null===R||void 0===R||null===(i=R.imageJson)||void 0===i||null===(f=i.desktop)||void 0===f?void 0:f.image):"",deleteFile:()=>P("desktop"),progress:null===R||void 0===R||null===(h=R.imageJson)||void 0===h||null===(b=h.desktop)||void 0===b?void 0:b.progress})}),(0,v.jsx)(r.sg,{md:12,children:(0,v.jsx)(l.Z,{name:"tabImage",label:"Banner Tab Image/Gif",isFormInputElement:!0,required:!0,acceptedFormat:"image/png, image/jpeg, image/jpg, image/gif",onChange:e=>M(e,"tab"),value:null!==R&&void 0!==R&&null!==(y=R.imageJson)&&void 0!==y&&null!==(w=y.tab)&&void 0!==w&&w.image?"https://embarkperfumes.com/api/"+(null===R||void 0===R||null===(x=R.imageJson)||void 0===x||null===(S=x.tab)||void 0===S?void 0:S.image):"",deleteFile:()=>P("tab"),progress:null===R||void 0===R||null===(j=R.imageJson)||void 0===j||null===(Z=j.tab)||void 0===Z?void 0:Z.progress})}),(0,v.jsx)(r.sg,{md:12,children:(0,v.jsx)(l.Z,{name:"mobileImage",label:"Banner Mobile Image/Gif",isFormInputElement:!0,required:!0,acceptedFormat:"image/png, image/jpeg, image/jpg, image/gif",onChange:e=>M(e,"mobile"),value:null!==R&&void 0!==R&&null!==(k=R.imageJson)&&void 0!==k&&null!==(J=k.mobile)&&void 0!==J&&J.image?"https://embarkperfumes.com/api/"+(null===R||void 0===R||null===(E=R.imageJson)||void 0===E||null===(C=E.mobile)||void 0===C?void 0:C.image):"",deleteFile:()=>P("mobile"),progress:null===R||void 0===R||null===(F=R.imageJson)||void 0===F||null===(O=F.mobile)||void 0===O?void 0:O.progress})})]}),(0,v.jsx)(r.Bo,{children:(0,v.jsxs)("div",{children:[(0,v.jsx)(r.ux,{style:{marginRight:12},children:"Cancel"}),(0,v.jsx)(r.un,{disabled:!1,onClick:()=>{var e;return null===(e=H.current)||void 0===e?void 0:e.handleSubmit()},children:"Submit"})]})})]})})]})}},71747:function(e,n,t){var i=t(87462),o=t(63366),a=t(72791),l=t(54164),r=t(47563),s=t(27979),u=t(93981),d=t(75721),c=t(80184);const m=["onChange","maxRows","minRows","style","value"];function g(e){return parseInt(e,10)||0}const v={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function p(e){return void 0===e||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}const f=a.forwardRef((function(e,n){const{onChange:t,maxRows:f,minRows:h=1,style:b,value:y}=e,w=(0,o.Z)(e,m),{current:x}=a.useRef(null!=y),S=a.useRef(null),j=(0,r.Z)(n,S),Z=a.useRef(null),k=a.useRef(0),[J,E]=a.useState({outerHeightStyle:0}),C=a.useCallback((()=>{const n=S.current,t=(0,s.Z)(n).getComputedStyle(n);if("0px"===t.width)return{outerHeightStyle:0};const i=Z.current;i.style.width=t.width,i.value=n.value||e.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");const o=t.boxSizing,a=g(t.paddingBottom)+g(t.paddingTop),l=g(t.borderBottomWidth)+g(t.borderTopWidth),r=i.scrollHeight;i.value="x";const u=i.scrollHeight;let d=r;h&&(d=Math.max(Number(h)*u,d)),f&&(d=Math.min(Number(f)*u,d)),d=Math.max(d,u);return{outerHeightStyle:d+("border-box"===o?a+l:0),overflow:Math.abs(d-r)<=1}}),[f,h,e.placeholder]),F=(e,n)=>{const{outerHeightStyle:t,overflow:i}=n;return k.current<20&&(t>0&&Math.abs((e.outerHeightStyle||0)-t)>1||e.overflow!==i)?(k.current+=1,{overflow:i,outerHeightStyle:t}):e},O=a.useCallback((()=>{const e=C();p(e)||E((n=>F(n,e)))}),[C]);a.useEffect((()=>{const e=(0,u.Z)((()=>{k.current=0,S.current&&(()=>{const e=C();p(e)||l.flushSync((()=>{E((n=>F(n,e)))}))})()}));let n;const t=S.current,i=(0,s.Z)(t);return i.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(n=new ResizeObserver(e),n.observe(t)),()=>{e.clear(),i.removeEventListener("resize",e),n&&n.disconnect()}})),(0,d.Z)((()=>{O()})),a.useEffect((()=>{k.current=0}),[y]);return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)("textarea",(0,i.Z)({value:y,onChange:e=>{k.current=0,x||O(),t&&t(e)},ref:j,rows:h,style:(0,i.Z)({height:J.outerHeightStyle,overflow:J.overflow?"hidden":void 0},b)},w)),(0,c.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:Z,tabIndex:-1,style:(0,i.Z)({},v,b,{padding:0})})]})}));n.Z=f},93981:function(e,n,t){function i(e){let n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((()=>{e.apply(this,o)}),t)}return i.clear=()=>{clearTimeout(n)},i}t.d(n,{Z:function(){return i}})},99723:function(e,n,t){function i(e){return e&&e.ownerDocument||document}t.d(n,{Z:function(){return i}})},27979:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(99723);function o(e){return(0,i.Z)(e).defaultView||window}},62971:function(e,n,t){function i(e,n){"function"===typeof e?e(n):e&&(e.current=n)}t.d(n,{Z:function(){return i}})},75721:function(e,n,t){var i=t(72791);const o="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;n.Z=o},47563:function(e,n,t){t.d(n,{Z:function(){return a}});var i=t(72791),o=t(62971);function a(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.useMemo((()=>n.every((e=>null==e))?null:e=>{n.forEach((n=>{(0,o.Z)(n,e)}))}),n)}}}]);
//# sourceMappingURL=6438.9f8ddd92.chunk.js.map