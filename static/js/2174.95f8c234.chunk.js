"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[2174],{50226:function(e,a,c){c.r(a),c.d(a,{default:function(){return g}});var l=c(72791),t=c(57689),s=c(4646),i=c(65238),r=c(72881),o=c(11087),n=c(33419),d=c(763),u=c(14902),h=c(95634),p=c(89404),m=c(80184);const v=new i.Z;var g=e=>{var a;const c=(0,t.s0)(),i=(0,t.TH)(),[g,b]=(0,l.useState)(!1),[x,f]=(0,l.useState)([]);let[y,j]=(0,l.useState)([]);const[N,k]=(0,l.useState)([]),[D,C]=(0,l.useState)(0),S=(0,t.UO)(),[F,w]=(0,o.lr)(),E=F.get("query");sessionStorage.setItem("emsebach",null!==E&&void 0!==E?E:"");let P=null===S||void 0===S?void 0:S.name;P=null===(a=P)||void 0===a?void 0:a.replaceAll("-"," ");const[T,A]=(0,l.useState)(P),[B,q]=(0,l.useState)(null),[O,H]=(0,l.useState)([]),[G,Z]=(0,l.useState)(e.type),I=(0,l.useRef)([]),[V,M]=(0,l.useState)([]);let[U,R]=(0,l.useState)([]),[W,_]=(0,l.useState)([]),[Q,z]=(0,l.useState)([]),[J,K]=(0,l.useState)([]);const[L,X]=(0,l.useState)("");let Y="bath & body",$=[],ee=[];"perfume"==T?($=[[0,500],[500,1e3],[1e3,3e3],[3e3,9999]],ee=[15,30,100,150]):T==Y?($=[[395],[595],[695],[795]],ee=[125,150,200,250,300]):"giftset"==T?($=[[1235],[1490],[1690],[1785],[2530]],ee=[45,60,280,450]):($=[[0,500],[500,1e3],[1e3,3e3],[3e3,9999]],ee=[15,30,100,150]),(0,l.useEffect)((()=>{Z(null===e||void 0===e?void 0:e.type)}),[e]);const ae=(0,l.useCallback)((async()=>{try{var e;b(!0);const r={method:"GET"};let o;var a,c,l,t,s,i;if(o="hierarchy"==G?await v.callApi("/product/getProductsByMajorHierarchy/".concat(T||""),r):"search"==G?await v.callApi("/product/searchProducts?q=".concat(E||""),r):"fragrances"==G?await v.callApi("/product/getProductsByFragrance/".concat(T||""),r):await v.callApi("/product/getProductsByGender/".concat(T||""),r),200==(null===(e=o)||void 0===e?void 0:e.status))b(!1),f(null===(a=o)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.data),j(null===(l=o)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data),k(null===(s=o)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.data);else f([]),j([]),k([]),b(!1)}catch(r){b(!1)}}),[T,E,G]);(0,l.useEffect)((()=>{let e;e=1===D?[...y].sort((function(e,a){return e.productDetails.productDiscountPrice-a.productDetails.productDiscountPrice})):2===D?[...y].sort((function(e,a){return a.productDetails.productDiscountPrice-e.productDetails.productDiscountPrice})):y,k(e)}),[y,D]),(0,l.useEffect)((()=>{(0,p.Z)("View Products")}),[]);const ce=(0,l.useCallback)((async()=>{try{const c={method:"GET"},l=await v.callApi("/hierarchy/getHierarchyDetailsByName/".concat(T||""),c);var e,a;if(200==(null===l||void 0===l?void 0:l.status))q(null===l||void 0===l||null===(e=l.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.hierarchyName)}catch(c){}}),[T]),le=(0,l.useCallback)((async()=>{b(!0);let e=await v.callApi("/hierarchy/getAllFragrances",{method:"GET"});var a;200==(null===e||void 0===e?void 0:e.status)&&M(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data.map((e=>({value:e.id,label:e.fragranceName}))))}),[]),te=(0,l.useCallback)((async()=>{let e=await v.callApi("/hierarchy/getHierarchyTreeByName/".concat(T||""),{method:"GET"});var a;200==(null===e||void 0===e?void 0:e.status)&&H(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data)}),[]);(0,l.useEffect)((()=>{"search"!=G&&ae(),"hierarchy"==G&&(ce(),T!=Y&&le(),te()),"search"!=G&&"gender"!=G||le()}),[T,G]),(0,l.useEffect)((()=>{"search"==G&&ae()}),[E,G]),(0,l.useEffect)((()=>{var e;let a=S.name;a=null===(e=a)||void 0===e?void 0:e.replaceAll("-"," "),A(a)}),[S]);const se=(e,a)=>{if(a)U=[...U,e];else{const a=U.indexOf(e);a>-1&&U.splice(a,1)}R([...U])},ie=(e,a)=>{if(a)W=[...W,e];else{const a=W.indexOf(e);a>-1&&W.splice(a,1)}_([...W])},re=(e,a)=>{if(a)Q=[...Q,e];else{let a=0,c=!1;Q.every(((l,t)=>!(0,d.isEqual)(l,e)||(a=t,c=!0,!1))),c&&Q.splice(a,1)}z([...Q])},oe=(e,a)=>{if(a)J=[...J,e];else{const a=J.indexOf(e);a>-1&&J.splice(a,1)}K([...J])},ne=()=>{b(!0),y=[...x],I.current.length&&(y=[...y.filter((e=>I.current.includes(e.hierarchyId)))]),U.length&&(y=[...y.filter((e=>U.some((a=>e.productDetails.attributeNumericValue==a))))]),Q.length&&(y=Q[0].length>1?[...y.filter((e=>Q.some((a=>e.productDetails.productDiscountPrice>a[0]&&e.productDetails.productDiscountPrice<a[1]))))]:[...y.filter((e=>Q.some((a=>e.productDetails.productDiscountPrice==a[0]))))]),J.length&&(y=[...y.filter((e=>J.includes(e.fragranceId)))]),W.length&&(y=[...y.filter((e=>W.includes(e.gender)))]),j([...y]),b(!1)},de=e=>{I.current=e};return(0,l.useEffect)((()=>{X(sessionStorage.getItem("emsebach"))}),[sessionStorage]),(0,m.jsxs)(m.Fragment,{children:[g?(0,m.jsx)(r.Z,{}):null,(0,m.jsx)(h.Z,{dataElementId:"mobileSearchBar",dataText:["Search Perfumes","Bath and Body","Search Gift Sets"],autoFocus:"/search"==i.pathname,navigate:c,searchValue:L}),(0,m.jsx)("div",{className:"container-fluid py-lg-3 py-2",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-lg-2 d-none d-lg-block py-3 productsFilters",children:[B?(0,m.jsx)("div",{className:"mb-3 ps-1",children:(0,m.jsxs)("strong",{children:["HOME - ",B]})}):"",(0,m.jsxs)("div",{className:"accordion",id:"accordionExample",children:["hierarchy"==G&&O.length?(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingOne",children:(0,m.jsx)("button",{className:"accordion-button filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:"Categories"})}),(0,m.jsx)("div",{id:"collapseOne",className:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:(0,m.jsx)(u.Z,{convertedHierarchy:O,handleChangeHierarchy:de})})})]}):"","gender"!=G?(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingFive",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFive","aria-expanded":"false","aria-controls":"collapseFive",children:"Gender"})}),(0,m.jsx)("div",{id:"collapseFive",className:"accordion-collapse collapse","aria-labelledby":"headingFive","data-bs-parent":"#accordionExample",children:(0,m.jsxs)("div",{className:"accordion-body",children:[(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:"0-20ml",id:"quantity1",onChange:e=>ie("Men",e.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"quantity1",children:"Men"})]}),(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:"20-50ml",id:"quantity2",onChange:e=>ie("Women",e.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"quantity2",children:"Women"})]}),(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:"50-100ml",id:"quantity3",onChange:e=>ie("Unisex",e.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"quantity3",children:"Unisex"})]})]})})]}):"",(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingTwo",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo",children:"Volume"})}),(0,m.jsx)("div",{id:"collapseTwo",className:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:ee.map(((e,a)=>(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"quantity".concat(a+1),onChange:a=>se(e,a.target.checked)}),(0,m.jsxs)("label",{className:"form-check-label",for:"quantity".concat(a+1),children:[e,"ml"]})]})))})})]}),(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingThree",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree",children:"Price"})}),(0,m.jsx)("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:$.map(((e,a)=>e.length>1?(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"price".concat(a+1),onChange:a=>re(e,a.target.checked)}),(0,m.jsxs)("label",{className:"form-check-label",for:"price".concat(a+1),children:["\u20b9",e[0]," - \u20b9 ",9999==e[1]?"above":e[1]]})]}):(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",id:"price".concat(a+1),onChange:a=>re(e,a.target.checked)}),(0,m.jsxs)("label",{className:"form-check-label",for:"price".concat(a+1),children:["\u20b9",e[0]]})]})))})})]}),V.length?(0,m.jsxs)("div",{className:"accordion-item",children:[(0,m.jsx)("h2",{className:"accordion-header",id:"headingFour",children:(0,m.jsx)("button",{className:"accordion-button  filterButton collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-expanded":"false","aria-controls":"collapseFour",children:"Fragrance Family"})}),(0,m.jsx)("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:(0,m.jsx)("div",{className:"accordion-body",children:V.map(((e,a)=>(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{className:"form-check-input",type:"checkbox",value:e.label,id:"fragrance".concat(a),onChange:a=>oe(e.value,a.target.checked)}),(0,m.jsx)("label",{className:"form-check-label",for:"fragrance".concat(a),children:e.label})]})))})})]}):""]}),(0,m.jsx)("div",{className:"applyFilterBtn",children:(0,m.jsx)("button",{onClick:ne,children:"Apply Filter"})})]}),(0,m.jsx)("div",{className:"col-lg-10",children:(0,m.jsxs)("div",{className:"row gx-2",children:[null===N||void 0===N?void 0:N.map((e=>(0,m.jsx)("div",{className:"col-6 col-md-4 col-lg-3",children:(0,m.jsx)(s.Z,{cardClass:"productsDetails",id:e.id,productVariantId:e.productDetails.id,name:e.productName,src:"https://embarkperfumes.com/api/"+e.productDetails.pictureUrl,originalPrice:e.productDetails.productPrice,title:e.productName,price:e.productDetails.productDiscountPrice,attributeCombination:e.productDetails.attributeCombination,bestSellerStatus:e.productDetails.bestSellerStatus,isActive:e.productDetails.isActive,isNew:e.productDetails.isNew,rating:e.productDetails.rating,ratingCount:e.productDetails.ratingCount})}))),g?(0,m.jsx)(m.Fragment,{}):0==(null===N||void 0===N?void 0:N.length)?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:(0,m.jsx)("div",{className:"fs-3 fw-bold",children:"No Data"})}):(0,m.jsx)(m.Fragment,{})]})})]})}),(0,m.jsx)(n.Z,{fragrances:V,type:G,convertedHierarchy:O,handleOnApplyFilter:ne,handleChangeHierarchy:de,handleFragranceChange:oe,handlePriceChange:re,handleGenderChange:ie,handleQuantityChange:se,handleButtonActive:C,buttonActive:D,priceRange:$,volumeRange:ee,name:T})]})}}}]);
//# sourceMappingURL=2174.95f8c234.chunk.js.map