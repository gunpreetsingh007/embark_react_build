"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[6438],{44170:function(e,n,t){t.r(n);var r=t(74165),i=t(15861),o=t(29439),a=t(65238),u=t(47701),l=t(7273),s=t(48672),d=t(87315),c=t(72791),f=t(72881),m=t(56960),g=t(57689),v=t(67604),p=t(24373),h=t(80184),b=new a.Z;n.default=function(e){var n,t,a,y,w,x,Z,S,j,k,J,E,C,F,O,I,T,N,R=(0,c.useState)(!1),B=(0,o.Z)(R,2),L=B[0],H=B[1],A=(0,g.s0)(),M=(0,c.useState)({type:"",imageJson:{desktop:{},tab:{},mobile:{}}}),P=(0,o.Z)(M,2),q=P[0],z=P[1],D=(0,g.UO)().id,G=(0,c.useRef)(),U=(0,c.useCallback)((0,i.Z)((0,r.Z)().mark((function e(){var n,t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),n={method:"GET"},e.next=4,b.callApi("/banner/getBannerDetails/".concat(D||""),n);case 4:200==(null===(t=e.sent)||void 0===t?void 0:t.status)?(z(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data),H(!1)):(H(!1),m.Am.error("Something went wrong while fetching product"));case 6:case"end":return e.stop()}}),e)}))),[]);(0,c.useEffect)((function(){"edit"==e.type&&U()}),[]);var W=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i,o,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("productImage",n),o={method:"POST",headers:{"Content-Type":"multipart/form-data"},body:i,onUploadProgress:function(e){q.imageJson[t].progress=Math.round(100*e.loaded/e.total),z(JSON.parse(JSON.stringify(q)))}},e.next=5,b.callApi("/file/uploadFile",o);case 5:200==(a=e.sent).status?(q.imageJson[t].image=null===a||void 0===a||null===(u=a.data)||void 0===u?void 0:u.data,z(JSON.parse(JSON.stringify(q)))):(q.imageJson[t].progress=-1,z(JSON.parse(JSON.stringify(q))));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,o,a,u,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),o=null===q||void 0===q||null===(t=q.imageJson)||void 0===t||null===(i=t[n])||void 0===i?void 0:i.image,a=o.split("/"),u=a[a.length-1],l={method:"DELETE",body:{name:u}},e.next=7,b.callApi("/file/deleteFile",l);case 7:if(200!==(null===(s=e.sent)||void 0===s?void 0:s.status)){e.next=16;break}return H(!1),q.imageJson[n].image="",q.imageJson[n].progress=0,z(JSON.parse(JSON.stringify(q))),e.abrupt("return","success");case 16:return H(!1),m.Am.error("Error in deleting image. Something went wrong"),e.abrupt("return","failed");case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var n=(0,i.Z)((0,r.Z)().mark((function n(t){var i,o,a,u,l,s,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return H(!0),i=t.type,o=t.pageLink,a={type:i,pageLink:o.replace("http://localhost:3000",""),imageJson:q.imageJson},"edit"==e.type&&(a.id=q.id),u={method:"edit"==e.type?"PUT":"POST",body:a},l="edit"==e.type?"/banner/updatebanner":"/banner/createBanner",n.next=8,b.callApi(l,u);case 8:200===(null===(s=n.sent)||void 0===s?void 0:s.status)?(d="edit"==e.type?"Updated successfully":"Banner successfully created",(0,v.Z)("Success",d,"success"),H(!1)):((0,v.Z)("Error","Something went wrong","error"),H(!1)),A("/manage-banners");case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[L?(0,h.jsx)(f.Z,{}):null,(0,h.jsx)("div",{className:"container-fluid addEditProductContainer my-lg-5",children:(0,h.jsxs)(u.Z,{onSubmit:V,ref:G,children:[(0,h.jsxs)(d.X2,{children:[(0,h.jsx)(d.sg,{md:6,children:(0,h.jsx)(l.Z,{name:"type",label:"Choose Banner Type",required:!0,isFormInputElement:!0,value:null===q||void 0===q?void 0:q.type,data:[{value:"topBanner",label:"Top Banner"},{value:"justLaunched",label:"Just Launched"}]})}),(0,h.jsx)(d.sg,{md:6,children:(0,h.jsx)(p.Z,{name:"pageLink",label:"Enter Page Link",required:!0,isFormInputElement:!0,value:null===q||void 0===q?void 0:q.pageLink})}),(0,h.jsx)(d.sg,{md:12,children:(0,h.jsx)(s.Z,{name:"desktopImage",label:"Banner Desktop Image/Gif",isFormInputElement:!0,required:!0,acceptedFormat:"image/png, image/jpeg, image/jpg, image/gif",onChange:function(e){return W(e,"desktop")},value:null!==q&&void 0!==q&&null!==(n=q.imageJson)&&void 0!==n&&null!==(t=n.desktop)&&void 0!==t&&t.image?"http://localhost:8085/api/"+(null===q||void 0===q||null===(a=q.imageJson)||void 0===a||null===(y=a.desktop)||void 0===y?void 0:y.image):"",deleteFile:function(){return _("desktop")},progress:null===q||void 0===q||null===(w=q.imageJson)||void 0===w||null===(x=w.desktop)||void 0===x?void 0:x.progress})}),(0,h.jsx)(d.sg,{md:12,children:(0,h.jsx)(s.Z,{name:"tabImage",label:"Banner Tab Image/Gif",isFormInputElement:!0,required:!0,acceptedFormat:"image/png, image/jpeg, image/jpg, image/gif",onChange:function(e){return W(e,"tab")},value:null!==q&&void 0!==q&&null!==(Z=q.imageJson)&&void 0!==Z&&null!==(S=Z.tab)&&void 0!==S&&S.image?"http://localhost:8085/api/"+(null===q||void 0===q||null===(j=q.imageJson)||void 0===j||null===(k=j.tab)||void 0===k?void 0:k.image):"",deleteFile:function(){return _("tab")},progress:null===q||void 0===q||null===(J=q.imageJson)||void 0===J||null===(E=J.tab)||void 0===E?void 0:E.progress})}),(0,h.jsx)(d.sg,{md:12,children:(0,h.jsx)(s.Z,{name:"mobileImage",label:"Banner Mobile Image/Gif",isFormInputElement:!0,required:!0,acceptedFormat:"image/png, image/jpeg, image/jpg, image/gif",onChange:function(e){return W(e,"mobile")},value:null!==q&&void 0!==q&&null!==(C=q.imageJson)&&void 0!==C&&null!==(F=C.mobile)&&void 0!==F&&F.image?"http://localhost:8085/api/"+(null===q||void 0===q||null===(O=q.imageJson)||void 0===O||null===(I=O.mobile)||void 0===I?void 0:I.image):"",deleteFile:function(){return _("mobile")},progress:null===q||void 0===q||null===(T=q.imageJson)||void 0===T||null===(N=T.mobile)||void 0===N?void 0:N.progress})})]}),(0,h.jsx)(d.Bo,{children:(0,h.jsxs)("div",{children:[(0,h.jsx)(d.ux,{style:{marginRight:12},children:"Cancel"}),(0,h.jsx)(d.un,{disabled:!1,onClick:function(){var e;return null===(e=G.current)||void 0===e?void 0:e.handleSubmit()},children:"Submit"})]})})]})})]})}},71747:function(e,n,t){var r=t(29439),i=t(87462),o=t(63366),a=t(72791),u=t(54164),l=t(47563),s=t(27979),d=t(93981),c=t(75721),f=t(80184),m=["onChange","maxRows","minRows","style","value"];function g(e){return parseInt(e,10)||0}var v={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function p(e){return void 0===e||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}var h=a.forwardRef((function(e,n){var t=e.onChange,h=e.maxRows,b=e.minRows,y=void 0===b?1:b,w=e.style,x=e.value,Z=(0,o.Z)(e,m),S=a.useRef(null!=x).current,j=a.useRef(null),k=(0,l.Z)(n,j),J=a.useRef(null),E=a.useRef(0),C=a.useState({outerHeightStyle:0}),F=(0,r.Z)(C,2),O=F[0],I=F[1],T=a.useCallback((function(){var n=j.current,t=(0,s.Z)(n).getComputedStyle(n);if("0px"===t.width)return{outerHeightStyle:0};var r=J.current;r.style.width=t.width,r.value=n.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=t.boxSizing,o=g(t.paddingBottom)+g(t.paddingTop),a=g(t.borderBottomWidth)+g(t.borderTopWidth),u=r.scrollHeight;r.value="x";var l=r.scrollHeight,d=u;return y&&(d=Math.max(Number(y)*l,d)),h&&(d=Math.min(Number(h)*l,d)),{outerHeightStyle:(d=Math.max(d,l))+("border-box"===i?o+a:0),overflow:Math.abs(d-u)<=1}}),[h,y,e.placeholder]),N=function(e,n){var t=n.outerHeightStyle,r=n.overflow;return E.current<20&&(t>0&&Math.abs((e.outerHeightStyle||0)-t)>1||e.overflow!==r)?(E.current+=1,{overflow:r,outerHeightStyle:t}):e},R=a.useCallback((function(){var e=T();p(e)||I((function(n){return N(n,e)}))}),[T]);a.useEffect((function(){var e,n=(0,d.Z)((function(){E.current=0,j.current&&function(){var e=T();p(e)||u.flushSync((function(){I((function(n){return N(n,e)}))}))}()})),t=j.current,r=(0,s.Z)(t);return r.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(n)).observe(t),function(){n.clear(),r.removeEventListener("resize",n),e&&e.disconnect()}})),(0,c.Z)((function(){R()})),a.useEffect((function(){E.current=0}),[x]);return(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)("textarea",(0,i.Z)({value:x,onChange:function(e){E.current=0,S||R(),t&&t(e)},ref:k,rows:y,style:(0,i.Z)({height:O.outerHeightStyle,overflow:O.overflow?"hidden":void 0},w)},Z)),(0,f.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:J,tabIndex:-1,style:(0,i.Z)({},v,w,{padding:0})})]})}));n.Z=h},93981:function(e,n,t){function r(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){e.apply(r,o)}),t)}return r.clear=function(){clearTimeout(n)},r}t.d(n,{Z:function(){return r}})},99723:function(e,n,t){function r(e){return e&&e.ownerDocument||document}t.d(n,{Z:function(){return r}})},27979:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(99723);function i(e){return(0,r.Z)(e).defaultView||window}},62971:function(e,n,t){function r(e,n){"function"===typeof e?e(n):e&&(e.current=n)}t.d(n,{Z:function(){return r}})},75721:function(e,n,t){var r=t(72791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;n.Z=i},47563:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(72791),i=t(62971);function o(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return r.useMemo((function(){return n.every((function(e){return null==e}))?null:function(e){n.forEach((function(n){(0,i.Z)(n,e)}))}}),n)}}}]);
//# sourceMappingURL=6438.eb27c834.chunk.js.map