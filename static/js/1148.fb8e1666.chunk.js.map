{"version":3,"file":"static/js/1148.fb8e1666.chunk.js","mappings":"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","sources":["api/index.js","api/Axios.js","routes/ProtectedComponent.jsx"],"sourcesContent":["import axios from 'axios';\nclass HttpClient {\n\n  constructor(baseURL) {\n    this.instance = axios.create({\n      baseURL,\n    });\n\n    this._initializeResponseInterceptor();\n  }\n\n  _initializeResponseInterceptor = () => {\n    this.instance.interceptors.response.use(\n      this._handleResponse,\n      this._handleError,\n    );\n  };\n\n  _handleResponse = (data) => data;\n\n  _handleError = async ({ response, config }) => {\n    const originalRequest = config;\n    // if (response?.status === 401 && !originalRequest._retry) {\n    //   // call refresh token\n    //   localStorage.clear();\n    //   sessionStorage.clear()\n    //   store.dispatch(logout())\n    //   window.location.href = '/sign-in'\n    // }\n    return Promise.resolve(response);\n  };\n}\n\nexport default HttpClient;","import HttpClient from \"./index\";\nimport store from \"../store\";\nexport default class Axios extends HttpClient {\n  constructor() {\n    super(process.env.REACT_APP_BASE_URL);\n    this._initializeRequestInterceptor();\n  }\n\n\n  _initializeRequestInterceptor = () => {\n    this.instance.interceptors.request.use(this._handleRequest);\n  };\n\n  _handleRequest = async (config) => {\n    let token = store.getState().user.currentUser.accessToken\n    if (token)\n    config.headers.Authorization = token;\n    // config.headers['CSRF-TOKEN'] = Cookies.get('v2');\n    return config;\n  };\n\n  callApi(url, options) {\n    return this.instance({\n      method: options.method,\n      url: url,\n      headers: options?.header ? options?.header : {},\n      data: options?.body ? options?.body : undefined,\n      onUploadProgress: options?.onUploadProgress ? options?.onUploadProgress : undefined\n    });\n  };\n}\n","import React from \"react\";\nimport {\n  useNavigate\n} from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport Axios from \"../api/Axios\";\nimport {  updateUser } from \"../store/user\";\nimport { useCallback } from \"react\";\nimport { useLayoutEffect } from \"react\";\nimport Swal from 'sweetalert2'\nimport withReactContent from 'sweetalert2-react-content'\nimport Loader from \"../components/Loader\";\nimport { useState } from \"react\";\nconst axios = new Axios();\nconst MySwal = withReactContent(Swal)\n\nexport default (props) => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const { accessCode, Component } = props;\n  const [userRole, setUserRole] = useState(null);\n  const getCurrentUser = useCallback(async ()=>{\n    let options = {\n      method: \"GET\"\n    }\n    let result = await axios.callApi(\"/user/me\", options)\n    if (result?.status === 200) {\n      dispatch(updateUser({\n        role: result.data.data.role,\n        userId: result.data.data.id,\n        firstName: result.data.data.firstName,\n        lastName: result.data.data.lastName,\n        email: result.data.data.email,\n        contact: result.data.data.phoneNumber\n      }))\n      setUserRole(result.data.data.role)\n    }\n    else{\n      setUserRole(\"sign-in-required\")\n    }\n  },[])\n  \n  useLayoutEffect(()=>{\n    getCurrentUser()\n  },[])\n\n  if(!userRole){\n    return (<Loader/>)\n  }\n  else if(userRole == \"sign-in-required\"){\n    MySwal.fire({\n      text: \"You need to sign in to continue\",\n      buttons: {\n        OK: {\n          text: \"OK\",\n          value: \"OK\",\n        }\n      },\n    })\n      .then((value) => {\n        if (value?.isConfirmed) {\n          return navigate(\"/sign-in\")\n        }\n      });\n  }\n  else if(!accessCode.includes(userRole)){\n    MySwal.fire({\n      text: \"You are not authorized\",\n      buttons: {\n        OK: {\n          text: \"OK\",\n          value: \"OK\",\n        }\n      },\n    })\n      .then((value) => {\n        if (value?.isConfirmed) {\n          return navigate(-1)\n        }\n      });\n  }\n  else {\n    return Component\n  }\n};\n"],"names":["HttpClient","_createClass","baseURL","_this","_classCallCheck","_initializeResponseInterceptor","instance","interceptors","response","use","_handleResponse","_handleError","data","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","config","wrap","_context","prev","next","abrupt","Promise","resolve","stop","_x","apply","arguments","this","axios","Axios","_HttpClient","_inherits","_super","_createSuper","call","process","_initializeRequestInterceptor","request","_handleRequest","token","store","user","currentUser","accessToken","headers","Authorization","key","value","url","options","method","header","body","undefined","onUploadProgress","MySwal","withReactContent","Swal","props","dispatch","useDispatch","navigate","useNavigate","accessCode","Component","_useState","useState","_useState2","_slicedToArray","userRole","setUserRole","getCurrentUser","useCallback","result","callApi","sent","status","updateUser","role","userId","id","firstName","lastName","email","contact","phoneNumber","useLayoutEffect","_jsx","Loader","fire","text","buttons","OK","then","isConfirmed","includes"],"sourceRoot":""}