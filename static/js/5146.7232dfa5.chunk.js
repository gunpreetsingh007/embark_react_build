"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[5146],{65238:function(e,r,n){n.d(r,{Z:function(){return p}});var s=n(74165),t=n(15861),a=n(15671),o=n(43144),i=n(60136),c=n(27277),l=n(74569),u=n.n(l),d=(0,o.Z)((function e(r){var n=this;(0,a.Z)(this,e),this._initializeResponseInterceptor=function(){n.instance.interceptors.response.use(n._handleResponse,n._handleError)},this._handleResponse=function(e){return e},this._handleError=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(r){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.response,t=r.config,t,e.abrupt("return",Promise.resolve(n));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),this.instance=u().create({baseURL:r}),this._initializeResponseInterceptor()})),m=d,f=n(69441),p=function(e){(0,i.Z)(n,e);var r=(0,c.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=r.call(this,"http://localhost:8085/api"))._initializeRequestInterceptor=function(){e.instance.interceptors.request.use(e._handleRequest)},e._handleRequest=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(r){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=f.Z.getState().user.currentUser.accessToken)&&(r.headers.Authorization=n),sessionStorage.getItem("session-id")&&(r.headers["session-id"]=sessionStorage.getItem("session-id")),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e._initializeRequestInterceptor(),e}return(0,o.Z)(n,[{key:"callApi",value:function(e,r){return this.instance({method:r.method,url:e,headers:null!==r&&void 0!==r&&r.header?null===r||void 0===r?void 0:r.header:{},data:null!==r&&void 0!==r&&r.body?null===r||void 0===r?void 0:r.body:void 0,onUploadProgress:null!==r&&void 0!==r&&r.onUploadProgress?null===r||void 0===r?void 0:r.onUploadProgress:void 0})}}]),n}(m)},89404:function(e,r,n){var s=n(29439),t=n(37762),a=new(n(65238).Z);r.Z=function(e){if(sessionStorage.getItem("session-id")&&(o=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(o)))a.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");var r=function(e){var r,n=new URLSearchParams(window.location.search),a={},o=(0,t.Z)(n);try{for(o.s();!(r=o.n()).done;){var i=(0,s.Z)(r.value,2),c=i[0],l=i[1];c.includes(e)&&(a[c]=l)}}catch(u){o.e(u)}finally{o.f()}return a}("utm"),n={method:"POST",body:{additionalDetails:r,event:e}};a.callApi("/session/createNewSession",n).then((function(e){sessionStorage.setItem("session-id",e.data.data)}))}var o}},67604:function(e,r,n){var s=n(74165),t=n(15861),a=n(21830),o=n.n(a),i=n(58086),c=n.n(i),l=n(80184),u=c()(o()),d=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(r,n,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.fire({title:(0,l.jsx)("strong",{children:r}),html:(0,l.jsx)("p",{children:n}),icon:t}));case 1:case"end":return e.stop()}}),e)})));return function(r,n,s){return e.apply(this,arguments)}}();r.Z=d},5146:function(e,r,n){n.r(r),n.d(r,{default:function(){return v}});var s=n(74165),t=n(15861),a=n(4942),o=n(1413),i=n(29439),c=n(72791),l=function(e){var r=e.email,n=e.newPassword,s={email:!1,newPassword:!1,message:""};return r||(s.email=!0),r&&!/\S+@\S+\.\S+/.test(r)&&(s.email=!0,s.message="invalid email"),n||(s.newPassword=!0),s},u=n(57689),d=n(65238),m=n(67604),f=n(72881),p=n(89404),h=n(80184),w=new d.Z,v=function(){var e=(0,u.UO)().token,r=(0,c.useState)(!1),n=(0,i.Z)(r,2),d=n[0],v=n[1],Z=(0,u.s0)(),g=(0,c.useState)({email:!1,confirmPassword:!1,message:""}),P=(0,i.Z)(g,2),b=P[0],x=P[1],S=(0,c.useState)({email:"",newPassword:"",confirmPassword:""}),k=(0,i.Z)(S,2),j=k[0],y=k[1],N=function(e,r){y((0,o.Z)((0,o.Z)({},j),{},(0,a.Z)({},r,e))),!0!==b.email&&!0!==b.confirmPassword&&!0!==b.newPassword||x((0,o.Z)((0,o.Z)({},b),{},(0,a.Z)({},r,!1)))},A=function(){var r=(0,t.Z)((0,s.Z)().mark((function r(n){var t,a;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),t=l(j),j.newPassword!==j.confirmPassword&&(t.confirmPassword=!0),x(t),!(t.email||t.confirmPassword||t.newPassword)){r.next=6;break}return r.abrupt("return");case 6:return r.prev=6,a={method:"POST",body:(0,o.Z)((0,o.Z)({},j),{},{token:e})},v(!0),r.next=11,w.callApi("auth/resetPassword",a);case 11:200==r.sent.status?(v(!1),Z("/sign-in"),(0,m.Z)("Success","Password has been reset","success")):(v(!1),(0,m.Z)("Failure","Error in changing password","error")),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(6),console.error("Something went wrong");case 18:case"end":return r.stop()}}),r,null,[[6,15]])})));return function(e){return r.apply(this,arguments)}}(),F=function(){var r=(0,t.Z)((0,s.Z)().mark((function r(){var n,t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n={method:"POST",body:{token:e}},r.next=4,w.callApi("auth/verifyForgetToken",n);case 4:200==(t=r.sent).status?y((0,o.Z)((0,o.Z)({},j),{},{email:t.data.data.email})):Z("*"),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("Something went wrong");case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}();return(0,c.useEffect)((function(){F()}),[]),(0,c.useEffect)((function(){(0,p.Z)("Reset Password")}),[]),(0,h.jsxs)(h.Fragment,{children:[d?(0,h.jsx)(f.Z,{}):null,(0,h.jsx)("div",{className:"resetPassword-wrapper bg-dark d-flex align-item-center justify-content-center w-100",children:(0,h.jsxs)("div",{className:"resetPassword",children:[(0,h.jsx)("h2",{className:"mb-3",children:"Reset Passowrd"}),(0,h.jsxs)("form",{children:[(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,h.jsx)("input",{disabled:!0,id:"email",className:"form-control ".concat(b.email&&"errorInputField"),required:!0,onChange:function(e){return N(e.target.value,"email")},value:j.email}),b.email&&(0,h.jsx)("div",{className:"error",children:b.message?"Please enter a valid email":"Please enter your email"})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"new password",className:"form-label",children:"New password"}),(0,h.jsx)("input",{type:"password",id:"new password",className:"form-control ".concat(b.newPassword?"errorInputField":""),required:!0,onChange:function(e){return N(e.target.value,"newPassword")}}),b.newPassword&&(0,h.jsx)("div",{className:"error",children:"Please enter a password"})]}),(0,h.jsxs)("div",{className:"form-group mb-2",children:[(0,h.jsx)("label",{htmlFor:"confirm password",className:"form-label",children:"Confirm new password"}),(0,h.jsx)("input",{type:"password",id:"confirm password",className:"form-control ".concat(b.confirmPassword?"errorInputField":""),required:!0,onChange:function(e){return N(e.target.value,"confirmPassword")}}),b.confirmPassword&&(0,h.jsx)("div",{className:"error",children:"Passwords do not match"})]}),(0,h.jsx)("button",{className:"btn btn-dark w-100 mt-2",onClick:function(e){return A(e)},children:"RESET PASSWORD"})]})]})})]})}}}]);
//# sourceMappingURL=5146.7232dfa5.chunk.js.map