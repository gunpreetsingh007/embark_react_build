"use strict";(self.webpackChunkembark_react=self.webpackChunkembark_react||[]).push([[9913],{89404:function(e,r,a){const t=new(a(27117).Z);r.Z=e=>{if(sessionStorage.getItem("session-id")&&(r=sessionStorage.getItem("session-id"),/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89ABab][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/.test(r)))t.callApi("/session/trackUserEvent",{method:"POST",body:{event:e}});else{sessionStorage.removeItem("session-id");const r=function(e){const r=new URLSearchParams(window.location.search),a={};for(const[t,s]of r)t.includes(e)&&(a[t]=s);return a}("utm");let a={method:"POST",body:{additionalDetails:r,event:e}};t.callApi("/session/createNewSession",a).then((e=>{sessionStorage.setItem("session-id",e.data.data)}))}var r}},67604:function(e,r,a){var t=a(21830),s=a.n(t),n=a(58086),o=a.n(n),i=a(80184);const c=o()(s());r.Z=async(e,r,a)=>c.fire({title:(0,i.jsx)("strong",{children:e}),html:(0,i.jsx)("p",{children:r}),icon:a})},9913:function(e,r,a){a.r(r),a.d(r,{default:function(){return f}});var t=a(72791);const s=e=>{const{emailOrPhone:r,password:a}=e;var t={emailOrPhone:!1,password:!1,message:""};return r||(t.emailOrPhone=!0),(r&&isNaN(r)&&!/\S+@\S+\.\S+/.test(r)||!isNaN(r)&&10!=r.length)&&(t.emailOrPhone=!0,t.message="invalid emailOrPhone"),a||(t.password=!0),t};var n=a(57689),o=a(11087),i=a(46799),c=a(27117),l=a(59434),d=a(72881),m=a(67604),h=a(30456),u=a(89404),g=a(80184);const p=new c.Z;var f=function(){const e=(0,n.s0)(),r=(0,l.I0)(),[a,c]=(0,o.lr)(),[f,w]=(0,t.useState)(a.get("target")||null),[b,v]=(0,t.useState)(!1),[N,x]=(0,t.useState)({emailOrPhone:!1,password:!1,message:""}),[S,y]=(0,t.useState)({emailOrPhone:"",password:""}),j=(e,r)=>{y({...S,[r]:e}),!0!==N.emailOrPhone&&!0!==N.password||x({...N,[r]:!1})},k=window.google,P=async a=>{const t={method:"POST",body:(0,h.Z)(a.credential)};try{v(!0);const a=await p.callApi("auth/loginWithGoogle",t);200==a.status?(v(!1),r((0,i.x4)({userId:a.data.id,accessToken:a.data.accessToken,role:a.data.role,firstName:a.data.firstName,lastName:a.data.lastName,email:a.data.email,contact:a.data.phoneNumber})),e("checkout"==f?"/checkout":"/")):(v(!1),(0,m.Z)("Error",a.data.errorMessage||"Something went wrong","error"))}catch(N){console.error("Something went wrong")}};return(0,t.useEffect)((()=>{k.accounts.id.initialize({client_id:"565815563901-1aifse56er87bilok6i98r9p5h8pnhsu.apps.googleusercontent.com",callback:P}),k.accounts.id.renderButton(document.getElementById("SignInWithGoogle"),{theme:"outline",size:"large"})}),[]),(0,t.useEffect)((()=>{(0,u.Z)("Sign In")}),[]),(0,g.jsxs)(g.Fragment,{children:[b?(0,g.jsx)(d.Z,{}):null,(0,g.jsx)("div",{className:"signIn-wrapper bg-dark d-flex align-item-center justify-content-center w-100",children:(0,g.jsxs)("div",{className:"signIn",children:[(0,g.jsx)("h2",{className:"mb-3",children:"Sign In"}),(0,g.jsxs)("form",{children:[(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"emailOrPhone",className:"form-label",children:"Email Address or Phone Number"}),(0,g.jsx)("input",{id:"emailOrPhone",className:"form-control ".concat(N.emailOrPhone&&"errorInputField"),required:!0,onChange:e=>j(e.target.value,"emailOrPhone")}),N.emailOrPhone&&(0,g.jsx)("div",{className:"error",children:N.message?"Please enter a valid email or phone number ":"Please enter your email or phone number"})]}),(0,g.jsxs)("div",{className:"form-group mb-2",children:[(0,g.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,g.jsx)("input",{type:"password",id:"password",className:"form-control ".concat(N.password&&"errorInputField"),required:!0,onChange:e=>j(e.target.value,"password")}),N.password&&(0,g.jsx)("div",{className:"error",children:"Please enter your password"}),(0,g.jsx)("div",{className:"forget-password mt-2",children:(0,g.jsx)(o.rU,{to:"/forget-password",children:(0,g.jsx)("span",{children:"Forgot Password?"})})})]}),(0,g.jsx)("button",{className:"btn btn-dark w-100 mt-2",onClick:a=>(async a=>{try{a.preventDefault();const t=s(S);if(x(t),t.emailOrPhone||t.password)return;const n={method:"POST",body:S};v(!0);const o=await p.callApi("auth/login",n);200==o.status?(v(!1),r((0,i.x4)({userId:o.data.id,accessToken:o.data.accessToken,role:o.data.role,firstName:o.data.firstName,lastName:o.data.lastName,email:o.data.email,contact:o.data.phoneNumber})),e("checkout"==f?"/checkout":"cart"==f?"/cart":"/")):(v(!1),(0,m.Z)("Error",o.data.errorMessage||"Something went wrong","error"))}catch(N){console.error("Something went wrong")}})(a),children:"SIGN IN"}),(0,g.jsx)("div",{className:"text-center mt-2",children:(0,g.jsxs)("p",{children:["Not a member? ",(0,g.jsx)(o.rU,{to:"/sign-up",children:"Register"})]})}),(0,g.jsx)("span",{style:{display:"block",textAlign:"center",margin:"0.7rem 0"},children:" OR  "}),(0,g.jsx)("div",{id:"SignInWithGoogle",style:{display:"flex",justifyContent:"center"}})]})]})})]})}},30456:function(e,r,a){function t(e){this.message=e}t.prototype=new Error,t.prototype.name="InvalidCharacterError";var s="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,s,n=0,o=0,i="";s=r.charAt(o++);~s&&(a=n%4?64*a+s:s,n++%4)?i+=String.fromCharCode(255&a>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return i};function n(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(s(e).replace(/(.)/g,(function(e,r){var a=r.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a})))}(r)}catch(e){return s(r)}}function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",r.Z=function(e,r){if("string"!=typeof e)throw new o("Invalid token specified");var a=!0===(r=r||{}).header?0:1;try{return JSON.parse(n(e.split(".")[a]))}catch(e){throw new o("Invalid token specified: "+e.message)}}}}]);
//# sourceMappingURL=9913.62fd4f85.chunk.js.map